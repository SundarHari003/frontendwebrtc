import{r as n,j as e,M as xr,F as gr,a as hr,b as fr,c as pr,d as br,P as Ue,e as jr,f as vr,g as yr,R as Le,l as wr,V as i,I as Nr,h as Cr,i as Sr,k as Q,C as X,m as kr,H as Tr,n as $r,o as Rr,p as Er,q as Pr,s as Or,t as Ar,O as Ir,u as Mr}from"./vendor-B_ra6ZK1.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const x of h)if(x.type==="childList")for(const p of x.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function w(h){const x={};return h.integrity&&(x.integrity=h.integrity),h.referrerPolicy&&(x.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?x.credentials="include":h.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(h){if(h.ep)return;h.ep=!0;const x=w(h);fetch(h.href,x)}})();const z=({Videostream:u,Audiostream:m,muted:w,className:o="",islocal:h,stream:x})=>{const p=n.useRef(null);function c(I,N){const b=new MediaStream;return I&&I.getVideoTracks().forEach(g=>b.addTrack(g)),N&&N.getAudioTracks().forEach(g=>b.addTrack(g)),b}return n.useEffect(()=>(p.current&&u&&(p.current.srcObject=c(u,m)),h&&(p.current.srcObject=x),()=>{p.current&&(p.current.srcObject=null)}),[x,u,m]),e.jsx("video",{ref:p,autoPlay:!0,playsInline:!0,muted:w,className:o,onLoadedMetadata:()=>p.current.play()})},zr=({isMuted:u,videoUrl:m,isVideoOff:w,isScreenSharing:o,onToggleAudio:h,onToggleVideo:x,onToggleScreenShare:p,onLeaveRoom:c,onToggleChat:I,chatOpen:N,someoneshare:b,setVideoUrl:g,peerId:V,onToggleparticipants:$,showparticipants:Z,onTogglehandraise:q,handraiseoption:J})=>e.jsxs("div",{className:"p-3 relative",children:[m&&e.jsx("div",{className:"absolute left-2 bottom-2 p-2 group bg-gray-100 backdrop-blur-md rounded-full  cursor-pointer overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-blue-300/30 border border-gray-300",children:e.jsxs("a",{href:m,download:"page-recording.webm",className:"flex items-center ",onClick:()=>{g(null)},children:[e.jsx(xr,{className:"size-6 text-blue-500"}),e.jsx("button",{className:"w-0 opacity-0 group-hover:w-auto group-hover:opacity-100 group-hover:px-2 transition-all duration-300 ease-in-out text-blue-500 font-semibold text-sm",children:"Download"})]})}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:h,className:`p-3 rounded-full transition-all ${u?"bg-red-400 text-white shadow-lg shadow-red-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:u?"Unmute":"Mute",children:u?e.jsx(gr,{className:"h-5 w-5"}):e.jsx(hr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:x,className:`p-3 rounded-full transition-all ${w?"bg-red-400 text-white shadow-lg shadow-red-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:w?"Turn on camera":"Turn off camera",children:w?e.jsx(fr,{className:"h-5 w-5"}):e.jsx(pr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:p,disabled:b&&V!==(b==null?void 0:b.id),className:`${b&&V!==(b==null?void 0:b.id)?"opacity-50 cursor-not-allowed":""} p-3 rounded-full transition-all ${o?"bg-green-400 text-white shadow-lg shadow-green-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:o?"Stop sharing":"Share screen",children:e.jsx(br,{className:"h-5 w-5"})}),e.jsx("button",{onClick:q,className:`p-3 rounded-full transition-all ${J?"bg-yellow-500 text-white shadow-lg shadow-yellow-500/30":"bg-gray-200 text-gray-700 hover:bg-yellow-200 hover:text-gray-900"}`,title:"hand raise",children:e.jsx(Ue,{className:"h-5 w-5"})}),e.jsx("button",{onClick:$,className:`p-3 rounded-full transition-all ${Z?"bg-purple-500 text-white shadow-lg shadow-purple-500/30":"bg-gray-200 text-gray-700 hover:bg-purple-200 hover:text-gray-900"}`,title:Z?"Hide chat":"Show chat",children:e.jsx(jr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:I,className:`p-3 rounded-full transition-all ${N?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:N?"Hide Participants":"Show Participants",children:e.jsx(vr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:c,className:"p-3 rounded-full bg-red-400 text-white shadow-lg shadow-red-400/30 hover:bg-red-500 transition-all",title:"Leave room",children:e.jsx(yr,{className:"h-5 w-5"})})]})]}),Vr=({stream:u})=>{const m=Le.useRef(null);return Le.useEffect(()=>(m.current&&(m.current.srcObject=u),()=>{m.current&&(m.current.srcObject=null)}),[u]),e.jsx("audio",{ref:m,autoPlay:!0,playsInline:!0,className:" hidden",onLoadedMetadata:()=>m.current.play()})},Dr=({roomId:u,name:m,isCreating:w})=>{var Ee,Pe,Oe,Ae,Ie,Me,ze,Ve,De;const[o,h]=n.useState(null),[x,p]=n.useState(null),[c,I]=n.useState(null),[N,b]=n.useState(null),[g,V]=n.useState(null),[$,Z]=n.useState(null),[q,J]=n.useState([]),[H,de]=n.useState([]),[U,ee]=n.useState({}),[re,pe]=n.useState(!1),[se,Fe]=n.useState(!1),[j,M]=n.useState({audio:!0,video:!0,screen:!1}),[Be,D]=n.useState(!0),[be,S]=n.useState(null),[k,je]=n.useState(null),[T,A]=n.useState([]),[te,ve]=n.useState([]),[L,qe]=n.useState(w),[ue,me]=n.useState(w),[xe,Je]=n.useState([]),[ae,ye]=n.useState(""),[Ur,He]=n.useState(null),[we,v]=n.useState("initializing"),[Y,oe]=n.useState(!0),[E,Ye]=n.useState(1),G=n.useRef(),ne=n.useRef(),[Ge,Ne]=n.useState(!1),[le,Ce]=n.useState(!1),ie=n.useRef(null),[We,W]=n.useState(0),[Se,ce]=n.useState(!1),[Ke,ke]=n.useState(null),P=n.useRef(null),ge=n.useRef([]),_e=s=>{const r=Math.floor(s/3600).toString().padStart(2,"0"),t=Math.floor(s%3600/60).toString().padStart(2,"0"),a=(s%60).toString().padStart(2,"0");return`${r} : ${t} : ${a}`},Qe=()=>{W(0),ie.current=setInterval(()=>{W(s=>s+1)},1e3)},Xe=()=>{ie.current&&(clearInterval(ie.current),ie.current=null)},Ze=async()=>{var s;try{const r=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"tab"},audio:!0,preferCurrentTab:!0});(s=P.current)!=null&&s.stream&&P.current.stream.getTracks().forEach(t=>t.stop()),P.current=new MediaRecorder(r,{mimeType:"video/webm"}),r.getVideoTracks()[0].onended=()=>{var t;((t=P.current)==null?void 0:t.state)!=="inactive"&&P.current.stop(),W(0),ce(!1)},P.current.ondataavailable=t=>{t.data.size>0&&ge.current.push(t.data)},P.current.onstop=()=>{const t=new Blob(ge.current,{type:"video/webm"}),a=URL.createObjectURL(t);ke(a),Xe(),ge.current=[],r.getTracks().forEach(l=>l.stop()),W(0),ce(!1)},P.current.start(),Qe(),ce(!0)}catch(r){console.error("Error starting recording:",r),ce(!1),W(0)}},er=()=>{P.current&&P.current.stop()},rr=()=>{navigator.clipboard.writeText(u),Ne(!0),setTimeout(()=>Ne(!1),2e3)};n.useEffect(()=>{v("connecting-socket");const s=wr("https://t9p4vxq4-3001.inc1.devtunnels.ms/",{reconnectionAttempts:5,reconnectionDelay:1e3,autoConnect:!0,transports:["websocket"]});return s.on("connect",()=>{je(s.id),h(s),S(null),v("socket-connected"),i.success("Connected to server"),console.log("Socket connected, peerId:",s.id)}),s.on("disconnect",r=>{v("socket-disconnected"),S("Connection lost. Trying to reconnect..."),i.error("Disconnected from server"),console.log("Socket disconnected:",r)}),s.on("connect_error",r=>{v("socket-connection-error"),S(`Connection error: ${r.message}`),i.error(`Connection error: ${r.message}`),console.log("Socket connect error:",r.message)}),h(s),()=>{s.disconnect()}},[]),n.useEffect(()=>o?(v("initializing-device-and-media"),(async()=>{try{D(!0),w?o.emit("createRoom",{roomId:u,name:m},r=>{r.success?(A(r.users||[]),qe(!0),me(!0),D(!1),v("created-room"),i.success("Room created successfully")):(S(r.error),D(!1),i.error(r.error))}):o.emit("joinRoom",{roomId:u,name:m},r=>{r.success?(A(r.users||[]),je(o.id),me(!0),D(!1),v("joined-room"),i.success("Joined room successfully")):(S(r.error),D(!1),i.error(r.error))}),o.on("routerCapabilities",async r=>{try{v("loading-device");const t=new Ar.Device;await t.load({routerRtpCapabilities:r}),p(t),v("device-loaded"),console.log("Device loaded with capabilities:",r);const a=await sr();console.log("Local stream obtained:",a),I(a),v("media-obtained"),oe(!1)}catch(t){v("device-or-media-error"),S(`Initialization error: ${t.message}`),oe(!1),i.error(`Initialization error: ${t.message}`),console.log("Device or media error:",t.message)}}),o.on("admitted",()=>{me(!0),D(!1),v("admitted"),i.success("You have been admitted to the room"),console.log("Participant admitted to room:",u),o.emit("getRouterRtpCapabilities",r=>{r.error&&(S(r.error),oe(!1),i.error(r.error),console.log("Get router capabilities error after admission:",r.error))})}),o.on("join-request",({peerId:r,name:t})=>{L&&(ve(a=>[...a,{peerId:r,name:t}]),i(`Join request from ${t}`,{icon:"ðŸ””"}),console.log("Join request received from:",t,"peerId:",r))}),o.on("peerJoined",({peerId:r,peerDetails:t,users:a})=>{A(a),i(`${t.name} joined the room`,{icon:"ðŸ‘¤"}),console.log("Peer joined, updated participants:",a)}),o.on("peerClosed",({peerId:r,peerName:t})=>{A(a=>a.filter(l=>l.id!==r)),J(a=>a.filter(l=>l.peerId!==r)),de(a=>(a.filter(d=>d.peerId===r).forEach(d=>{d.consumer.close(),d.stream.getTracks().forEach(C=>C.stop())}),a.filter(d=>d.peerId!==r))),i(`${t} left the room`,{icon:"ðŸšª"}),console.log("Peer closed, peerId:",t)}),o.on("producerList",r=>{J(r),console.log("Received producer list:",r)}),o.on("newProducer",r=>{J(t=>t.some(a=>a.producerId===r.producerId)?t:[...t,r]),console.log("New producer added:",r)}),o.on("peer-media-toggle",({peerId:r,type:t,enabled:a,peerName:l})=>{A(d=>d.map(C=>C.id===r?{...C,[`is${t.charAt(0).toUpperCase()+t.slice(1)}On`]:a}:C)),r!=o.id&&i(`${l} ${a?"enabled":"disabled"} ${t}`,{icon:a?"âœ…":"âŒ"}),console.log(`Peer ${r} toggled ${t} to ${a}`)}),o.on("screenshare-toggle",({peerId:r,enabled:t,peerName:a})=>{A(l=>l.map(d=>d.id===r?{...d,sharingScreen:t}:d)),r!=o.id&&a&&i(`${a} ${t?"started":"stopped"} screen sharing`,{icon:t?"ðŸ–¥ï¸":"ðŸ›‘"}),console.log(`Peer ${r} toggled screen sharing to ${t}`)}),o.on("handraise-toggle",({peerId:r,enabled:t,peerName:a})=>{A(l=>l.map(d=>d.id===r?{...d,handRaise:t}:d)),r!=o.id&&a&&t&&i(`${a} was hand raised `,{icon:"âœ‹"})}),o.on("new-message",r=>{Je(t=>[...t,r]),r.senderId!==o.id&&i(`${r.senderName}: ${r.message}`,{icon:"ðŸ’¬"}),console.log("New message received:",r)}),o.on("participants-updated",({users:r,joiningPeer:t})=>{console.log("Participants updated:",r),A(r),t&&t.peerId!==o.id&&i.success(`${t.name} joined the room`,{icon:"ðŸ‘¤"})}),o.on("peerPropertiesUpdated",({peerId:r,property:t,value:a})=>{A(l=>l.map(d=>d.id===r?{...d,[t]:a}:d)),console.log(`Peer ${r} updated property ${t} to ${a}`)}),o.on("consumerClosed",({consumerId:r})=>{de(t=>{const a=t.find(l=>l.consumer.id===r);return a?(a.consumer.close(),a.stream.getTracks().forEach(l=>l.stop()),t.filter(l=>l.consumer.id!==r)):t}),console.log("Consumer closed, consumerId:",r)})}catch(r){v("initialization-error"),S(`Initialization error: ${r.message}`),D(!1),i.error(`Initialization error: ${r.message}`),console.log("Initialization error:",r.message)}})(),()=>{o.off("routerCapabilities"),o.off("admitted"),o.off("join-request"),o.off("peerJoined"),o.off("peerClosed"),o.off("producerList"),o.off("newProducer"),o.off("peer-media-toggle"),o.off("screenshare-toggle"),o.off("new-message"),o.off("participants-updated"),o.off("peerPropertiesUpdated"),o.off("consumerClosed")}):void 0,[o,u,m,w,L]);const sr=n.useCallback(async()=>{try{return await navigator.mediaDevices.getUserMedia({audio:!0,video:{width:{ideal:1920,min:1280},height:{ideal:1080,min:720},aspectRatio:1.7777777777777777,frameRate:{ideal:60,min:30},facingMode:"user",advanced:[{zoom:1,brightness:100,sharpness:100,contrast:100,saturation:100,focusMode:"continuous"}]}})}catch(s){let r="Failed to access media devices";throw s.name==="NotAllowedError"?r="Please allow camera and microphone access":s.name==="NotFoundError"?r="No media devices found":s.name==="OverconstrainedError"&&(r="Cannot satisfy requested media constraints"),S(r),oe(!1),i.error(r),console.log("Get media error:",r),s}},[]);n.useEffect(()=>!x||!o||!c||!ue?void 0:((async()=>{try{v("creating-transports");const r=await Te("send");V(r),v("send-transport-created");const t=await Te("recv");Z(t),v("recv-transport-created"),v("initialization-complete"),console.log("Transports created successfully")}catch(r){v("transport-creation-error"),S(`Error creating transports: ${r.message}`),i.error(`Error creating transports: ${r.message}`),console.log("Transport creation error:",r.message)}})(),()=>{g&&g.close(),$&&$.close()}),[x,o,c,ue]);const Te=n.useCallback(async s=>new Promise((r,t)=>{o.emit("createWebRtcTransport",{direction:s},a=>{if(a.error){t(new Error(a.error)),i.error(`Error creating ${s} transport: ${a.error}`),console.log(`Create ${s} transport error:`,a.error);return}const l=s==="send"?x.createSendTransport(a.params):x.createRecvTransport(a.params);l.on("connect",({dtlsParameters:d},C,fe)=>{o.emit("connectTransport",{transportId:l.id,dtlsParameters:d},B=>{B.error?(fe(new Error(B.error)),i.error(`Error connecting ${s} transport: ${B.error}`),console.log(`Connect ${s} transport error:`,B.error)):C()})}),s==="send"&&l.on("produce",({kind:d,rtpParameters:C,appData:fe},B,mr)=>{o.emit("produce",{transportId:l.id,kind:d,rtpParameters:C,appData:fe},_=>{_.error?(mr(new Error(_.error)),i.error(`Error producing: ${_.error}`),console.log("Produce error:",_.error)):B({id:_.producerId})})}),l.on("connectionstatechange",d=>{(d==="failed"||d==="disconnected")&&(S(`Transport ${s} connection failed`),i.error(`Transport ${s} connection failed`),console.log(`Transport ${s} connection state changed to:`,d))}),r(l)})}),[x,o]);n.useEffect(()=>{if(!g||!c)return;(async()=>{try{const r=c.getAudioTracks()[0];if(r){const a=await g.produce({track:r,codecOptions:{opusStereo:!0,opusDtx:!0},appData:{mediaType:"audio"}});ee(l=>({...l,[a.id]:a})),console.log("Audio producer created:",a.id)}const t=c.getVideoTracks()[0];if(t){const a=await g.produce({track:t,encodings:[{maxBitrate:1e5,scaleResolutionDownBy:4},{maxBitrate:3e5,scaleResolutionDownBy:2},{maxBitrate:9e5}],codecOptions:{videoGoogleStartBitrate:1e3},appData:{mediaType:"video"}});ee(l=>({...l,[a.id]:a})),console.log("Video producer created:",a.id)}}catch(r){S(`Error producing media: ${r.message}`),i.error(`Error producing media: ${r.message}`),console.log("Produce media error:",r.message)}})()},[g,c]),n.useEffect(()=>{if(!$||!x||!o||q.length===0||!k)return;(async()=>{const r=q.filter(t=>t.peerId!==k&&!H.some(a=>a.producerId===t.producerId));if(r.length!==0)try{const a=(await Promise.all(r.map(tr))).filter(Boolean);a.length>0&&(de(l=>[...l,...a]),console.log("New consumers added:",a))}catch(t){S(`Error consuming media: ${t.message}`),i.error(`Error consuming media: ${t.message}`),console.log("Consume producers error:",t.message)}})()},[q,$,x,o,H,k]);const tr=n.useCallback(async s=>{try{const{params:r}=await new Promise((l,d)=>{o.emit("consume",{transportId:$.id,producerId:s.producerId,rtpCapabilities:x.rtpCapabilities},C=>{C.error?(d(new Error(C.error)),console.log("Consume error:",C.error)):l(C)})}),t=await $.consume({id:r.id,producerId:r.producerId,kind:r.kind,rtpParameters:r.rtpParameters,appData:s.appData||{mediaType:r.kind}}),a=new MediaStream;return a.addTrack(t.track),await new Promise(l=>{o.emit("resumeConsumer",{consumerId:t.id},()=>{l()})}),{consumer:t,stream:a,peerId:s.peerId,peerName:s.peerName,producerId:s.producerId,kind:r.kind,mediaType:t.appData.mediaType||r.kind}}catch(r){return i.error(`Error consuming producer: ${r.message}`),console.log("Create consumer error:",r.message),null}},[$,x,o]);n.useEffect(()=>{if(g)return G.current=setInterval(async()=>{try{const s=await g;He(s||{})}catch(s){i.error("Error getting connection stats"),console.log("Get stats error:",s.message)}},5e3),()=>{G.current&&clearInterval(G.current)}},[g]);const ar=n.useCallback(()=>{if(c){const s=!j.audio;c.getAudioTracks().forEach(r=>r.enabled=s),M(r=>({...r,audio:s})),o.emit("toggle-media",{roomId:u,type:"audio",enabled:s,name:m},r=>{r.success?i.success(s?"Microphone enabled":"Microphone muted"):(i.error(r.error),console.log("Toggle audio error:",r.error))}),Object.values(U).forEach(r=>{r.appData.mediaType==="audio"&&(s?r.resume():r.pause())})}},[c,j.audio,o,u,U]),or=n.useCallback(()=>{if(c){const s=!j.video;c.getVideoTracks().forEach(r=>r.enabled=s),M(r=>({...r,video:s})),o.emit("toggle-media",{roomId:u,type:"video",enabled:s,name:m},r=>{r.success?i.success(s?"Camera enabled":"Camera disabled"):(i.error(r.error),console.log("Toggle video error:",r.error))}),Object.values(U).forEach(r=>{r.appData.mediaType==="video"&&(s?r.resume():r.pause())})}},[c,j.video,o,u,U]),nr=n.useCallback(async()=>{try{if(j.screen){const a=N;b(null),M(l=>({...l,screen:!1})),o.emit("toggle-screenshare",{roomId:u,enabled:!1,name:m},l=>{l.success?(a&&a.getTracks().forEach(d=>d.stop()),i.success("Stopped screen sharing")):(b(a),M(d=>({...d,screen:!0})),i.error(l.error),console.log("Toggle screen share (stop) error:",l.error))});return}const s=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0});b(s),M(a=>({...a,screen:!0}));const r=s.getVideoTracks()[0],t=await g.produce({track:r,encodings:[{maxBitrate:15e5}],codecOptions:{videoGoogleStartBitrate:1e3},appData:{mediaType:"screen"}});ee(a=>({...a,[t.id]:t})),o.emit("toggle-screenshare",{roomId:u,enabled:!0},a=>{a.success?i.success("Started screen sharing"):(t.close(),s.getTracks().forEach(l=>l.stop()),b(null),M(l=>({...l,screen:!1})),ee(l=>{const d={...l};return delete d[t.id],d}),i.error(a.error),console.log("Toggle screen share (start) error:",a.error))}),r.onended=()=>{t.close(),M(a=>({...a,screen:!1})),b(null),o.emit("toggle-screenshare",{roomId:u,enabled:!1},a=>{a.success?i.success("Screen sharing stopped"):(i.error(a.error),console.log("Toggle screen share (onended) error:",a.error))})}}catch(s){s.name!=="NotAllowedError"&&(i.error(`Error toggling screen share: ${s.message}`),M(r=>({...r,screen:!1})),b(null),console.log("Toggle screen share error:",s.message))}},[j.screen,N,g,o,u]),lr=s=>{o.emit("admit-participant",{roomId:u,peerId:s},r=>{r.success?(ve(t=>t.filter(a=>a.peerId!==s)),i.success("Participant admitted"),console.log("Participant admitted:",s)):(i.error(r.error),console.log("Admit participant error:",r.error))})},ir=async()=>{try{o.emit("toggle-handraise",{roomId:u,enabled:!se,name:m},s=>{s.success?i.success(se?"Hand Downed":"Hand Raised"):(i.error(s.error),console.log("Handle raise error:",s.error))}),Fe(!se)}catch(s){i.error(`Error handleraise: ${s.message}`)}},cr=s=>{s.preventDefault(),ae.trim()&&o.emit("send-message",{roomId:u,message:ae},r=>{r.success?(ye(""),console.log("Message sent:",ae)):(i.error(r.error),console.log("Send message error:",r.error))})},dr=n.useCallback(()=>{c&&c.getTracks().forEach(s=>s.stop()),N&&N.getTracks().forEach(s=>s.stop()),Object.values(U).forEach(s=>s.close()),H.forEach(s=>{s.consumer.close(),s.stream.getTracks().forEach(r=>r.stop())}),g&&g.close(),$&&$.close(),o&&o.disconnect(),G.current&&clearInterval(G.current),window.location.reload()},[c,N,U,H,g,$,o]);n.useEffect(()=>{ne.current&&(ne.current.scrollTop=ne.current.scrollHeight)},[xe]);const y={};H.forEach(s=>{y[s.peerId]||(y[s.peerId]={name:s.peerName,media:{}}),y[s.peerId].media[s.mediaType]=s});const f=T.find(s=>s.isAdmin),K=T.filter(s=>!s.isAdmin&&s.id!==k),O=T.find(s=>s.id===k),he=L?2:1,R=T.find(s=>s.sharingScreen),ur=K.filter(s=>!s.isAdmin).length,F=Math.ceil(ur/he),$e=K.slice((E-1)*he,E*he),Re=s=>{Ye(s)};return ue?be?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-red-600 px-4 py-3",children:e.jsx("h2",{className:"text-lg font-bold text-white",children:"Connection Error"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Something went wrong"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-300",children:[e.jsx("p",{children:be}),e.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:["Debug state: ",we]})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"Refresh Page"})})]})]})}):Be?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsxs("p",{className:"mt-4 text-lg text-white font-medium",children:["Initializing room... (",we,")"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"This may take a few moments..."})]})}):e.jsxs("div",{className:"relative h-screen w-full bg-gradient-to-br from-white via-gray-300 to-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-gray-100/50 to-white/30 opacity-80"}),e.jsxs("div",{className:"relative h-full w-full flex flex-col font-sans",children:[e.jsx("header",{className:"px-6 py-4 z-10 bg-white/50 backdrop-blur-md border-b border-gray-200/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("h1",{className:"text-2xl font-extrabold text-gray-900 tracking-tight flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-800",children:u}),e.jsx("button",{onClick:rr,title:"Copy Room ID",className:"text-blue-500 hover:text-teal-500 transition cursor-pointer",children:e.jsx(Nr,{size:18})}),Ge&&e.jsx("span",{className:"text-xs text-green-500",children:"Copied!"})]}),L&&e.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-teal-500 text-xs text-white px-3 py-1 rounded-full shadow-md",children:"ADMIN"})]}),e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:" flex items-center space-x-2",children:[e.jsxs("div",{className:"flex relative items-center cursor-pointer space-x-2 bg-gray-200 text-gray-800 font-medium backdrop-blur-md rounded-full px-4 py-2 shadow-md",children:[Se&&e.jsx("span",{className:" bg-red-500 left-3.5 absolute animate-ping size-3 rounded-full me-2"}),e.jsx("span",{className:" bg-red-500  size-2 rounded-full me-3"}),_e(We)]}),e.jsx("div",{children:Se?e.jsx("div",{onClick:er,children:e.jsx(Cr,{className:" size-9 text-red-500 cursor-pointer backdrop-blur-md rounded-full shadow-md",title:"stop record"})}):e.jsx("div",{onClick:Ze,children:e.jsx(Sr,{className:" size-9 text-blue-500 cursor-pointer backdrop-blur-md rounded-full shadow-md",title:"start record"})})})]})})]})}),e.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:T.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),e.jsx("p",{className:"text-gray-900 text-xl font-semibold",children:"Awaiting participants..."}),e.jsx("p",{className:"text-gray-500 mt-3 text-sm",children:"Share this room ID to invite others"})]})}):T.length===1?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"relative w-3/4 h-full max-h-[80vh] aspect-video bg-white/50 rounded-2xl overflow-hidden shadow-md backdrop-blur-sm border border-gray-200/50",children:[O?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):c&&j.video&&c?e.jsx(z,{Videostream:null,Audiostream:null,islocal:!0,stream:c,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Ee=O.name)==null?void 0:Ee.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:O.name})]})}):null,e.jsxs("div",{className:`absolute bottom-4 left-4 bg-gray-100/70  ${!j.video&&c||!j.audio&&c?"pe-2 ":" pe-4"} ps-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2`,children:[e.jsxs("span",{children:[O==null?void 0:O.name," (You)"]}),!j.video&&c&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full ",children:e.jsx(Q,{})}),!j.audio&&c&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full ",children:e.jsx(X,{})})]})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-full",children:[e.jsx("div",{className:"lg:col-span-3 bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-md",children:e.jsx("div",{className:"relative w-full h-full max-h-[80vh] aspect-video",children:R?e.jsxs(e.Fragment,{children:[R.id===k?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):N?e.jsx(z,{islocal:!0,Videostream:null,Audiostream:null,stream:N,muted:!0,className:"w-full h-full object-contain rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Pe=R.name)==null?void 0:Pe.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:R.name})]})}):(Oe=y[R.id])!=null&&Oe.media.screen?e.jsx(z,{Videostream:y[R.id].media.screen.stream,Audiostream:y[R.id].media.audio.stream,islocal:!1,stream:null,muted:!1,className:"w-full h-full object-contain rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Ae=R.name)==null?void 0:Ae.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:R.name})]})}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-100/70 px-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2",children:[e.jsxs("span",{className:"truncate max-w-xs",children:[R.name," ",R.id===k?"(You)":""]}),e.jsx("span",{className:"px-2 py-1 bg-green-400/80 rounded-full text-xs",children:"Screen Sharing"})]})]}):f?e.jsxs(e.Fragment,{children:[(Ie=y[f.id])!=null&&Ie.media.video&&f.isVideoOn?e.jsx(z,{Videostream:y[f.id].media.video.stream,Audiostream:y[f.id].media.audio.stream,islocal:!1,stream:null,muted:!1,className:"w-full h-full object-cover rounded-2xl"}):f.id===k?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):c&&f.isVideoOn?e.jsx(z,{Videostream:null,Audiostream:null,islocal:!0,stream:c,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Me=f.name)==null?void 0:Me.charAt(0).toUpperCase())||"A"})})})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((ze=f.name)==null?void 0:ze.charAt(0).toUpperCase())||"A"})})})}),e.jsxs("div",{className:`absolute bottom-4 left-4 ${f.isVideoOn?"bg-gray-100/70":" bg-gray-200"}  ${!f.isVideoOn||!f.isAudioOn?"pe-2 ":" pe-4"} ps-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2`,children:[e.jsxs("span",{children:[f.name," ",f.id===k?"(You)":"(Admin)"]}),!f.isVideoOn&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full",children:e.jsx(Q,{})}),!f.isAudioOn&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full",children:e.jsx(X,{})})]})]}):null})}),e.jsxs("div",{className:`lg:col-span-1 flex flex-col ${L?"space-y-6":"space-y-3"}`,children:[O&&!O.isAdmin&&!O.sharingScreen&&e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):c&&j.video&&c?e.jsx(z,{Videostream:null,Audiostream:null,islocal:!0,stream:c,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:(m==null?void 0:m.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:m})]})}),e.jsxs("div",{className:`absolute bottom-3 left-3 ${j.video&&c?"bg-gray-100/70":" bg-gray-200"} ${!j.video&&c&&!j.audio&&c?" pe-1":" pe-2"} ps-2 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2`,children:[e.jsx("span",{children:"You"}),!j.video&&c&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(Q,{})}),!j.audio&&c&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(X,{})})]})]})}),O.sharingScreen&&((Ve=y[f.id])==null?void 0:Ve.media.video)&&e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):y[f.id].media.video&&f.isVideoOn?e.jsx(z,{Videostream:y[f.id].media.video.stream,Audiostream:y[f.id].media.audio.stream,islocal:!1,stream:null,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:((De=f.name)==null?void 0:De.charAt(0).toUpperCase())||"A"})}),e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:f.name})]})}),e.jsxs("div",{className:"absolute bottom-3 left-3 bg-gray-100/70 px-3 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2",children:[e.jsx("span",{children:"Admin"}),!f.isVideoOn&&e.jsx("span",{className:"px-2 py-1 bg-red-400/80 rounded-full text-white text-xxs",children:e.jsx(Q,{})}),!f.isAudioOn&&e.jsx("span",{className:"px-2 py-1 bg-red-400/80 rounded-full text-white text-xxs",children:e.jsx(X,{})})]})]})}),e.jsx("div",{className:"flex-1 flex flex-col space-y-6",children:e.jsxs("div",{className:"bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-xl p-4",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold mb-4",children:["Participants (",K==null?void 0:K.length,")"]}),e.jsxs("div",{className:"space-y-4",children:[$e.map(s=>{var r,t,a;return e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[s.sharingScreen?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-blue-100 to-teal-100 text-gray-900 text-center",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:s.name}),e.jsx("p",{className:"text-sm mt-1",children:"is sharing their screen"})]})}):(r=y[s.id])!=null&&r.media.video&&s.isVideoOn?e.jsx(z,{Videostream:y[s.id].media.video.stream,Audiostream:y[s.id].media.audio.stream,islocal:!1,stream:null,muted:!1,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:((t=s.name)==null?void 0:t.charAt(0).toUpperCase())||"U"})}),((a=y[s.id])==null?void 0:a.media.adio)&&s.isAudioOn&&e.jsx(Vr,{stream:y[s.id].media.audio.stream})]})}),e.jsxs("div",{className:`absolute bottom-3 left-3 ${s.isVideoOn?"bg-gray-100/70":"bg-gray-200"} ${s.isVideoOn&&s.isAudioOn?" pe-2":" pe-1"} ps-2 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2`,children:[e.jsx("span",{children:s.name}),!s.isVideoOn&&!s.shareScreen&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(Q,{})}),!s.isAudioOn&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(X,{})})]})]})},s.id)}),$e.length===0&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"No participants on this page"})})]}),F>1&&e.jsxs("div",{className:"flex justify-between items-center space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>Re(E>1?E-1:F),className:`p-3 rounded-full bg-gray-200/50 text-gray-700 hover:bg-blue-300/50 transition-all duration-200 shadow-md ${E===1?"opacity-50 cursor-not-allowed":""}`,disabled:E===1,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("span",{className:"text-gray-700 text-sm font-medium",children:[E," / ",F]}),e.jsx("button",{onClick:()=>Re(E<F?E+1:1),className:`p-3 rounded-full bg-gray-200/50 text-gray-700 hover:bg-blue-300/50 transition-all duration-200 shadow-md ${E===F?"opacity-50 cursor-not-allowed":""}`,disabled:E===F,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]})})]})]})}),e.jsxs("div",{className:`absolute z-10 right-6 ${re?"bottom-6":"-bottom-4"} w-96 bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl transition-all duration-500 ease-in-out ${re?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200/50 bg-gray-100/50 rounded-t-2xl backdrop-blur-2xl flex justify-between items-center",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold flex items-center gap-x-2",children:[" ",e.jsx(kr,{className:" size-5"}),e.jsx("span",{className:"mb-1",children:"Chat"})]}),e.jsx("button",{onClick:()=>pe(!1),className:"text-gray-500 hover:text-gray-900 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{ref:ne,className:"h-80 p-4 overflow-y-auto",children:xe.length===0?e.jsx("p",{className:"text-gray-500 text-center py-10",children:"No messages yet"}):xe.map((s,r)=>e.jsx("div",{className:`mb-4 ${s.senderId===k?"text-right":"text-left"}`,children:e.jsxs("div",{className:`inline-block max-w-xs px-4 py-2 rounded-xl shadow-md ${s.senderId===k?"bg-gradient-to-r from-blue-500 to-teal-500 text-white":"bg-gray-200/50 text-gray-900"}`,children:[e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[s.senderName," ",s.senderId===k&&"(You)"]}),e.jsx("p",{className:"text-sm",children:s.message})]})},r))}),e.jsx("div",{className:"p-4 border-t border-gray-200/50",children:e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:ae,onChange:s=>ye(s.target.value),className:"flex-1 bg-gray-200/50 text-gray-900 px-4 py-2 rounded-l-xl focus:outline-none focus:ring-2 focus:ring-blue-400/50 border border-gray-200/50",placeholder:"Type a message..."}),e.jsx("button",{type:"submit",onClick:cr,className:"bg-gradient-to-r from-blue-500 to-teal-500 text-white px-6 py-2 rounded-r-xl hover:from-blue-600 hover:to-teal-600 transition-all",children:"Send"})]})})]}),e.jsxs("div",{className:`absolute z-10 left-6 ${le?"bottom-6":"-bottom-4"} w-96 bg-gray-200 rounded-2xl border border-gray-200/50 shadow-2xl transition-all duration-500 ease-in-out ${le?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200/50 bg-gray-100/50 rounded-t-2xl backdrop-blur-2xl flex justify-between items-center",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold flex items-center gap-x-2",children:[" ",e.jsx(Tr,{className:" size-5"}),e.jsxs("span",{className:"",children:["Participiants ",`(${T==null?void 0:T.length})`]})]}),e.jsx("button",{onClick:()=>Ce(!1),className:"text-gray-500 hover:text-gray-900 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:T==null?void 0:T.map((s,r)=>e.jsxs("div",{className:` flex item-center justify-between p-3 ${T.length-1===r?"border-b-0":"border-b"} border-b-gray-400`,children:[e.jsxs("div",{className:" flex items-center justify-center gap-x-1",children:[e.jsx("span",{className:" text-gray-800 font-semibold",children:s.name}),s.isAdmin&&e.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-teal-500 text-xs text-white px-3 py-1 rounded-full shadow-md",children:"Admin"}),e.jsx("span",{children:s.id===o.id&&"(You)"})]}),e.jsxs("div",{className:" flex item-center justify-center gap-x-2",children:[s.sharingScreen&&e.jsx($r,{className:" size-5.5 text-blue-600"}),s.isVideoOn?e.jsx(Rr,{className:" size-5 text-green-600"}):e.jsx(Er,{className:" size-5 text-red-500"}),s.isAudioOn?e.jsx(Pr,{className:" size-5 text-green-600"}):e.jsx(Or,{className:" size-5 text-red-500"}),s.handRaise&&e.jsx(Ue,{className:" size-5 text-yellow-500"})]})]},r))})]})]}),e.jsx(zr,{peerId:k,videoUrl:Ke,isMuted:!j.audio,isVideoOff:!j.video,isScreenSharing:j.screen,onToggleAudio:ar,onToggleVideo:or,onToggleScreenShare:nr,onLeaveRoom:dr,onToggleChat:()=>pe(!re),showparticipants:le,onToggleparticipants:()=>Ce(!le),someoneshare:R,chatOpen:re,setVideoUrl:ke,handraiseoption:se,onTogglehandraise:ir,className:"bg-white/50 backdrop-blur-md border-t border-gray-200/50"}),te.length>0&&e.jsxs("div",{className:"absolute top-24 right-6 w-80 bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-200/50",children:e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold",children:["Pending Join Requests (",te.length,")"]})}),e.jsxs("div",{className:"max-h-72 overflow-y-auto",children:[te.map(s=>e.jsxs("div",{className:"p-4 border-b border-gray-200/50 last:border-b-0 flex justify-between items-center hover:bg-gray-100/30 transition-colors",children:[e.jsx("span",{className:"text-gray-900 text-sm font-medium",children:s.name}),L&&e.jsx("button",{onClick:()=>lr(s.peerId),className:"bg-gradient-to-r from-green-400 to-teal-400 text-white px-4 py-1.5 rounded-full text-sm hover:from-green-500 hover:to-teal-500 transition-all shadow-md",children:"Admit"})]},s.peerId)),!L&&te.length>0&&e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Waiting for admin to admit these participants."})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-lg font-medium",children:"Waiting for admin approval..."})]})})};function Lr(){const[u,m]=n.useState(!1),[w,o]=n.useState(""),[h,x]=n.useState(""),[p,c]=n.useState(!1),I=g=>{g.preventDefault(),w&&h&&m(!0)},N=g=>{if(g.preventDefault(),h){const V=Math.random().toString(36).substring(2,7);console.log(`Room created with ID: ${V}`),o(V),c(!0),m(!0)}},b=()=>{c(!p),o("")};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(Ir,{position:"top-right"}),u?e.jsx(Dr,{roomId:w,name:h,isCreating:p}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-indigo-600",children:p?"Create Video Conference":"Join Video Conference"}),e.jsxs("form",{onSubmit:p?N:I,children:[!p&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"roomId",className:"block text-gray-700 mb-2",children:"Room ID"}),e.jsx("input",{type:"text",id:"roomId",value:w,onChange:g=>o(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter room ID",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:"Your Name"}),e.jsx("input",{type:"text",id:"name",value:h,onChange:g=>x(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your name",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition duration-300 mb-4",children:p?"Create Room":"Join Room"}),e.jsx("button",{type:"button",onClick:b,className:"w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-300 transition duration-300",children:p?"Switch to Join Room":"Switch to Create Room"})]})]})})]})}Mr.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(Lr,{})}));
