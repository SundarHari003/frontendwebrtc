import{r as n,j as e,M as mr,F as xr,a as gr,b as hr,c as fr,d as pr,P as Ve,e as br,f as jr,g as vr,l as yr,V as i,I as wr,h as Nr,i as Cr,k as Q,C as X,m as Sr,H as kr,n as $r,o as Tr,p as Rr,q as Er,s as Ir,t as Pr,O as Or,u as Ar}from"./vendor-x6EQhDiv.js";(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))o(m);new MutationObserver(m=>{for(const x of m)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function v(m){const x={};return m.integrity&&(x.integrity=m.integrity),m.referrerPolicy&&(x.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?x.credentials="include":m.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(m){if(m.ep)return;m.ep=!0;const x=v(m);fetch(m.href,x)}})();const M=({stream:u,muted:h,className:v=""})=>{const o=n.useRef(null);return n.useEffect(()=>(o.current&&u&&(o.current.srcObject=u),()=>{o.current&&(o.current.srcObject=null)}),[u]),e.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:h,className:v,onLoadedMetadata:()=>o.current.play()})},Mr=({isMuted:u,videoUrl:h,isVideoOff:v,isScreenSharing:o,onToggleAudio:m,onToggleVideo:x,onToggleScreenShare:y,onLeaveRoom:d,onToggleChat:B,chatOpen:k,someoneshare:j,setVideoUrl:g,peerId:z,onToggleparticipants:$,showparticipants:Z,onTogglehandraise:J,handraiseoption:q})=>e.jsxs("div",{className:"p-3 relative",children:[h&&e.jsx("div",{className:"absolute left-2 bottom-2 p-2 group bg-gray-100 backdrop-blur-md rounded-full  cursor-pointer overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-blue-300/30 border border-gray-300",children:e.jsxs("a",{href:h,download:"page-recording.webm",className:"flex items-center ",onClick:()=>{g(null)},children:[e.jsx(mr,{className:"size-6 text-blue-500"}),e.jsx("button",{className:"w-0 opacity-0 group-hover:w-auto group-hover:opacity-100 group-hover:px-2 transition-all duration-300 ease-in-out text-blue-500 font-semibold text-sm",children:"Download"})]})}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:m,className:`p-3 rounded-full transition-all ${u?"bg-red-400 text-white shadow-lg shadow-red-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:u?"Unmute":"Mute",children:u?e.jsx(xr,{className:"h-5 w-5"}):e.jsx(gr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:x,className:`p-3 rounded-full transition-all ${v?"bg-red-400 text-white shadow-lg shadow-red-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:v?"Turn on camera":"Turn off camera",children:v?e.jsx(hr,{className:"h-5 w-5"}):e.jsx(fr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:y,disabled:j&&z!==(j==null?void 0:j.id),className:`${j&&z!==(j==null?void 0:j.id)?"opacity-50 cursor-not-allowed":""} p-3 rounded-full transition-all ${o?"bg-green-400 text-white shadow-lg shadow-green-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:o?"Stop sharing":"Share screen",children:e.jsx(pr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:J,className:`p-3 rounded-full transition-all ${q?"bg-yellow-500 text-white shadow-lg shadow-yellow-500/30":"bg-gray-200 text-gray-700 hover:bg-yellow-200 hover:text-gray-900"}`,title:"hand raise",children:e.jsx(Ve,{className:"h-5 w-5"})}),e.jsx("button",{onClick:$,className:`p-3 rounded-full transition-all ${Z?"bg-purple-500 text-white shadow-lg shadow-purple-500/30":"bg-gray-200 text-gray-700 hover:bg-purple-200 hover:text-gray-900"}`,title:Z?"Hide chat":"Show chat",children:e.jsx(br,{className:"h-5 w-5"})}),e.jsx("button",{onClick:B,className:`p-3 rounded-full transition-all ${k?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:k?"Hide Participants":"Show Participants",children:e.jsx(jr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:d,className:"p-3 rounded-full bg-red-400 text-white shadow-lg shadow-red-400/30 hover:bg-red-500 transition-all",title:"Leave room",children:e.jsx(vr,{className:"h-5 w-5"})})]})]}),zr=({roomId:u,name:h,isCreating:v})=>{var Ee,Ie,Pe,Oe,Ae,Me,ze,De,Le;const[o,m]=n.useState(null),[x,y]=n.useState(null),[d,B]=n.useState(null),[k,j]=n.useState(null),[g,z]=n.useState(null),[$,Z]=n.useState(null),[J,q]=n.useState([]),[H,de]=n.useState([]),[V,ee]=n.useState({}),[re,pe]=n.useState(!1),[te,Ue]=n.useState(!1),[p,A]=n.useState({audio:!0,video:!0,screen:!1}),[Fe,D]=n.useState(!0),[be,w]=n.useState(null),[C,je]=n.useState(null),[S,O]=n.useState([]),[se,ve]=n.useState([]),[L,Be]=n.useState(v),[ue,me]=n.useState(v),[xe,Je]=n.useState([]),[ae,ye]=n.useState(""),[Lr,qe]=n.useState(null),[we,b]=n.useState("initializing"),[Y,oe]=n.useState(!0),[R,He]=n.useState(1),G=n.useRef(),ne=n.useRef(),[Ye,Ne]=n.useState(!1),[le,Ce]=n.useState(!1),ie=n.useRef(null),[Ge,W]=n.useState(0),[Se,ce]=n.useState(!1),[We,ke]=n.useState(null),I=n.useRef(null),ge=n.useRef([]),Ke=t=>{const r=Math.floor(t/3600).toString().padStart(2,"0"),s=Math.floor(t%3600/60).toString().padStart(2,"0"),a=(t%60).toString().padStart(2,"0");return`${r} : ${s} : ${a}`},_e=()=>{W(0),ie.current=setInterval(()=>{W(t=>t+1)},1e3)},Qe=()=>{ie.current&&(clearInterval(ie.current),ie.current=null)},Xe=async()=>{var t;try{const r=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"tab"},audio:!0,preferCurrentTab:!0});(t=I.current)!=null&&t.stream&&I.current.stream.getTracks().forEach(s=>s.stop()),I.current=new MediaRecorder(r,{mimeType:"video/webm"}),r.getVideoTracks()[0].onended=()=>{var s;((s=I.current)==null?void 0:s.state)!=="inactive"&&I.current.stop(),W(0),ce(!1)},I.current.ondataavailable=s=>{s.data.size>0&&ge.current.push(s.data)},I.current.onstop=()=>{const s=new Blob(ge.current,{type:"video/webm"}),a=URL.createObjectURL(s);ke(a),Qe(),ge.current=[],r.getTracks().forEach(l=>l.stop()),W(0),ce(!1)},I.current.start(),_e(),ce(!0)}catch(r){console.error("Error starting recording:",r),ce(!1),W(0)}},Ze=()=>{I.current&&I.current.stop()},er=()=>{navigator.clipboard.writeText(u),Ne(!0),setTimeout(()=>Ne(!1),2e3)};n.useEffect(()=>{b("connecting-socket");const t=yr("https://backendwebrtc-x442.onrender.com",{reconnectionAttempts:5,reconnectionDelay:1e3,autoConnect:!0,transports:["websocket"]});return t.on("connect",()=>{je(t.id),m(t),w(null),b("socket-connected"),i.success("Connected to server"),console.log("Socket connected, peerId:",t.id)}),t.on("disconnect",r=>{b("socket-disconnected"),w("Connection lost. Trying to reconnect..."),i.error("Disconnected from server"),console.log("Socket disconnected:",r)}),t.on("connect_error",r=>{b("socket-connection-error"),w(`Connection error: ${r.message}`),i.error(`Connection error: ${r.message}`),console.log("Socket connect error:",r.message)}),m(t),()=>{t.disconnect()}},[]),n.useEffect(()=>o?(b("initializing-device-and-media"),(async()=>{try{D(!0),v?o.emit("createRoom",{roomId:u,name:h},r=>{r.success?(O(r.users||[]),Be(!0),me(!0),D(!1),b("created-room"),i.success("Room created successfully")):(w(r.error),D(!1),i.error(r.error))}):o.emit("joinRoom",{roomId:u,name:h},r=>{r.success?(O(r.users||[]),je(o.id),me(!0),D(!1),b("joined-room"),i.success("Joined room successfully")):(w(r.error),D(!1),i.error(r.error))}),o.on("routerCapabilities",async r=>{try{b("loading-device");const s=new Pr.Device;await s.load({routerRtpCapabilities:r}),y(s),b("device-loaded"),console.log("Device loaded with capabilities:",r);const a=await rr();console.log("Local stream obtained:",a),B(a),b("media-obtained"),oe(!1)}catch(s){b("device-or-media-error"),w(`Initialization error: ${s.message}`),oe(!1),i.error(`Initialization error: ${s.message}`),console.log("Device or media error:",s.message)}}),o.on("admitted",()=>{me(!0),D(!1),b("admitted"),i.success("You have been admitted to the room"),console.log("Participant admitted to room:",u),o.emit("getRouterRtpCapabilities",r=>{r.error&&(w(r.error),oe(!1),i.error(r.error),console.log("Get router capabilities error after admission:",r.error))})}),o.on("join-request",({peerId:r,name:s})=>{L&&(ve(a=>[...a,{peerId:r,name:s}]),i(`Join request from ${s}`,{icon:"🔔"}),console.log("Join request received from:",s,"peerId:",r))}),o.on("peerJoined",({peerId:r,peerDetails:s,users:a})=>{O(a),i(`${s.name} joined the room`,{icon:"👤"}),console.log("Peer joined, updated participants:",a)}),o.on("peerClosed",({peerId:r,peerName:s})=>{O(a=>a.filter(l=>l.id!==r)),q(a=>a.filter(l=>l.peerId!==r)),de(a=>(a.filter(c=>c.peerId===r).forEach(c=>{c.consumer.close(),c.stream.getTracks().forEach(N=>N.stop())}),a.filter(c=>c.peerId!==r))),i(`${s} left the room`,{icon:"🚪"}),console.log("Peer closed, peerId:",s)}),o.on("producerList",r=>{q(r),console.log("Received producer list:",r)}),o.on("newProducer",r=>{q(s=>s.some(a=>a.producerId===r.producerId)?s:[...s,r]),console.log("New producer added:",r)}),o.on("peer-media-toggle",({peerId:r,type:s,enabled:a,peerName:l})=>{O(c=>c.map(N=>N.id===r?{...N,[`is${s.charAt(0).toUpperCase()+s.slice(1)}On`]:a}:N)),r!=o.id&&i(`${l} ${a?"enabled":"disabled"} ${s}`,{icon:a?"✅":"❌"}),console.log(`Peer ${r} toggled ${s} to ${a}`)}),o.on("screenshare-toggle",({peerId:r,enabled:s,peerName:a})=>{O(l=>l.map(c=>c.id===r?{...c,sharingScreen:s}:c)),r!=o.id&&a&&i(`${a} ${s?"started":"stopped"} screen sharing`,{icon:s?"🖥️":"🛑"}),console.log(`Peer ${r} toggled screen sharing to ${s}`)}),o.on("handraise-toggle",({peerId:r,enabled:s,peerName:a})=>{O(l=>l.map(c=>c.id===r?{...c,handRaise:s}:c)),r!=o.id&&a&&s&&i(`${a} was hand raised `,{icon:"✋"})}),o.on("new-message",r=>{Je(s=>[...s,r]),r.senderId!==o.id&&i(`${r.senderName}: ${r.message}`,{icon:"💬"}),console.log("New message received:",r)}),o.on("participants-updated",({users:r,joiningPeer:s})=>{console.log("Participants updated:",r),O(r),s&&s.peerId!==o.id&&i.success(`${s.name} joined the room`,{icon:"👤"})}),o.on("peerPropertiesUpdated",({peerId:r,property:s,value:a})=>{O(l=>l.map(c=>c.id===r?{...c,[s]:a}:c)),console.log(`Peer ${r} updated property ${s} to ${a}`)}),o.on("consumerClosed",({consumerId:r})=>{de(s=>{const a=s.find(l=>l.consumer.id===r);return a?(a.consumer.close(),a.stream.getTracks().forEach(l=>l.stop()),s.filter(l=>l.consumer.id!==r)):s}),console.log("Consumer closed, consumerId:",r)})}catch(r){b("initialization-error"),w(`Initialization error: ${r.message}`),D(!1),i.error(`Initialization error: ${r.message}`),console.log("Initialization error:",r.message)}})(),()=>{o.off("routerCapabilities"),o.off("admitted"),o.off("join-request"),o.off("peerJoined"),o.off("peerClosed"),o.off("producerList"),o.off("newProducer"),o.off("peer-media-toggle"),o.off("screenshare-toggle"),o.off("new-message"),o.off("participants-updated"),o.off("peerPropertiesUpdated"),o.off("consumerClosed")}):void 0,[o,u,h,v,L]);const rr=n.useCallback(async()=>{try{return await navigator.mediaDevices.getUserMedia({audio:!0,video:{width:{ideal:1920,min:1280},height:{ideal:1080,min:720},aspectRatio:1.7777777777777777,frameRate:{ideal:60,min:30},facingMode:"user",advanced:[{zoom:1,brightness:100,sharpness:100,contrast:100,saturation:100,focusMode:"continuous"}]}})}catch(t){let r="Failed to access media devices";throw t.name==="NotAllowedError"?r="Please allow camera and microphone access":t.name==="NotFoundError"?r="No media devices found":t.name==="OverconstrainedError"&&(r="Cannot satisfy requested media constraints"),w(r),oe(!1),i.error(r),console.log("Get media error:",r),t}},[]);n.useEffect(()=>!x||!o||!d||!ue?void 0:((async()=>{try{b("creating-transports");const r=await $e("send");z(r),b("send-transport-created");const s=await $e("recv");Z(s),b("recv-transport-created"),b("initialization-complete"),console.log("Transports created successfully")}catch(r){b("transport-creation-error"),w(`Error creating transports: ${r.message}`),i.error(`Error creating transports: ${r.message}`),console.log("Transport creation error:",r.message)}})(),()=>{g&&g.close(),$&&$.close()}),[x,o,d,ue]);const $e=n.useCallback(async t=>new Promise((r,s)=>{o.emit("createWebRtcTransport",{direction:t},a=>{if(a.error){s(new Error(a.error)),i.error(`Error creating ${t} transport: ${a.error}`),console.error(`Create ${t} transport error:`,a.error);return}const l=t==="send"?x.createSendTransport({...a.params,iceServers:[{urls:"stun:stun.l.google.com:19302"}]}):x.createRecvTransport({...a.params,iceServers:[{urls:"stun:stun.l.google.com:19302"}]});l.on("connect",({dtlsParameters:c},N,fe)=>{o.emit("connectTransport",{transportId:l.id,dtlsParameters:c},F=>{F.error?(fe(new Error(F.error)),i.error(`Error connecting ${t} transport: ${F.error}`),console.error(`Connect ${t} transport error:`,F.error)):(console.log(`Connected ${t} transport`),N())})}),l.on("iceconnectionstatechange",()=>{console.log(`ICE connection state for ${t} transport:`,l.iceConnectionState),l.iceConnectionState==="failed"&&(w(`ICE connection failed for ${t} transport`),i.error(`ICE connection failed for ${t} transport`))}),l.on("icegatheringstatechange",()=>{console.log(`ICE gathering state for ${t} transport:`,l.iceGatheringState)}),l.on("icecandidate",c=>{console.log(`Local ICE candidate for ${t} transport:`,c)}),t==="send"&&l.on("produce",({kind:c,rtpParameters:N,appData:fe},F,ur)=>{o.emit("produce",{transportId:l.id,kind:c,rtpParameters:N,appData:fe},_=>{_.error?(ur(new Error(_.error)),i.error(`Error producing: ${_.error}`),console.error("Produce error:",_.error)):F({id:_.producerId})})}),l.on("connectionstatechange",c=>{console.log(`Transport ${t} connection state:`,c),(c==="failed"||c==="disconnected")&&(w(`Transport ${t} connection failed`),i.error(`Transport ${t} connection failed`))}),r(l)})}),[x,o]);n.useEffect(()=>{if(!g||!d)return;(async()=>{try{const r=d.getAudioTracks()[0];if(r){const a=await g.produce({track:r,codecOptions:{opusStereo:!0,opusDtx:!0},appData:{mediaType:"audio"}});ee(l=>({...l,[a.id]:a})),console.log("Audio producer created:",a.id)}const s=d.getVideoTracks()[0];if(s){const a=await g.produce({track:s,encodings:[{maxBitrate:1e5,scaleResolutionDownBy:4},{maxBitrate:3e5,scaleResolutionDownBy:2},{maxBitrate:9e5}],codecOptions:{videoGoogleStartBitrate:1e3},appData:{mediaType:"video"}});ee(l=>({...l,[a.id]:a})),console.log("Video producer created:",a.id)}}catch(r){w(`Error producing media: ${r.message}`),i.error(`Error producing media: ${r.message}`),console.log("Produce media error:",r.message)}})()},[g,d]),n.useEffect(()=>{if(!$||!x||!o||J.length===0||!C)return;(async()=>{const r=J.filter(s=>s.peerId!==C&&!H.some(a=>a.producerId===s.producerId));if(r.length!==0)try{const a=(await Promise.all(r.map(tr))).filter(Boolean);a.length>0&&(de(l=>[...l,...a]),console.log("New consumers added:",a))}catch(s){w(`Error consuming media: ${s.message}`),i.error(`Error consuming media: ${s.message}`),console.log("Consume producers error:",s.message)}})()},[J,$,x,o,H,C]);const tr=n.useCallback(async t=>{try{const{params:r}=await new Promise((l,c)=>{o.emit("consume",{transportId:$.id,producerId:t.producerId,rtpCapabilities:x.rtpCapabilities},N=>{N.error?(c(new Error(N.error)),console.error("Consume error:",N.error)):l(N)})}),s=await $.consume({id:r.id,producerId:r.producerId,kind:r.kind,rtpParameters:r.rtpParameters,appData:t.appData||{mediaType:r.kind}}),a=new MediaStream;return a.addTrack(s.track),console.log("Consumer created:",{id:s.id,kind:s.kind,track:s.track,trackEnabled:s.track.enabled,trackReadyState:s.track.readyState,streamTracks:a.getTracks(),streamActive:a.active}),await new Promise(l=>{o.emit("resumeConsumer",{consumerId:s.id},()=>{console.log("Consumer resumed:",s.id),l()})}),{consumer:s,stream:a,peerId:t.peerId,peerName:t.peerName,producerId:t.producerId,kind:r.kind,mediaType:s.appData.mediaType||r.kind}}catch(r){return i.error(`Error consuming producer: ${r.message}`),console.error("Create consumer error:",r.message),null}},[$,x,o]);n.useEffect(()=>{if(g)return G.current=setInterval(async()=>{try{const t=await g;qe(t||{})}catch(t){i.error("Error getting connection stats"),console.log("Get stats error:",t.message)}},5e3),()=>{G.current&&clearInterval(G.current)}},[g]);const sr=n.useCallback(()=>{if(d){const t=!p.audio;d.getAudioTracks().forEach(r=>r.enabled=t),A(r=>({...r,audio:t})),o.emit("toggle-media",{roomId:u,type:"audio",enabled:t,name:h},r=>{r.success?i.success(t?"Microphone enabled":"Microphone muted"):(i.error(r.error),console.log("Toggle audio error:",r.error))}),Object.values(V).forEach(r=>{r.appData.mediaType==="audio"&&(t?r.resume():r.pause())})}},[d,p.audio,o,u,V]),ar=n.useCallback(()=>{if(d){const t=!p.video;d.getVideoTracks().forEach(r=>r.enabled=t),A(r=>({...r,video:t})),o.emit("toggle-media",{roomId:u,type:"video",enabled:t,name:h},r=>{r.success?i.success(t?"Camera enabled":"Camera disabled"):(i.error(r.error),console.log("Toggle video error:",r.error))}),Object.values(V).forEach(r=>{r.appData.mediaType==="video"&&(t?r.resume():r.pause())})}},[d,p.video,o,u,V]),or=n.useCallback(async()=>{try{if(p.screen){const a=k;j(null),A(l=>({...l,screen:!1})),o.emit("toggle-screenshare",{roomId:u,enabled:!1,name:h},l=>{l.success?(a&&a.getTracks().forEach(c=>c.stop()),i.success("Stopped screen sharing")):(j(a),A(c=>({...c,screen:!0})),i.error(l.error),console.log("Toggle screen share (stop) error:",l.error))});return}const t=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0});j(t),A(a=>({...a,screen:!0}));const r=t.getVideoTracks()[0],s=await g.produce({track:r,encodings:[{maxBitrate:15e5}],codecOptions:{videoGoogleStartBitrate:1e3},appData:{mediaType:"screen"}});ee(a=>({...a,[s.id]:s})),o.emit("toggle-screenshare",{roomId:u,enabled:!0},a=>{a.success?i.success("Started screen sharing"):(s.close(),t.getTracks().forEach(l=>l.stop()),j(null),A(l=>({...l,screen:!1})),ee(l=>{const c={...l};return delete c[s.id],c}),i.error(a.error),console.log("Toggle screen share (start) error:",a.error))}),r.onended=()=>{s.close(),A(a=>({...a,screen:!1})),j(null),o.emit("toggle-screenshare",{roomId:u,enabled:!1},a=>{a.success?i.success("Screen sharing stopped"):(i.error(a.error),console.log("Toggle screen share (onended) error:",a.error))})}}catch(t){t.name!=="NotAllowedError"&&(i.error(`Error toggling screen share: ${t.message}`),A(r=>({...r,screen:!1})),j(null),console.log("Toggle screen share error:",t.message))}},[p.screen,k,g,o,u]),nr=t=>{o.emit("admit-participant",{roomId:u,peerId:t},r=>{r.success?(ve(s=>s.filter(a=>a.peerId!==t)),i.success("Participant admitted"),console.log("Participant admitted:",t)):(i.error(r.error),console.log("Admit participant error:",r.error))})},lr=async()=>{try{o.emit("toggle-handraise",{roomId:u,enabled:!te,name:h},t=>{t.success?i.success(te?"Hand Downed":"Hand Raised"):(i.error(t.error),console.log("Handle raise error:",t.error))}),Ue(!te)}catch(t){i.error(`Error handleraise: ${t.message}`)}},ir=t=>{t.preventDefault(),ae.trim()&&o.emit("send-message",{roomId:u,message:ae},r=>{r.success?(ye(""),console.log("Message sent:",ae)):(i.error(r.error),console.log("Send message error:",r.error))})},cr=n.useCallback(()=>{d&&d.getTracks().forEach(t=>t.stop()),k&&k.getTracks().forEach(t=>t.stop()),Object.values(V).forEach(t=>t.close()),H.forEach(t=>{t.consumer.close(),t.stream.getTracks().forEach(r=>r.stop())}),g&&g.close(),$&&$.close(),o&&o.disconnect(),G.current&&clearInterval(G.current),window.location.reload()},[d,k,V,H,g,$,o]);n.useEffect(()=>{ne.current&&(ne.current.scrollTop=ne.current.scrollHeight)},[xe]);const T={};H.forEach(t=>{T[t.peerId]||(T[t.peerId]={name:t.peerName,media:{}}),T[t.peerId].media[t.mediaType]=t});const f=S.find(t=>t.isAdmin),K=S.filter(t=>!t.isAdmin&&t.id!==C),P=S.find(t=>t.id===C),he=L?2:1,E=S.find(t=>t.sharingScreen),dr=K.filter(t=>!t.isAdmin).length,U=Math.ceil(dr/he),Te=K.slice((R-1)*he,R*he),Re=t=>{He(t)};return ue?be?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-red-600 px-4 py-3",children:e.jsx("h2",{className:"text-lg font-bold text-white",children:"Connection Error"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Something went wrong"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-300",children:[e.jsx("p",{children:be}),e.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:["Debug state: ",we]})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"Refresh Page"})})]})]})}):Fe?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsxs("p",{className:"mt-4 text-lg text-white font-medium",children:["Initializing room... (",we,")"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"This may take a few moments..."})]})}):e.jsxs("div",{className:"relative h-screen w-full bg-gradient-to-br from-white via-gray-300 to-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-gray-100/50 to-white/30 opacity-80"}),e.jsxs("div",{className:"relative h-full w-full flex flex-col font-sans",children:[e.jsx("header",{className:"px-6 py-4 z-10 bg-white/50 backdrop-blur-md border-b border-gray-200/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("h1",{className:"text-2xl font-extrabold text-gray-900 tracking-tight flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-800",children:u}),e.jsx("button",{onClick:er,title:"Copy Room ID",className:"text-blue-500 hover:text-teal-500 transition cursor-pointer",children:e.jsx(wr,{size:18})}),Ye&&e.jsx("span",{className:"text-xs text-green-500",children:"Copied!"})]}),L&&e.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-teal-500 text-xs text-white px-3 py-1 rounded-full shadow-md",children:"ADMIN"})]}),e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:" flex items-center space-x-2",children:[e.jsxs("div",{className:"flex relative items-center cursor-pointer space-x-2 bg-gray-200 text-gray-800 font-medium backdrop-blur-md rounded-full px-4 py-2 shadow-md",children:[Se&&e.jsx("span",{className:" bg-red-500 left-3.5 absolute animate-ping size-3 rounded-full me-2"}),e.jsx("span",{className:" bg-red-500  size-2 rounded-full me-3"}),Ke(Ge)]}),e.jsx("div",{children:Se?e.jsx("div",{onClick:Ze,children:e.jsx(Nr,{className:" size-9 text-red-500 cursor-pointer backdrop-blur-md rounded-full shadow-md",title:"stop record"})}):e.jsx("div",{onClick:Xe,children:e.jsx(Cr,{className:" size-9 text-blue-500 cursor-pointer backdrop-blur-md rounded-full shadow-md",title:"start record"})})})]})})]})}),e.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:S.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),e.jsx("p",{className:"text-gray-900 text-xl font-semibold",children:"Awaiting participants..."}),e.jsx("p",{className:"text-gray-500 mt-3 text-sm",children:"Share this room ID to invite others"})]})}):S.length===1?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"relative w-3/4 h-full max-h-[80vh] aspect-video bg-white/50 rounded-2xl overflow-hidden shadow-md backdrop-blur-sm border border-gray-200/50",children:[P?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):d&&p.video&&d?e.jsx(M,{stream:d,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Ee=P.name)==null?void 0:Ee.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:P.name})]})}):null,e.jsxs("div",{className:`absolute bottom-4 left-4 bg-gray-100/70  ${!p.video&&d||!p.audio&&d?"pe-2 ":" pe-4"} ps-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2`,children:[e.jsxs("span",{children:[P==null?void 0:P.name," (You)"]}),!p.video&&d&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full ",children:e.jsx(Q,{})}),!p.audio&&d&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full ",children:e.jsx(X,{})})]})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-full",children:[e.jsx("div",{className:"lg:col-span-3 bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-md",children:e.jsx("div",{className:"relative w-full h-full max-h-[80vh] aspect-video",children:E?e.jsxs(e.Fragment,{children:[E.id===C?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):k?e.jsx(M,{stream:k,muted:!0,className:"w-full h-full object-contain rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Ie=E.name)==null?void 0:Ie.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:E.name})]})}):(Pe=T[E.id])!=null&&Pe.media.screen?e.jsx(M,{stream:T[E.id].media.screen.stream,muted:!1,className:"w-full h-full object-contain rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Oe=E.name)==null?void 0:Oe.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:E.name})]})}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-100/70 px-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2",children:[e.jsxs("span",{className:"truncate max-w-xs",children:[E.name," ",E.id===C?"(You)":""]}),e.jsx("span",{className:"px-2 py-1 bg-green-400/80 rounded-full text-xs",children:"Screen Sharing"})]})]}):f?e.jsxs(e.Fragment,{children:[(Ae=T[f.id])!=null&&Ae.media.video&&f.isVideoOn?e.jsx(M,{stream:T[f.id].media.video.stream,muted:!1,className:"w-full h-full object-cover rounded-2xl"}):f.id===C?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):d&&f.isVideoOn?e.jsx(M,{stream:d,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Me=f.name)==null?void 0:Me.charAt(0).toUpperCase())||"A"})})})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((ze=f.name)==null?void 0:ze.charAt(0).toUpperCase())||"A"})})})}),e.jsxs("div",{className:`absolute bottom-4 left-4 ${f.isVideoOn?"bg-gray-100/70":" bg-gray-200"}  ${!f.isVideoOn||!f.isAudioOn?"pe-2 ":" pe-4"} ps-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2`,children:[e.jsxs("span",{children:[f.name," ",f.id===C?"(You)":"(Admin)"]}),!f.isVideoOn&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full",children:e.jsx(Q,{})}),!f.isAudioOn&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full",children:e.jsx(X,{})})]})]}):null})}),e.jsxs("div",{className:`lg:col-span-1 flex flex-col ${L?"space-y-6":"space-y-3"}`,children:[P&&!P.isAdmin&&!P.sharingScreen&&e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):d&&p.video&&d?e.jsx(M,{stream:d,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:(h==null?void 0:h.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:h})]})}),e.jsxs("div",{className:`absolute bottom-3 left-3 ${p.video&&d?"bg-gray-100/70":" bg-gray-200"} ${!p.video&&d&&!p.audio&&d?" pe-1":" pe-2"} ps-2 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2`,children:[e.jsx("span",{children:"You"}),!p.video&&d&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(Q,{})}),!p.audio&&d&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(X,{})})]})]})}),P.sharingScreen&&((De=T[f.id])==null?void 0:De.media.video)&&e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):T[f.id].media.video&&f.isVideoOn?e.jsx(M,{stream:T[f.id].media.video.stream,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:((Le=f.name)==null?void 0:Le.charAt(0).toUpperCase())||"A"})}),e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:f.name})]})}),e.jsxs("div",{className:"absolute bottom-3 left-3 bg-gray-100/70 px-3 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2",children:[e.jsx("span",{children:"Admin"}),!f.isVideoOn&&e.jsx("span",{className:"px-2 py-1 bg-red-400/80 rounded-full text-white text-xxs",children:e.jsx(Q,{})}),!f.isAudioOn&&e.jsx("span",{className:"px-2 py-1 bg-red-400/80 rounded-full text-white text-xxs",children:e.jsx(X,{})})]})]})}),e.jsx("div",{className:"flex-1 flex flex-col space-y-6",children:e.jsxs("div",{className:"bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-xl p-4",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold mb-4",children:["Participants (",K==null?void 0:K.length,")"]}),e.jsxs("div",{className:"space-y-4",children:[Te.map(t=>{var r,s;return e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[t.sharingScreen?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-blue-100 to-teal-100 text-gray-900 text-center",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:t.name}),e.jsx("p",{className:"text-sm mt-1",children:"is sharing their screen"})]})}):(r=T[t.id])!=null&&r.media.video&&t.isVideoOn?e.jsx(M,{stream:T[t.id].media.video.stream,muted:!1,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:((s=t.name)==null?void 0:s.charAt(0).toUpperCase())||"U"})})})}),e.jsxs("div",{className:`absolute bottom-3 left-3 ${t.isVideoOn?"bg-gray-100/70":"bg-gray-200"} ${t.isVideoOn&&t.isAudioOn?" pe-2":" pe-1"} ps-2 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2`,children:[e.jsx("span",{children:t.name}),!t.isVideoOn&&!t.shareScreen&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(Q,{})}),!t.isAudioOn&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(X,{})})]})]})},t.id)}),Te.length===0&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"No participants on this page"})})]}),U>1&&e.jsxs("div",{className:"flex justify-between items-center space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>Re(R>1?R-1:U),className:`p-3 rounded-full bg-gray-200/50 text-gray-700 hover:bg-blue-300/50 transition-all duration-200 shadow-md ${R===1?"opacity-50 cursor-not-allowed":""}`,disabled:R===1,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("span",{className:"text-gray-700 text-sm font-medium",children:[R," / ",U]}),e.jsx("button",{onClick:()=>Re(R<U?R+1:1),className:`p-3 rounded-full bg-gray-200/50 text-gray-700 hover:bg-blue-300/50 transition-all duration-200 shadow-md ${R===U?"opacity-50 cursor-not-allowed":""}`,disabled:R===U,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]})})]})]})}),e.jsxs("div",{className:`absolute z-10 right-6 ${re?"bottom-6":"-bottom-4"} w-96 bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl transition-all duration-500 ease-in-out ${re?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200/50 bg-gray-100/50 rounded-t-2xl backdrop-blur-2xl flex justify-between items-center",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold flex items-center gap-x-2",children:[" ",e.jsx(Sr,{className:" size-5"}),e.jsx("span",{className:"mb-1",children:"Chat"})]}),e.jsx("button",{onClick:()=>pe(!1),className:"text-gray-500 hover:text-gray-900 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{ref:ne,className:"h-80 p-4 overflow-y-auto",children:xe.length===0?e.jsx("p",{className:"text-gray-500 text-center py-10",children:"No messages yet"}):xe.map((t,r)=>e.jsx("div",{className:`mb-4 ${t.senderId===C?"text-right":"text-left"}`,children:e.jsxs("div",{className:`inline-block max-w-xs px-4 py-2 rounded-xl shadow-md ${t.senderId===C?"bg-gradient-to-r from-blue-500 to-teal-500 text-white":"bg-gray-200/50 text-gray-900"}`,children:[e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[t.senderName," ",t.senderId===C&&"(You)"]}),e.jsx("p",{className:"text-sm",children:t.message})]})},r))}),e.jsx("div",{className:"p-4 border-t border-gray-200/50",children:e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:ae,onChange:t=>ye(t.target.value),className:"flex-1 bg-gray-200/50 text-gray-900 px-4 py-2 rounded-l-xl focus:outline-none focus:ring-2 focus:ring-blue-400/50 border border-gray-200/50",placeholder:"Type a message..."}),e.jsx("button",{type:"submit",onClick:ir,className:"bg-gradient-to-r from-blue-500 to-teal-500 text-white px-6 py-2 rounded-r-xl hover:from-blue-600 hover:to-teal-600 transition-all",children:"Send"})]})})]}),e.jsxs("div",{className:`absolute z-10 left-6 ${le?"bottom-6":"-bottom-4"} w-96 bg-gray-200 rounded-2xl border border-gray-200/50 shadow-2xl transition-all duration-500 ease-in-out ${le?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200/50 bg-gray-100/50 rounded-t-2xl backdrop-blur-2xl flex justify-between items-center",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold flex items-center gap-x-2",children:[" ",e.jsx(kr,{className:" size-5"}),e.jsxs("span",{className:"",children:["Participiants ",`(${S==null?void 0:S.length})`]})]}),e.jsx("button",{onClick:()=>Ce(!1),className:"text-gray-500 hover:text-gray-900 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:S==null?void 0:S.map((t,r)=>e.jsxs("div",{className:` flex item-center justify-between p-3 ${S.length-1===r?"border-b-0":"border-b"} border-b-gray-400`,children:[e.jsxs("div",{className:" flex items-center justify-center gap-x-1",children:[e.jsx("span",{className:" text-gray-800 font-semibold",children:t.name}),t.isAdmin&&e.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-teal-500 text-xs text-white px-3 py-1 rounded-full shadow-md",children:"Admin"}),e.jsx("span",{children:t.id===o.id&&"(You)"})]}),e.jsxs("div",{className:" flex item-center justify-center gap-x-2",children:[t.sharingScreen&&e.jsx($r,{className:" size-5.5 text-blue-600"}),t.isVideoOn?e.jsx(Tr,{className:" size-5 text-green-600"}):e.jsx(Rr,{className:" size-5 text-red-500"}),t.isAudioOn?e.jsx(Er,{className:" size-5 text-green-600"}):e.jsx(Ir,{className:" size-5 text-red-500"}),t.handRaise&&e.jsx(Ve,{className:" size-5 text-yellow-500"})]})]},r))})]})]}),e.jsx(Mr,{peerId:C,videoUrl:We,isMuted:!p.audio,isVideoOff:!p.video,isScreenSharing:p.screen,onToggleAudio:sr,onToggleVideo:ar,onToggleScreenShare:or,onLeaveRoom:cr,onToggleChat:()=>pe(!re),showparticipants:le,onToggleparticipants:()=>Ce(!le),someoneshare:E,chatOpen:re,setVideoUrl:ke,handraiseoption:te,onTogglehandraise:lr,className:"bg-white/50 backdrop-blur-md border-t border-gray-200/50"}),se.length>0&&e.jsxs("div",{className:"absolute top-24 right-6 w-80 bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-200/50",children:e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold",children:["Pending Join Requests (",se.length,")"]})}),e.jsxs("div",{className:"max-h-72 overflow-y-auto",children:[se.map(t=>e.jsxs("div",{className:"p-4 border-b border-gray-200/50 last:border-b-0 flex justify-between items-center hover:bg-gray-100/30 transition-colors",children:[e.jsx("span",{className:"text-gray-900 text-sm font-medium",children:t.name}),L&&e.jsx("button",{onClick:()=>nr(t.peerId),className:"bg-gradient-to-r from-green-400 to-teal-400 text-white px-4 py-1.5 rounded-full text-sm hover:from-green-500 hover:to-teal-500 transition-all shadow-md",children:"Admit"})]},t.peerId)),!L&&se.length>0&&e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Waiting for admin to admit these participants."})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-lg font-medium",children:"Waiting for admin approval..."})]})})};function Dr(){const[u,h]=n.useState(!1),[v,o]=n.useState(""),[m,x]=n.useState(""),[y,d]=n.useState(!1),B=g=>{g.preventDefault(),v&&m&&h(!0)},k=g=>{if(g.preventDefault(),m){const z=Math.random().toString(36).substring(2,7);console.log(`Room created with ID: ${z}`),o(z),d(!0),h(!0)}},j=()=>{d(!y),o("")};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(Or,{position:"top-right"}),u?e.jsx(zr,{roomId:v,name:m,isCreating:y}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-indigo-600",children:y?"Create Video Conference":"Join Video Conference"}),e.jsxs("form",{onSubmit:y?k:B,children:[!y&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"roomId",className:"block text-gray-700 mb-2",children:"Room ID"}),e.jsx("input",{type:"text",id:"roomId",value:v,onChange:g=>o(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter room ID",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:"Your Name"}),e.jsx("input",{type:"text",id:"name",value:m,onChange:g=>x(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your name",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition duration-300 mb-4",children:y?"Create Room":"Join Room"}),e.jsx("button",{type:"button",onClick:j,className:"w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-300 transition duration-300",children:y?"Switch to Join Room":"Switch to Create Room"})]})]})})]})}Ar.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(Dr,{})}));
