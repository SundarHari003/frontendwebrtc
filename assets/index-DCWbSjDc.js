import{r as n,j as e,M as mr,F as xr,a as gr,b as fr,c as hr,d as pr,P as De,e as br,f as jr,g as yr,R as Ve,l as vr,V as i,I as wr,h as Nr,i as Sr,k as Q,C as X,m as Cr,H as kr,n as Tr,o as $r,p as Rr,q as Er,s as Or,t as Pr,O as Ar,u as Ir}from"./vendor-B_ra6ZK1.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))o(f);new MutationObserver(f=>{for(const x of f)if(x.type==="childList")for(const p of x.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function w(f){const x={};return f.integrity&&(x.integrity=f.integrity),f.referrerPolicy&&(x.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?x.credentials="include":f.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(f){if(f.ep)return;f.ep=!0;const x=w(f);fetch(f.href,x)}})();const z=({Videostream:u,Audiostream:m,muted:w,className:o="",islocal:f,stream:x})=>{const p=n.useRef(null);function c(I,N){const b=new MediaStream;return I&&I.getVideoTracks().forEach(g=>b.addTrack(g)),N&&N.getAudioTracks().forEach(g=>b.addTrack(g)),b}return n.useEffect(()=>(p.current&&u&&(p.current.srcObject=c(u,m)),f&&(p.current.srcObject=x),()=>{p.current&&(p.current.srcObject=null)}),[x,u,m]),e.jsx("video",{ref:p,autoPlay:!0,playsInline:!0,muted:w,className:o,onLoadedMetadata:()=>p.current.play()})},Mr=({isMuted:u,videoUrl:m,isVideoOff:w,isScreenSharing:o,onToggleAudio:f,onToggleVideo:x,onToggleScreenShare:p,onLeaveRoom:c,onToggleChat:I,chatOpen:N,someoneshare:b,setVideoUrl:g,peerId:V,onToggleparticipants:$,showparticipants:Z,onTogglehandraise:J,handraiseoption:q})=>e.jsxs("div",{className:"p-3 relative",children:[m&&e.jsx("div",{className:"absolute left-2 bottom-2 p-2 group bg-gray-100 backdrop-blur-md rounded-full  cursor-pointer overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-blue-300/30 border border-gray-300",children:e.jsxs("a",{href:m,download:"page-recording.webm",className:"flex items-center ",onClick:()=>{g(null)},children:[e.jsx(mr,{className:"size-6 text-blue-500"}),e.jsx("button",{className:"w-0 opacity-0 group-hover:w-auto group-hover:opacity-100 group-hover:px-2 transition-all duration-300 ease-in-out text-blue-500 font-semibold text-sm",children:"Download"})]})}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:f,className:`p-3 rounded-full transition-all ${u?"bg-red-400 text-white shadow-lg shadow-red-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:u?"Unmute":"Mute",children:u?e.jsx(xr,{className:"h-5 w-5"}):e.jsx(gr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:x,className:`p-3 rounded-full transition-all ${w?"bg-red-400 text-white shadow-lg shadow-red-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:w?"Turn on camera":"Turn off camera",children:w?e.jsx(fr,{className:"h-5 w-5"}):e.jsx(hr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:p,disabled:b&&V!==(b==null?void 0:b.id),className:`${b&&V!==(b==null?void 0:b.id)?"opacity-50 cursor-not-allowed":""} p-3 rounded-full transition-all ${o?"bg-green-400 text-white shadow-lg shadow-green-400/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:o?"Stop sharing":"Share screen",children:e.jsx(pr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:J,className:`p-3 rounded-full transition-all ${q?"bg-yellow-500 text-white shadow-lg shadow-yellow-500/30":"bg-gray-200 text-gray-700 hover:bg-yellow-200 hover:text-gray-900"}`,title:"hand raise",children:e.jsx(De,{className:"h-5 w-5"})}),e.jsx("button",{onClick:$,className:`p-3 rounded-full transition-all ${Z?"bg-purple-500 text-white shadow-lg shadow-purple-500/30":"bg-gray-200 text-gray-700 hover:bg-purple-200 hover:text-gray-900"}`,title:Z?"Hide chat":"Show chat",children:e.jsx(br,{className:"h-5 w-5"})}),e.jsx("button",{onClick:I,className:`p-3 rounded-full transition-all ${N?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-gray-200 text-gray-700 hover:bg-blue-200 hover:text-gray-900"}`,title:N?"Hide Participants":"Show Participants",children:e.jsx(jr,{className:"h-5 w-5"})}),e.jsx("button",{onClick:c,className:"p-3 rounded-full bg-red-400 text-white shadow-lg shadow-red-400/30 hover:bg-red-500 transition-all",title:"Leave room",children:e.jsx(yr,{className:"h-5 w-5"})})]})]}),zr=({stream:u})=>{const m=Ve.useRef(null);return Ve.useEffect(()=>(m.current&&(m.current.srcObject=u),()=>{m.current&&(m.current.srcObject=null)}),[u]),e.jsx("audio",{ref:m,autoPlay:!0,playsInline:!0,className:" hidden",onLoadedMetadata:()=>m.current.play()})},Vr=({roomId:u,name:m,isCreating:w})=>{var $e,Re,Ee,Oe,Pe,Ae,Ie,Me,ze;const[o,f]=n.useState(null),[x,p]=n.useState(null),[c,I]=n.useState(null),[N,b]=n.useState(null),[g,V]=n.useState(null),[$,Z]=n.useState(null),[J,q]=n.useState([]),[H,de]=n.useState([]),[U,ee]=n.useState({}),[re,pe]=n.useState(!1),[te,Le]=n.useState(!1),[j,M]=n.useState({audio:!0,video:!0,screen:!1}),[Ue,D]=n.useState(!0),[Lr,C]=n.useState(null),[k,be]=n.useState(null),[T,A]=n.useState([]),[se,je]=n.useState([]),[L,Fe]=n.useState(w),[ue,me]=n.useState(w),[xe,Be]=n.useState([]),[ae,ye]=n.useState(""),[Ur,Je]=n.useState(null),[qe,y]=n.useState("initializing"),[Y,oe]=n.useState(!0),[E,He]=n.useState(1),G=n.useRef(),ne=n.useRef(),[Ye,ve]=n.useState(!1),[le,we]=n.useState(!1),ie=n.useRef(null),[Ge,W]=n.useState(0),[Ne,ce]=n.useState(!1),[We,Se]=n.useState(null),O=n.useRef(null),ge=n.useRef([]),Ke=t=>{const r=Math.floor(t/3600).toString().padStart(2,"0"),s=Math.floor(t%3600/60).toString().padStart(2,"0"),a=(t%60).toString().padStart(2,"0");return`${r} : ${s} : ${a}`},_e=()=>{W(0),ie.current=setInterval(()=>{W(t=>t+1)},1e3)},Qe=()=>{ie.current&&(clearInterval(ie.current),ie.current=null)},Xe=async()=>{var t;try{const r=await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"tab"},audio:!0,preferCurrentTab:!0});(t=O.current)!=null&&t.stream&&O.current.stream.getTracks().forEach(s=>s.stop()),O.current=new MediaRecorder(r,{mimeType:"video/webm"}),r.getVideoTracks()[0].onended=()=>{var s;((s=O.current)==null?void 0:s.state)!=="inactive"&&O.current.stop(),W(0),ce(!1)},O.current.ondataavailable=s=>{s.data.size>0&&ge.current.push(s.data)},O.current.onstop=()=>{const s=new Blob(ge.current,{type:"video/webm"}),a=URL.createObjectURL(s);Se(a),Qe(),ge.current=[],r.getTracks().forEach(l=>l.stop()),W(0),ce(!1)},O.current.start(),_e(),ce(!0)}catch(r){console.error("Error starting recording:",r),ce(!1),W(0)}},Ze=()=>{O.current&&O.current.stop()},er=()=>{navigator.clipboard.writeText(u),ve(!0),setTimeout(()=>ve(!1),2e3)};n.useEffect(()=>{y("connecting-socket");const t=vr("https://deb7-103-176-188-201.ngrok-free.app",{reconnectionAttempts:5,reconnectionDelay:1e3,autoConnect:!0,transports:["websocket"]});return t.on("connect",()=>{be(t.id),f(t),C(null),y("socket-connected"),i.success("Connected to server"),console.log("Socket connected, peerId:",t.id)}),t.on("disconnect",r=>{y("socket-disconnected"),C("Connection lost. Trying to reconnect..."),i.error("Disconnected from server"),console.log("Socket disconnected:",r)}),t.on("connect_error",r=>{y("socket-connection-error"),C(`Connection error: ${r.message}`),i.error(`Connection error: ${r.message}`),console.log("Socket connect error:",r.message)}),f(t),()=>{t.disconnect()}},[]),n.useEffect(()=>o?(y("initializing-device-and-media"),(async()=>{try{D(!0),w?o.emit("createRoom",{roomId:u,name:m},r=>{r.success?(A(r.users||[]),Fe(!0),me(!0),D(!1),y("created-room"),i.success("Room created successfully")):(C(r.error),D(!1),i.error(r.error))}):o.emit("joinRoom",{roomId:u,name:m},r=>{r.success?(A(r.users||[]),be(o.id),me(!0),D(!1),y("joined-room"),i.success("Joined room successfully")):(C(r.error),D(!1),i.error(r.error))}),o.on("routerCapabilities",async r=>{try{y("loading-device");const s=new Pr.Device;await s.load({routerRtpCapabilities:r}),p(s),y("device-loaded"),console.log("Device loaded with capabilities:",r);const a=await rr();console.log("Local stream obtained:",a),I(a),y("media-obtained"),oe(!1)}catch(s){y("device-or-media-error"),C(`Initialization error: ${s.message}`),oe(!1),i.error(`Initialization error: ${s.message}`),console.log("Device or media error:",s.message)}}),o.on("admitted",()=>{me(!0),D(!1),y("admitted"),i.success("You have been admitted to the room"),console.log("Participant admitted to room:",u),o.emit("getRouterRtpCapabilities",r=>{r.error&&(C(r.error),oe(!1),i.error(r.error),console.log("Get router capabilities error after admission:",r.error))})}),o.on("join-request",({peerId:r,name:s})=>{L&&(je(a=>[...a,{peerId:r,name:s}]),i(`Join request from ${s}`,{icon:"ðŸ””"}),console.log("Join request received from:",s,"peerId:",r))}),o.on("peerJoined",({peerId:r,peerDetails:s,users:a})=>{A(a),i(`${s.name} joined the room`,{icon:"ðŸ‘¤"}),console.log("Peer joined, updated participants:",a)}),o.on("peerClosed",({peerId:r,peerName:s})=>{A(a=>a.filter(l=>l.id!==r)),q(a=>a.filter(l=>l.peerId!==r)),de(a=>(a.filter(d=>d.peerId===r).forEach(d=>{d.consumer.close(),d.stream.getTracks().forEach(S=>S.stop())}),a.filter(d=>d.peerId!==r))),i(`${s} left the room`,{icon:"ðŸšª"}),console.log("Peer closed, peerId:",s)}),o.on("producerList",r=>{q(r),console.log("Received producer list:",r)}),o.on("newProducer",r=>{q(s=>s.some(a=>a.producerId===r.producerId)?s:[...s,r]),console.log("New producer added:",r)}),o.on("peer-media-toggle",({peerId:r,type:s,enabled:a,peerName:l})=>{A(d=>d.map(S=>S.id===r?{...S,[`is${s.charAt(0).toUpperCase()+s.slice(1)}On`]:a}:S)),r!=o.id&&i(`${l} ${a?"enabled":"disabled"} ${s}`,{icon:a?"âœ…":"âŒ"}),console.log(`Peer ${r} toggled ${s} to ${a}`)}),o.on("screenshare-toggle",({peerId:r,enabled:s,peerName:a})=>{A(l=>l.map(d=>d.id===r?{...d,sharingScreen:s}:d)),r!=o.id&&a&&i(`${a} ${s?"started":"stopped"} screen sharing`,{icon:s?"ðŸ–¥ï¸":"ðŸ›‘"}),console.log(`Peer ${r} toggled screen sharing to ${s}`)}),o.on("handraise-toggle",({peerId:r,enabled:s,peerName:a})=>{A(l=>l.map(d=>d.id===r?{...d,handRaise:s}:d)),r!=o.id&&a&&s&&i(`${a} was hand raised `,{icon:"âœ‹"})}),o.on("new-message",r=>{Be(s=>[...s,r]),r.senderId!==o.id&&i(`${r.senderName}: ${r.message}`,{icon:"ðŸ’¬"}),console.log("New message received:",r)}),o.on("participants-updated",({users:r,joiningPeer:s})=>{console.log("Participants updated:",r),A(r),s&&s.peerId!==o.id&&i.success(`${s.name} joined the room`,{icon:"ðŸ‘¤"})}),o.on("peerPropertiesUpdated",({peerId:r,property:s,value:a})=>{A(l=>l.map(d=>d.id===r?{...d,[s]:a}:d)),console.log(`Peer ${r} updated property ${s} to ${a}`)}),o.on("consumerClosed",({consumerId:r})=>{de(s=>{const a=s.find(l=>l.consumer.id===r);return a?(a.consumer.close(),a.stream.getTracks().forEach(l=>l.stop()),s.filter(l=>l.consumer.id!==r)):s}),console.log("Consumer closed, consumerId:",r)})}catch(r){y("initialization-error"),C(`Initialization error: ${r.message}`),D(!1),i.error(`Initialization error: ${r.message}`),console.log("Initialization error:",r.message)}})(),()=>{o.off("routerCapabilities"),o.off("admitted"),o.off("join-request"),o.off("peerJoined"),o.off("peerClosed"),o.off("producerList"),o.off("newProducer"),o.off("peer-media-toggle"),o.off("screenshare-toggle"),o.off("new-message"),o.off("participants-updated"),o.off("peerPropertiesUpdated"),o.off("consumerClosed")}):void 0,[o,u,m,w,L]);const rr=n.useCallback(async()=>{try{return await navigator.mediaDevices.getUserMedia({audio:!0,video:{width:{ideal:1920,min:1280},height:{ideal:1080,min:720},aspectRatio:1.7777777777777777,frameRate:{ideal:60,min:30},facingMode:"user",advanced:[{zoom:1,brightness:100,sharpness:100,contrast:100,saturation:100,focusMode:"continuous"}]}})}catch(t){let r="Failed to access media devices";throw t.name==="NotAllowedError"?r="Please allow camera and microphone access":t.name==="NotFoundError"?r="No media devices found":t.name==="OverconstrainedError"&&(r="Cannot satisfy requested media constraints"),C(r),oe(!1),i.error(r),console.log("Get media error:",r),t}},[]);n.useEffect(()=>!x||!o||!c||!ue?void 0:((async()=>{try{y("creating-transports");const r=await Ce("send");V(r),y("send-transport-created");const s=await Ce("recv");Z(s),y("recv-transport-created"),y("initialization-complete"),console.log("Transports created successfully")}catch(r){y("transport-creation-error"),C(`Error creating transports: ${r.message}`),i.error(`Error creating transports: ${r.message}`),console.log("Transport creation error:",r.message)}})(),()=>{g&&g.close(),$&&$.close()}),[x,o,c,ue]);const Ce=n.useCallback(async t=>new Promise((r,s)=>{o.emit("createWebRtcTransport",{direction:t},a=>{if(a.error){s(new Error(a.error)),i.error(`Error creating ${t} transport: ${a.error}`),console.log(`Create ${t} transport error:`,a.error);return}const l=t==="send"?x.createSendTransport(a.params):x.createRecvTransport(a.params);l.on("connect",({dtlsParameters:d},S,he)=>{o.emit("connectTransport",{transportId:l.id,dtlsParameters:d},B=>{B.error?(he(new Error(B.error)),i.error(`Error connecting ${t} transport: ${B.error}`),console.log(`Connect ${t} transport error:`,B.error)):S()})}),t==="send"&&l.on("produce",({kind:d,rtpParameters:S,appData:he},B,ur)=>{o.emit("produce",{transportId:l.id,kind:d,rtpParameters:S,appData:he},_=>{_.error?(ur(new Error(_.error)),i.error(`Error producing: ${_.error}`),console.log("Produce error:",_.error)):B({id:_.producerId})})}),l.on("connectionstatechange",d=>{(d==="failed"||d==="disconnected")&&(C(`Transport ${t} connection failed`),i.error(`Transport ${t} connection failed`),console.log(`Transport ${t} connection state changed to:`,d))}),r(l)})}),[x,o]);n.useEffect(()=>{if(!g||!c)return;(async()=>{try{const r=c.getAudioTracks()[0];if(r){const a=await g.produce({track:r,codecOptions:{opusStereo:!0,opusDtx:!0},appData:{mediaType:"audio"}});ee(l=>({...l,[a.id]:a})),console.log("Audio producer created:",a.id)}const s=c.getVideoTracks()[0];if(s){const a=await g.produce({track:s,encodings:[{maxBitrate:1e5,scaleResolutionDownBy:4},{maxBitrate:3e5,scaleResolutionDownBy:2},{maxBitrate:9e5}],codecOptions:{videoGoogleStartBitrate:1e3},appData:{mediaType:"video"}});ee(l=>({...l,[a.id]:a})),console.log("Video producer created:",a.id)}}catch(r){C(`Error producing media: ${r.message}`),i.error(`Error producing media: ${r.message}`),console.log("Produce media error:",r.message)}})()},[g,c]),n.useEffect(()=>{if(!$||!x||!o||J.length===0||!k)return;(async()=>{const r=J.filter(s=>s.peerId!==k&&!H.some(a=>a.producerId===s.producerId));if(r.length!==0)try{const a=(await Promise.all(r.map(tr))).filter(Boolean);a.length>0&&(de(l=>[...l,...a]),console.log("New consumers added:",a))}catch(s){C(`Error consuming media: ${s.message}`),i.error(`Error consuming media: ${s.message}`),console.log("Consume producers error:",s.message)}})()},[J,$,x,o,H,k]);const tr=n.useCallback(async t=>{try{const{params:r}=await new Promise((l,d)=>{o.emit("consume",{transportId:$.id,producerId:t.producerId,rtpCapabilities:x.rtpCapabilities},S=>{S.error?(d(new Error(S.error)),console.log("Consume error:",S.error)):l(S)})}),s=await $.consume({id:r.id,producerId:r.producerId,kind:r.kind,rtpParameters:r.rtpParameters,appData:t.appData||{mediaType:r.kind}}),a=new MediaStream;return a.addTrack(s.track),await new Promise(l=>{o.emit("resumeConsumer",{consumerId:s.id},()=>{l()})}),{consumer:s,stream:a,peerId:t.peerId,peerName:t.peerName,producerId:t.producerId,kind:r.kind,mediaType:s.appData.mediaType||r.kind}}catch(r){return console.log("Create consumer error:",r.message),null}},[$,x,o]);n.useEffect(()=>{if(g)return G.current=setInterval(async()=>{try{const t=await g;Je(t||{})}catch(t){i.error("Error getting connection stats"),console.log("Get stats error:",t.message)}},5e3),()=>{G.current&&clearInterval(G.current)}},[g]);const sr=n.useCallback(()=>{if(c){const t=!j.audio;c.getAudioTracks().forEach(r=>r.enabled=t),M(r=>({...r,audio:t})),o.emit("toggle-media",{roomId:u,type:"audio",enabled:t,name:m},r=>{r.success?i.success(t?"Microphone enabled":"Microphone muted"):(i.error(r.error),console.log("Toggle audio error:",r.error))}),Object.values(U).forEach(r=>{r.appData.mediaType==="audio"&&(t?r.resume():r.pause())})}},[c,j.audio,o,u,U]),ar=n.useCallback(()=>{if(c){const t=!j.video;c.getVideoTracks().forEach(r=>r.enabled=t),M(r=>({...r,video:t})),o.emit("toggle-media",{roomId:u,type:"video",enabled:t,name:m},r=>{r.success?i.success(t?"Camera enabled":"Camera disabled"):(i.error(r.error),console.log("Toggle video error:",r.error))}),Object.values(U).forEach(r=>{r.appData.mediaType==="video"&&(t?r.resume():r.pause())})}},[c,j.video,o,u,U]),or=n.useCallback(async()=>{try{if(j.screen){const a=N;b(null),M(l=>({...l,screen:!1})),o.emit("toggle-screenshare",{roomId:u,enabled:!1,name:m},l=>{l.success?(a&&a.getTracks().forEach(d=>d.stop()),i.success("Stopped screen sharing")):(b(a),M(d=>({...d,screen:!0})),i.error(l.error),console.log("Toggle screen share (stop) error:",l.error))});return}const t=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0});b(t),M(a=>({...a,screen:!0}));const r=t.getVideoTracks()[0],s=await g.produce({track:r,encodings:[{maxBitrate:15e5}],codecOptions:{videoGoogleStartBitrate:1e3},appData:{mediaType:"screen"}});ee(a=>({...a,[s.id]:s})),o.emit("toggle-screenshare",{roomId:u,enabled:!0},a=>{a.success?i.success("Started screen sharing"):(s.close(),t.getTracks().forEach(l=>l.stop()),b(null),M(l=>({...l,screen:!1})),ee(l=>{const d={...l};return delete d[s.id],d}),i.error(a.error),console.log("Toggle screen share (start) error:",a.error))}),r.onended=()=>{s.close(),M(a=>({...a,screen:!1})),b(null),o.emit("toggle-screenshare",{roomId:u,enabled:!1},a=>{a.success?i.success("Screen sharing stopped"):(i.error(a.error),console.log("Toggle screen share (onended) error:",a.error))})}}catch(t){t.name!=="NotAllowedError"&&(i.error(`Error toggling screen share: ${t.message}`),M(r=>({...r,screen:!1})),b(null),console.log("Toggle screen share error:",t.message))}},[j.screen,N,g,o,u]),nr=t=>{o.emit("admit-participant",{roomId:u,peerId:t},r=>{r.success?(je(s=>s.filter(a=>a.peerId!==t)),i.success("Participant admitted"),console.log("Participant admitted:",t)):(i.error(r.error),console.log("Admit participant error:",r.error))})},lr=async()=>{try{o.emit("toggle-handraise",{roomId:u,enabled:!te,name:m},t=>{t.success?i.success(te?"Hand Downed":"Hand Raised"):(i.error(t.error),console.log("Handle raise error:",t.error))}),Le(!te)}catch(t){i.error(`Error handleraise: ${t.message}`)}},ir=t=>{t.preventDefault(),ae.trim()&&o.emit("send-message",{roomId:u,message:ae},r=>{r.success?(ye(""),console.log("Message sent:",ae)):(i.error(r.error),console.log("Send message error:",r.error))})},cr=n.useCallback(()=>{c&&c.getTracks().forEach(t=>t.stop()),N&&N.getTracks().forEach(t=>t.stop()),Object.values(U).forEach(t=>t.close()),H.forEach(t=>{t.consumer.close(),t.stream.getTracks().forEach(r=>r.stop())}),g&&g.close(),$&&$.close(),o&&o.disconnect(),G.current&&clearInterval(G.current),window.location.reload()},[c,N,U,H,g,$,o]);n.useEffect(()=>{ne.current&&(ne.current.scrollTop=ne.current.scrollHeight)},[xe]);const v={};H.forEach(t=>{v[t.peerId]||(v[t.peerId]={name:t.peerName,media:{}}),v[t.peerId].media[t.mediaType]=t});const h=T.find(t=>t.isAdmin),K=T.filter(t=>!t.isAdmin&&t.id!==k),P=T.find(t=>t.id===k),fe=L?2:1,R=T.find(t=>t.sharingScreen),dr=K.filter(t=>!t.isAdmin).length,F=Math.ceil(dr/fe),ke=K.slice((E-1)*fe,E*fe),Te=t=>{He(t)};return ue?Ue?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsxs("p",{className:"mt-4 text-lg text-white font-medium",children:["Initializing room... (",qe,")"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"This may take a few moments..."})]})}):e.jsxs("div",{className:"relative h-screen w-full bg-gradient-to-br from-white via-gray-300 to-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-gray-100/50 to-white/30 opacity-80"}),e.jsxs("div",{className:"relative h-full w-full flex flex-col font-sans",children:[e.jsx("header",{className:"px-6 py-4 z-10 bg-white/50 backdrop-blur-md border-b border-gray-200/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("h1",{className:"text-2xl font-extrabold text-gray-900 tracking-tight flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-800",children:u}),e.jsx("button",{onClick:er,title:"Copy Room ID",className:"text-blue-500 hover:text-teal-500 transition cursor-pointer",children:e.jsx(wr,{size:18})}),Ye&&e.jsx("span",{className:"text-xs text-green-500",children:"Copied!"})]}),L&&e.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-teal-500 text-xs text-white px-3 py-1 rounded-full shadow-md",children:"ADMIN"})]}),e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:" flex items-center space-x-2",children:[e.jsxs("div",{className:"flex relative items-center cursor-pointer space-x-2 bg-gray-200 text-gray-800 font-medium backdrop-blur-md rounded-full px-4 py-2 shadow-md",children:[Ne&&e.jsx("span",{className:" bg-red-500 left-3.5 absolute animate-ping size-3 rounded-full me-2"}),e.jsx("span",{className:" bg-red-500  size-2 rounded-full me-3"}),Ke(Ge)]}),e.jsx("div",{children:Ne?e.jsx("div",{onClick:Ze,children:e.jsx(Nr,{className:" size-9 text-red-500 cursor-pointer backdrop-blur-md rounded-full shadow-md",title:"stop record"})}):e.jsx("div",{onClick:Xe,children:e.jsx(Sr,{className:" size-9 text-blue-500 cursor-pointer backdrop-blur-md rounded-full shadow-md",title:"start record"})})})]})})]})}),e.jsxs("main",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:T.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),e.jsx("p",{className:"text-gray-900 text-xl font-semibold",children:"Awaiting participants..."}),e.jsx("p",{className:"text-gray-500 mt-3 text-sm",children:"Share this room ID to invite others"})]})}):T.length===1?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"relative w-3/4 h-full max-h-[80vh] aspect-video bg-white/50 rounded-2xl overflow-hidden shadow-md backdrop-blur-sm border border-gray-200/50",children:[P?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):c&&j.video&&c?e.jsx(z,{Videostream:null,Audiostream:null,islocal:!0,stream:c,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:(($e=P.name)==null?void 0:$e.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:P.name})]})}):null,e.jsxs("div",{className:`absolute bottom-4 left-4 bg-gray-100/70  ${!j.video&&c||!j.audio&&c?"pe-2 ":" pe-4"} ps-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2`,children:[e.jsxs("span",{children:[P==null?void 0:P.name," (You)"]}),!j.video&&c&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full ",children:e.jsx(Q,{})}),!j.audio&&c&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full ",children:e.jsx(X,{})})]})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-full",children:[e.jsx("div",{className:"lg:col-span-3 bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-md",children:e.jsx("div",{className:"relative w-full h-full max-h-[80vh] aspect-video",children:R?e.jsxs(e.Fragment,{children:[R.id===k?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):N?e.jsx(z,{islocal:!0,Videostream:null,Audiostream:null,stream:N,muted:!0,className:"w-full h-full object-contain rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Re=R.name)==null?void 0:Re.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:R.name})]})}):(Ee=v[R.id])!=null&&Ee.media.screen?e.jsx(z,{Videostream:v[R.id].media.screen.stream,Audiostream:v[R.id].media.audio.stream,islocal:!1,stream:null,muted:!1,className:"w-full h-full object-contain rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Oe=R.name)==null?void 0:Oe.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-lg font-medium",children:R.name})]})}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-100/70 px-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2",children:[e.jsxs("span",{className:"truncate max-w-xs",children:[R.name," ",R.id===k?"(You)":""]}),e.jsx("span",{className:"px-2 py-1 bg-green-400/80 rounded-full text-xs",children:"Screen Sharing"})]})]}):h?e.jsxs(e.Fragment,{children:[(Pe=v[h.id])!=null&&Pe.media.video&&h.isVideoOn?e.jsx(z,{Videostream:v[h.id].media.video.stream,Audiostream:v[h.id].media.audio.stream,islocal:!1,stream:null,muted:!1,className:"w-full h-full object-cover rounded-2xl"}):h.id===k?Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):c&&h.isVideoOn?e.jsx(z,{Videostream:null,Audiostream:null,islocal:!0,stream:c,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Ae=h.name)==null?void 0:Ae.charAt(0).toUpperCase())||"A"})})})}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("span",{className:"text-4xl text-gray-900 font-bold",children:((Ie=h.name)==null?void 0:Ie.charAt(0).toUpperCase())||"A"})})})}),e.jsxs("div",{className:`absolute bottom-4 left-4 ${h.isVideoOn?"bg-gray-100/70":" bg-gray-200"}  ${!h.isVideoOn||!h.isAudioOn?"pe-2 ":" pe-4"} ps-4 py-2 rounded-full text-gray-900 text-sm backdrop-blur-sm flex items-center space-x-2`,children:[e.jsxs("span",{children:[h.name," ",h.id===k?"(You)":"(Admin)"]}),!h.isVideoOn&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full",children:e.jsx(Q,{})}),!h.isAudioOn&&e.jsx("span",{className:"p-2 text-base bg-red-400/80 text-white rounded-full",children:e.jsx(X,{})})]})]}):null})}),e.jsxs("div",{className:`lg:col-span-1 flex flex-col ${L?"space-y-6":"space-y-3"}`,children:[P&&!P.isAdmin&&!P.sharingScreen&&e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):c&&j.video&&c?e.jsx(z,{Videostream:null,Audiostream:null,islocal:!0,stream:c,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:(m==null?void 0:m.charAt(0).toUpperCase())||"U"})}),e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:m})]})}),e.jsxs("div",{className:`absolute bottom-3 left-3 ${j.video&&c?"bg-gray-100/70":" bg-gray-200"} ${!j.video&&c&&!j.audio&&c?" pe-1":" pe-2"} ps-2 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2`,children:[e.jsx("span",{children:"You"}),!j.video&&c&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(Q,{})}),!j.audio&&c&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(X,{})})]})]})}),P.sharingScreen&&((Me=v[h.id])==null?void 0:Me.media.video)&&e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[Y?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsx("div",{className:"w-20 h-20 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}):v[h.id].media.video&&h.isVideoOn?e.jsx(z,{Videostream:v[h.id].media.video.stream,Audiostream:v[h.id].media.audio.stream,islocal:!1,stream:null,muted:!0,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:((ze=h.name)==null?void 0:ze.charAt(0).toUpperCase())||"A"})}),e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:h.name})]})}),e.jsxs("div",{className:"absolute bottom-3 left-3 bg-gray-100/70 px-3 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2",children:[e.jsx("span",{children:"Admin"}),!h.isVideoOn&&e.jsx("span",{className:"px-2 py-1 bg-red-400/80 rounded-full text-white text-xxs",children:e.jsx(Q,{})}),!h.isAudioOn&&e.jsx("span",{className:"px-2 py-1 bg-red-400/80 rounded-full text-white text-xxs",children:e.jsx(X,{})})]})]})}),e.jsx("div",{className:"flex-1 flex flex-col space-y-6",children:e.jsxs("div",{className:"bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-xl p-4",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold mb-4",children:["Participants (",K==null?void 0:K.length,")"]}),e.jsxs("div",{className:"space-y-4",children:[ke.map(t=>{var r,s,a;return e.jsx("div",{className:"bg-white/50 rounded-2xl overflow-hidden border border-gray-200/50 backdrop-blur-sm shadow-xl",children:e.jsxs("div",{className:"relative aspect-video",children:[t.sharingScreen?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-blue-100 to-teal-100 text-gray-900 text-center",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:t.name}),e.jsx("p",{className:"text-sm mt-1",children:"is sharing their screen"})]})}):(r=v[t.id])!=null&&r.media.video&&t.isVideoOn?e.jsx(z,{Videostream:v[t.id].media.video.stream,Audiostream:v[t.id].media.audio.stream,islocal:!1,stream:null,muted:!1,className:"w-full h-full object-cover rounded-2xl"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-200 to-teal-200 flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx("span",{className:"text-3xl text-gray-900 font-bold",children:((s=t.name)==null?void 0:s.charAt(0).toUpperCase())||"U"})}),((a=v[t.id])==null?void 0:a.media.adio)&&t.isAudioOn&&e.jsx(zr,{stream:v[t.id].media.audio.stream})]})}),e.jsxs("div",{className:`absolute bottom-3 left-3 ${t.isVideoOn?"bg-gray-100/70":"bg-gray-200"} ${t.isVideoOn&&t.isAudioOn?" pe-2":" pe-1"} ps-2 py-1 rounded-full text-gray-900 text-xs backdrop-blur-sm flex items-center space-x-2`,children:[e.jsx("span",{children:t.name}),!t.isVideoOn&&!t.shareScreen&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(Q,{})}),!t.isAudioOn&&e.jsx("span",{className:"p-1 bg-red-400/80 text-white rounded-full text-sm",children:e.jsx(X,{})})]})]})},t.id)}),ke.length===0&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"No participants on this page"})})]}),F>1&&e.jsxs("div",{className:"flex justify-between items-center space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>Te(E>1?E-1:F),className:`p-3 rounded-full bg-gray-200/50 text-gray-700 hover:bg-blue-300/50 transition-all duration-200 shadow-md ${E===1?"opacity-50 cursor-not-allowed":""}`,disabled:E===1,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("span",{className:"text-gray-700 text-sm font-medium",children:[E," / ",F]}),e.jsx("button",{onClick:()=>Te(E<F?E+1:1),className:`p-3 rounded-full bg-gray-200/50 text-gray-700 hover:bg-blue-300/50 transition-all duration-200 shadow-md ${E===F?"opacity-50 cursor-not-allowed":""}`,disabled:E===F,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]})})]})]})}),e.jsxs("div",{className:`absolute z-10 right-6 ${re?"bottom-6":"-bottom-4"} w-96 bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl transition-all duration-500 ease-in-out ${re?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200/50 bg-gray-100/50 rounded-t-2xl backdrop-blur-2xl flex justify-between items-center",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold flex items-center gap-x-2",children:[" ",e.jsx(Cr,{className:" size-5"}),e.jsx("span",{className:"mb-1",children:"Chat"})]}),e.jsx("button",{onClick:()=>pe(!1),className:"text-gray-500 hover:text-gray-900 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{ref:ne,className:"h-80 p-4 overflow-y-auto",children:xe.length===0?e.jsx("p",{className:"text-gray-500 text-center py-10",children:"No messages yet"}):xe.map((t,r)=>e.jsx("div",{className:`mb-4 ${t.senderId===k?"text-right":"text-left"}`,children:e.jsxs("div",{className:`inline-block max-w-xs px-4 py-2 rounded-xl shadow-md ${t.senderId===k?"bg-gradient-to-r from-blue-500 to-teal-500 text-white":"bg-gray-200/50 text-gray-900"}`,children:[e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[t.senderName," ",t.senderId===k&&"(You)"]}),e.jsx("p",{className:"text-sm",children:t.message})]})},r))}),e.jsx("div",{className:"p-4 border-t border-gray-200/50",children:e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:ae,onChange:t=>ye(t.target.value),className:"flex-1 bg-gray-200/50 text-gray-900 px-4 py-2 rounded-l-xl focus:outline-none focus:ring-2 focus:ring-blue-400/50 border border-gray-200/50",placeholder:"Type a message..."}),e.jsx("button",{type:"submit",onClick:ir,className:"bg-gradient-to-r from-blue-500 to-teal-500 text-white px-6 py-2 rounded-r-xl hover:from-blue-600 hover:to-teal-600 transition-all",children:"Send"})]})})]}),e.jsxs("div",{className:`absolute z-10 left-6 ${le?"bottom-6":"-bottom-4"} w-96 bg-gray-200 rounded-2xl border border-gray-200/50 shadow-2xl transition-all duration-500 ease-in-out ${le?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200/50 bg-gray-100/50 rounded-t-2xl backdrop-blur-2xl flex justify-between items-center",children:[e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold flex items-center gap-x-2",children:[" ",e.jsx(kr,{className:" size-5"}),e.jsxs("span",{className:"",children:["Participiants ",`(${T==null?void 0:T.length})`]})]}),e.jsx("button",{onClick:()=>we(!1),className:"text-gray-500 hover:text-gray-900 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:T==null?void 0:T.map((t,r)=>e.jsxs("div",{className:` flex item-center justify-between p-3 ${T.length-1===r?"border-b-0":"border-b"} border-b-gray-400`,children:[e.jsxs("div",{className:" flex items-center justify-center gap-x-1",children:[e.jsx("span",{className:" text-gray-800 font-semibold",children:t.name}),t.isAdmin&&e.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-teal-500 text-xs text-white px-3 py-1 rounded-full shadow-md",children:"Admin"}),e.jsx("span",{children:t.id===o.id&&"(You)"})]}),e.jsxs("div",{className:" flex item-center justify-center gap-x-2",children:[t.sharingScreen&&e.jsx(Tr,{className:" size-5.5 text-blue-600"}),t.isVideoOn?e.jsx($r,{className:" size-5 text-green-600"}):e.jsx(Rr,{className:" size-5 text-red-500"}),t.isAudioOn?e.jsx(Er,{className:" size-5 text-green-600"}):e.jsx(Or,{className:" size-5 text-red-500"}),t.handRaise&&e.jsx(De,{className:" size-5 text-yellow-500"})]})]},r))})]})]}),e.jsx(Mr,{peerId:k,videoUrl:We,isMuted:!j.audio,isVideoOff:!j.video,isScreenSharing:j.screen,onToggleAudio:sr,onToggleVideo:ar,onToggleScreenShare:or,onLeaveRoom:cr,onToggleChat:()=>pe(!re),showparticipants:le,onToggleparticipants:()=>we(!le),someoneshare:R,chatOpen:re,setVideoUrl:Se,handraiseoption:te,onTogglehandraise:lr,className:"bg-white/50 backdrop-blur-md border-t border-gray-200/50"}),se.length>0&&e.jsxs("div",{className:"absolute top-24 right-6 w-80 bg-white/50 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-200/50",children:e.jsxs("h3",{className:"text-gray-900 text-lg font-semibold",children:["Pending Join Requests (",se.length,")"]})}),e.jsxs("div",{className:"max-h-72 overflow-y-auto",children:[se.map(t=>e.jsxs("div",{className:"p-4 border-b border-gray-200/50 last:border-b-0 flex justify-between items-center hover:bg-gray-100/30 transition-colors",children:[e.jsx("span",{className:"text-gray-900 text-sm font-medium",children:t.name}),L&&e.jsx("button",{onClick:()=>nr(t.peerId),className:"bg-gradient-to-r from-green-400 to-teal-400 text-white px-4 py-1.5 rounded-full text-sm hover:from-green-500 hover:to-teal-500 transition-all shadow-md",children:"Admit"})]},t.peerId)),!L&&se.length>0&&e.jsx("div",{className:"p-4 text-gray-500 text-sm text-center",children:"Waiting for admin to admit these participants."})]})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-lg font-medium",children:"Waiting for admin approval..."})]})})};function Dr(){const[u,m]=n.useState(!1),[w,o]=n.useState(""),[f,x]=n.useState(""),[p,c]=n.useState(!1),I=g=>{g.preventDefault(),w&&f&&m(!0)},N=g=>{if(g.preventDefault(),f){const V=Math.random().toString(36).substring(2,7);console.log(`Room created with ID: ${V}`),o(V),c(!0),m(!0)}},b=()=>{c(!p),o("")};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(Ar,{position:"top-right"}),u?e.jsx(Vr,{roomId:w,name:f,isCreating:p}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-indigo-600",children:p?"Create Video Conference":"Join Video Conference"}),e.jsxs("form",{onSubmit:p?N:I,children:[!p&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"roomId",className:"block text-gray-700 mb-2",children:"Room ID"}),e.jsx("input",{type:"text",id:"roomId",value:w,onChange:g=>o(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter room ID",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:"Your Name"}),e.jsx("input",{type:"text",id:"name",value:f,onChange:g=>x(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your name",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition duration-300 mb-4",children:p?"Create Room":"Join Room"}),e.jsx("button",{type:"button",onClick:b,className:"w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-300 transition duration-300",children:p?"Switch to Join Room":"Switch to Create Room"})]})]})})]})}Ir.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(Dr,{})}));
