var Uy=Object.defineProperty;var am=r=>{throw TypeError(r)};var By=(r,c,o)=>c in r?Uy(r,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[c]=o;var z=(r,c,o)=>By(r,typeof c!="symbol"?c+"":c,o),rm=(r,c,o)=>c.has(r)||am("Cannot "+o);var _e=(r,c,o)=>(rm(r,c,"read from private field"),o?o.call(r):c.get(r)),_t=(r,c,o)=>c.has(r)?am("Cannot add the same private member more than once"):c instanceof WeakSet?c.add(r):c.set(r,o),He=(r,c,o,s)=>(rm(r,c,"write to private field"),s?s.call(r,o):c.set(r,o),o);function qy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Gd={exports:{}},us={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function Iy(){if(sm)return us;sm=1;var r=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function o(s,w,y){var _=null;if(y!==void 0&&(_=""+y),w.key!==void 0&&(_=""+w.key),"key"in w){y={};for(var T in w)T!=="key"&&(y[T]=w[T])}else y=w;return w=y.ref,{$$typeof:r,type:s,key:_,ref:w!==void 0?w:null,props:y}}return us.Fragment=c,us.jsx=o,us.jsxs=o,us}var cm;function Hy(){return cm||(cm=1,Gd.exports=Iy()),Gd.exports}var NS=Hy(),Yd={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function Vy(){if(om)return ye;om=1;var r=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),v=Symbol.iterator;function L(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,g={};function h(q,W,ae){this.props=q,this.context=W,this.refs=g,this.updater=ae||k}h.prototype.isReactComponent={},h.prototype.setState=function(q,W){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,W,"setState")},h.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function l(){}l.prototype=h.prototype;function f(q,W,ae){this.props=q,this.context=W,this.refs=g,this.updater=ae||k}var u=f.prototype=new l;u.constructor=f,A(u,h.prototype),u.isPureReactComponent=!0;var p=Array.isArray,m={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function b(q,W,ae,ne,se,Se){return ae=Se.ref,{$$typeof:r,type:q,key:W,ref:ae!==void 0?ae:null,props:Se}}function M(q,W){return b(q.type,W,void 0,void 0,void 0,q.props)}function C(q){return typeof q=="object"&&q!==null&&q.$$typeof===r}function O(q){var W={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ae){return W[ae]})}var U=/\/+/g;function H(q,W){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):W.toString(36)}function N(){}function Y(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(N,N):(q.status="pending",q.then(function(W){q.status==="pending"&&(q.status="fulfilled",q.value=W)},function(W){q.status==="pending"&&(q.status="rejected",q.reason=W)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Z(q,W,ae,ne,se){var Se=typeof q;(Se==="undefined"||Se==="boolean")&&(q=null);var me=!1;if(q===null)me=!0;else switch(Se){case"bigint":case"string":case"number":me=!0;break;case"object":switch(q.$$typeof){case r:case c:me=!0;break;case D:return me=q._init,Z(me(q._payload),W,ae,ne,se)}}if(me)return se=se(q),me=ne===""?"."+H(q,0):ne,p(se)?(ae="",me!=null&&(ae=me.replace(U,"$&/")+"/"),Z(se,W,ae,"",function(Et){return Et})):se!=null&&(C(se)&&(se=M(se,ae+(se.key==null||q&&q.key===se.key?"":(""+se.key).replace(U,"$&/")+"/")+me)),W.push(se)),1;me=0;var it=ne===""?".":ne+":";if(p(q))for(var ke=0;ke<q.length;ke++)ne=q[ke],Se=it+H(ne,ke),me+=Z(ne,W,ae,Se,se);else if(ke=L(q),typeof ke=="function")for(q=ke.call(q),ke=0;!(ne=q.next()).done;)ne=ne.value,Se=it+H(ne,ke++),me+=Z(ne,W,ae,Se,se);else if(Se==="object"){if(typeof q.then=="function")return Z(Y(q),W,ae,ne,se);throw W=String(q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return me}function j(q,W,ae){if(q==null)return q;var ne=[],se=0;return Z(q,ne,"","",function(Se){return W.call(ae,Se,se++)}),ne}function V(q){if(q._status===-1){var W=q._result;W=W(),W.then(function(ae){(q._status===0||q._status===-1)&&(q._status=1,q._result=ae)},function(ae){(q._status===0||q._status===-1)&&(q._status=2,q._result=ae)}),q._status===-1&&(q._status=0,q._result=W)}if(q._status===1)return q._result.default;throw q._result}var te=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function le(){}return ye.Children={map:j,forEach:function(q,W,ae){j(q,function(){W.apply(this,arguments)},ae)},count:function(q){var W=0;return j(q,function(){W++}),W},toArray:function(q){return j(q,function(W){return W})||[]},only:function(q){if(!C(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},ye.Component=h,ye.Fragment=o,ye.Profiler=w,ye.PureComponent=f,ye.StrictMode=s,ye.Suspense=E,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=m,ye.__COMPILER_RUNTIME={__proto__:null,c:function(q){return m.H.useMemoCache(q)}},ye.cache=function(q){return function(){return q.apply(null,arguments)}},ye.cloneElement=function(q,W,ae){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ne=A({},q.props),se=q.key,Se=void 0;if(W!=null)for(me in W.ref!==void 0&&(Se=void 0),W.key!==void 0&&(se=""+W.key),W)!S.call(W,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&W.ref===void 0||(ne[me]=W[me]);var me=arguments.length-2;if(me===1)ne.children=ae;else if(1<me){for(var it=Array(me),ke=0;ke<me;ke++)it[ke]=arguments[ke+2];ne.children=it}return b(q.type,se,void 0,void 0,Se,ne)},ye.createContext=function(q){return q={$$typeof:_,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:y,_context:q},q},ye.createElement=function(q,W,ae){var ne,se={},Se=null;if(W!=null)for(ne in W.key!==void 0&&(Se=""+W.key),W)S.call(W,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(se[ne]=W[ne]);var me=arguments.length-2;if(me===1)se.children=ae;else if(1<me){for(var it=Array(me),ke=0;ke<me;ke++)it[ke]=arguments[ke+2];se.children=it}if(q&&q.defaultProps)for(ne in me=q.defaultProps,me)se[ne]===void 0&&(se[ne]=me[ne]);return b(q,Se,void 0,void 0,null,se)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(q){return{$$typeof:T,render:q}},ye.isValidElement=C,ye.lazy=function(q){return{$$typeof:D,_payload:{_status:-1,_result:q},_init:V}},ye.memo=function(q,W){return{$$typeof:R,type:q,compare:W===void 0?null:W}},ye.startTransition=function(q){var W=m.T,ae={};m.T=ae;try{var ne=q(),se=m.S;se!==null&&se(ae,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(le,te)}catch(Se){te(Se)}finally{m.T=W}},ye.unstable_useCacheRefresh=function(){return m.H.useCacheRefresh()},ye.use=function(q){return m.H.use(q)},ye.useActionState=function(q,W,ae){return m.H.useActionState(q,W,ae)},ye.useCallback=function(q,W){return m.H.useCallback(q,W)},ye.useContext=function(q){return m.H.useContext(q)},ye.useDebugValue=function(){},ye.useDeferredValue=function(q,W){return m.H.useDeferredValue(q,W)},ye.useEffect=function(q,W,ae){var ne=m.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(q,W)},ye.useId=function(){return m.H.useId()},ye.useImperativeHandle=function(q,W,ae){return m.H.useImperativeHandle(q,W,ae)},ye.useInsertionEffect=function(q,W){return m.H.useInsertionEffect(q,W)},ye.useLayoutEffect=function(q,W){return m.H.useLayoutEffect(q,W)},ye.useMemo=function(q,W){return m.H.useMemo(q,W)},ye.useOptimistic=function(q,W){return m.H.useOptimistic(q,W)},ye.useReducer=function(q,W,ae){return m.H.useReducer(q,W,ae)},ye.useRef=function(q){return m.H.useRef(q)},ye.useState=function(q){return m.H.useState(q)},ye.useSyncExternalStore=function(q,W,ae){return m.H.useSyncExternalStore(q,W,ae)},ye.useTransition=function(){return m.H.useTransition()},ye.version="19.1.0",ye}var lm;function bu(){return lm||(lm=1,Yd.exports=Vy()),Yd.exports}var qe=bu();const ua=qy(qe);var Qd={exports:{}},fs={},Fd={exports:{}},Kd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm;function Gy(){return dm||(dm=1,function(r){function c(j,V){var te=j.length;j.push(V);e:for(;0<te;){var le=te-1>>>1,q=j[le];if(0<w(q,V))j[le]=V,j[te]=q,te=le;else break e}}function o(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var V=j[0],te=j.pop();if(te!==V){j[0]=te;e:for(var le=0,q=j.length,W=q>>>1;le<W;){var ae=2*(le+1)-1,ne=j[ae],se=ae+1,Se=j[se];if(0>w(ne,te))se<q&&0>w(Se,ne)?(j[le]=Se,j[se]=te,le=se):(j[le]=ne,j[ae]=te,le=ae);else if(se<q&&0>w(Se,te))j[le]=Se,j[se]=te,le=se;else break e}}return V}function w(j,V){var te=j.sortIndex-V.sortIndex;return te!==0?te:j.id-V.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;r.unstable_now=function(){return y.now()}}else{var _=Date,T=_.now();r.unstable_now=function(){return _.now()-T}}var E=[],R=[],D=1,v=null,L=3,k=!1,A=!1,g=!1,h=!1,l=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;function p(j){for(var V=o(R);V!==null;){if(V.callback===null)s(R);else if(V.startTime<=j)s(R),V.sortIndex=V.expirationTime,c(E,V);else break;V=o(R)}}function m(j){if(g=!1,p(j),!A)if(o(E)!==null)A=!0,S||(S=!0,H());else{var V=o(R);V!==null&&Z(m,V.startTime-j)}}var S=!1,b=-1,M=5,C=-1;function O(){return h?!0:!(r.unstable_now()-C<M)}function U(){if(h=!1,S){var j=r.unstable_now();C=j;var V=!0;try{e:{A=!1,g&&(g=!1,f(b),b=-1),k=!0;var te=L;try{t:{for(p(j),v=o(E);v!==null&&!(v.expirationTime>j&&O());){var le=v.callback;if(typeof le=="function"){v.callback=null,L=v.priorityLevel;var q=le(v.expirationTime<=j);if(j=r.unstable_now(),typeof q=="function"){v.callback=q,p(j),V=!0;break t}v===o(E)&&s(E),p(j)}else s(E);v=o(E)}if(v!==null)V=!0;else{var W=o(R);W!==null&&Z(m,W.startTime-j),V=!1}}break e}finally{v=null,L=te,k=!1}V=void 0}}finally{V?H():S=!1}}}var H;if(typeof u=="function")H=function(){u(U)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Y=N.port2;N.port1.onmessage=U,H=function(){Y.postMessage(null)}}else H=function(){l(U,0)};function Z(j,V){b=l(function(){j(r.unstable_now())},V)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return L},r.unstable_next=function(j){switch(L){case 1:case 2:case 3:var V=3;break;default:V=L}var te=L;L=V;try{return j()}finally{L=te}},r.unstable_requestPaint=function(){h=!0},r.unstable_runWithPriority=function(j,V){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var te=L;L=j;try{return V()}finally{L=te}},r.unstable_scheduleCallback=function(j,V,te){var le=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?le+te:le):te=le,j){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=te+q,j={id:D++,callback:V,priorityLevel:j,startTime:te,expirationTime:q,sortIndex:-1},te>le?(j.sortIndex=te,c(R,j),o(E)===null&&j===o(R)&&(g?(f(b),b=-1):g=!0,Z(m,te-le))):(j.sortIndex=q,c(E,j),A||k||(A=!0,S||(S=!0,H()))),j},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(j){var V=L;return function(){var te=L;L=V;try{return j.apply(this,arguments)}finally{L=te}}}}(Kd)),Kd}var um;function Yy(){return um||(um=1,Fd.exports=Gy()),Fd.exports}var Xd={exports:{}},Rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function Qy(){if(fm)return Rt;fm=1;var r=bu();function c(E){var R="https://react.dev/errors/"+E;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)R+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+E+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(c(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},w=Symbol.for("react.portal");function y(E,R,D){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w,key:v==null?null:""+v,children:E,containerInfo:R,implementation:D}}var _=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(E,R){if(E==="font")return"";if(typeof R=="string")return R==="use-credentials"?R:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Rt.createPortal=function(E,R){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)throw Error(c(299));return y(E,R,null,D)},Rt.flushSync=function(E){var R=_.T,D=s.p;try{if(_.T=null,s.p=2,E)return E()}finally{_.T=R,s.p=D,s.d.f()}},Rt.preconnect=function(E,R){typeof E=="string"&&(R?(R=R.crossOrigin,R=typeof R=="string"?R==="use-credentials"?R:"":void 0):R=null,s.d.C(E,R))},Rt.prefetchDNS=function(E){typeof E=="string"&&s.d.D(E)},Rt.preinit=function(E,R){if(typeof E=="string"&&R&&typeof R.as=="string"){var D=R.as,v=T(D,R.crossOrigin),L=typeof R.integrity=="string"?R.integrity:void 0,k=typeof R.fetchPriority=="string"?R.fetchPriority:void 0;D==="style"?s.d.S(E,typeof R.precedence=="string"?R.precedence:void 0,{crossOrigin:v,integrity:L,fetchPriority:k}):D==="script"&&s.d.X(E,{crossOrigin:v,integrity:L,fetchPriority:k,nonce:typeof R.nonce=="string"?R.nonce:void 0})}},Rt.preinitModule=function(E,R){if(typeof E=="string")if(typeof R=="object"&&R!==null){if(R.as==null||R.as==="script"){var D=T(R.as,R.crossOrigin);s.d.M(E,{crossOrigin:D,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0})}}else R==null&&s.d.M(E)},Rt.preload=function(E,R){if(typeof E=="string"&&typeof R=="object"&&R!==null&&typeof R.as=="string"){var D=R.as,v=T(D,R.crossOrigin);s.d.L(E,D,{crossOrigin:v,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0,type:typeof R.type=="string"?R.type:void 0,fetchPriority:typeof R.fetchPriority=="string"?R.fetchPriority:void 0,referrerPolicy:typeof R.referrerPolicy=="string"?R.referrerPolicy:void 0,imageSrcSet:typeof R.imageSrcSet=="string"?R.imageSrcSet:void 0,imageSizes:typeof R.imageSizes=="string"?R.imageSizes:void 0,media:typeof R.media=="string"?R.media:void 0})}},Rt.preloadModule=function(E,R){if(typeof E=="string")if(R){var D=T(R.as,R.crossOrigin);s.d.m(E,{as:typeof R.as=="string"&&R.as!=="script"?R.as:void 0,crossOrigin:D,integrity:typeof R.integrity=="string"?R.integrity:void 0})}else s.d.m(E)},Rt.requestFormReset=function(E){s.d.r(E)},Rt.unstable_batchedUpdates=function(E,R){return E(R)},Rt.useFormState=function(E,R,D){return _.H.useFormState(E,R,D)},Rt.useFormStatus=function(){return _.H.useHostTransitionStatus()},Rt.version="19.1.0",Rt}var pm;function Fy(){if(pm)return Xd.exports;pm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(c){console.error(c)}}return r(),Xd.exports=Qy(),Xd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm;function Ky(){if(hm)return fs;hm=1;var r=Yy(),c=bu(),o=Fy();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function w(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function y(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function _(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function T(e){if(y(e)!==e)throw Error(s(188))}function E(e){var t=e.alternate;if(!t){if(t=y(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,n=t;;){var a=i.return;if(a===null)break;var d=a.alternate;if(d===null){if(n=a.return,n!==null){i=n;continue}break}if(a.child===d.child){for(d=a.child;d;){if(d===i)return T(a),e;if(d===n)return T(a),t;d=d.sibling}throw Error(s(188))}if(i.return!==n.return)i=a,n=d;else{for(var x=!1,P=a.child;P;){if(P===i){x=!0,i=a,n=d;break}if(P===n){x=!0,n=a,i=d;break}P=P.sibling}if(!x){for(P=d.child;P;){if(P===i){x=!0,i=d,n=a;break}if(P===n){x=!0,n=d,i=a;break}P=P.sibling}if(!x)throw Error(s(189))}}if(i.alternate!==n)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function R(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=R(e),t!==null)return t;e=e.sibling}return null}var D=Object.assign,v=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),f=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var N=Symbol.for("react.client.reference");function Y(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case h:return"Profiler";case g:return"StrictMode";case m:return"Suspense";case S:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case u:return(e.displayName||"Context")+".Provider";case f:return(e._context.displayName||"Context")+".Consumer";case p:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case b:return t=e.displayName||null,t!==null?t:Y(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return Y(e(t))}catch{}}return null}var Z=Array.isArray,j=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},le=[],q=-1;function W(e){return{current:e}}function ae(e){0>q||(e.current=le[q],le[q]=null,q--)}function ne(e,t){q++,le[q]=e.current,e.current=t}var se=W(null),Se=W(null),me=W(null),it=W(null);function ke(e,t){switch(ne(me,t),ne(Se,e),ne(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?kh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=kh(t),e=Ah(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(se),ne(se,e)}function Et(){ae(se),ae(Se),ae(me)}function rr(e){e.memoizedState!==null&&ne(it,e);var t=se.current,i=Ah(t,e.type);t!==i&&(ne(Se,e),ne(se,i))}function Ln(e){Se.current===e&&(ae(se),ae(Se)),it.current===e&&(ae(it),ss._currentValue=te)}var sr=Object.prototype.hasOwnProperty,ha=r.unstable_scheduleCallback,Fi=r.unstable_cancelCallback,Ki=r.unstable_shouldYield,Fs=r.unstable_requestPaint,Bt=r.unstable_now,Di=r.unstable_getCurrentPriorityLevel,cr=r.unstable_ImmediatePriority,or=r.unstable_UserBlockingPriority,On=r.unstable_NormalPriority,ma=r.unstable_LowPriority,ga=r.unstable_IdlePriority,lr=r.log,dr=r.unstable_setDisableYieldValue,Xi=null,pt=null;function Ot(e){if(typeof lr=="function"&&dr(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(Xi,e)}catch{}}var yt=Math.clz32?Math.clz32:fr,kn=Math.log,ur=Math.LN2;function fr(e){return e>>>=0,e===0?32:31-(kn(e)/ur|0)|0}var An=256,Pn=4194304;function bt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function va(e,t,i){var n=e.pendingLanes;if(n===0)return 0;var a=0,d=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var P=n&134217727;return P!==0?(n=P&~d,n!==0?a=bt(n):(x&=P,x!==0?a=bt(x):i||(i=P&~e,i!==0&&(a=bt(i))))):(P=n&~d,P!==0?a=bt(P):x!==0?a=bt(x):i||(i=n&~e,i!==0&&(a=bt(i)))),a===0?0:t!==0&&t!==a&&(t&d)===0&&(d=a&-a,i=t&-t,d>=i||d===32&&(i&4194048)!==0)?t:a}function ai(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Nn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _a(){var e=An;return An<<=1,(An&4194048)===0&&(An=256),e}function pr(){var e=Pn;return Pn<<=1,(Pn&62914560)===0&&(Pn=4194304),e}function vi(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ri(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function hr(e,t,i,n,a,d){var x=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var P=e.entanglements,B=e.expirationTimes,F=e.hiddenUpdates;for(i=x&~i;0<i;){var $=31-yt(i),ee=1<<$;P[$]=0,B[$]=-1;var K=F[$];if(K!==null)for(F[$]=null,$=0;$<K.length;$++){var X=K[$];X!==null&&(X.lane&=-536870913)}i&=~ee}n!==0&&mr(e,n,0),d!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=d&~(x&~t))}function mr(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-yt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|i&4194090}function ht(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-yt(i),a=1<<n;a&t|e[n]&t&&(e[n]|=t),i&=~a}}function Kt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function gr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function jn(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:Jh(e.type))}function vr(e,t){var i=V.p;try{return V.p=e,t()}finally{V.p=i}}var qt=Math.random().toString(36).slice(2),Ge="__reactFiber$"+qt,st="__reactProps$"+qt,St="__reactContainer$"+qt,zn="__reactEvents$"+qt,si="__reactListeners$"+qt,Zi="__reactHandles$"+qt,$i="__reactResources$"+qt,ci="__reactMarker$"+qt;function Un(e){delete e[Ge],delete e[st],delete e[zn],delete e[si],delete e[Zi]}function Dt(e){var t=e[Ge];if(t)return t;for(var i=e.parentNode;i;){if(t=i[St]||i[Ge]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=zh(e);e!==null;){if(i=e[Ge])return i;e=zh(e)}return t}e=i,i=e.parentNode}return null}function xi(e){if(e=e[Ge]||e[St]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ji(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Mi(e){var t=e[$i];return t||(t=e[$i]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ye(e){e[ci]=!0}var Ks=new Set,_r={};function _i(e,t){ct(e,t),ct(e+"Capture",t)}function ct(e,t){for(_r[e]=t,e=0;e<t.length;e++)Ks.add(t[e])}var Wi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bn={},ie={};function ce(e){return sr.call(ie,e)?!0:sr.call(Bn,e)?!1:Wi.test(e)?ie[e]=!0:(Bn[e]=!0,!1)}function re(e,t,i){if(ce(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Ce(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function de(e,t,i,n){if(n===null)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+n)}}var Le,fe;function Ee(e){if(Le===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Le=t&&t[1]||"",fe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+e+fe}var ve=!1;function Ie(e,t){if(!e||ve)return"";ve=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(X){var K=X}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(X){K=X}e.call(ee.prototype)}}else{try{throw Error()}catch(X){K=X}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=n.DetermineComponentFrameRoot(),x=d[0],P=d[1];if(x&&P){var B=x.split(`
`),F=P.split(`
`);for(a=n=0;n<B.length&&!B[n].includes("DetermineComponentFrameRoot");)n++;for(;a<F.length&&!F[a].includes("DetermineComponentFrameRoot");)a++;if(n===B.length||a===F.length)for(n=B.length-1,a=F.length-1;1<=n&&0<=a&&B[n]!==F[a];)a--;for(;1<=n&&0<=a;n--,a--)if(B[n]!==F[a]){if(n!==1||a!==1)do if(n--,a--,0>a||B[n]!==F[a]){var $=`
`+B[n].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=n&&0<=a);break}}}finally{ve=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ee(i):""}function oi(e){switch(e.tag){case 26:case 27:case 5:return Ee(e.type);case 16:return Ee("Lazy");case 13:return Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Ie(e.type,!1);case 11:return Ie(e.type.render,!1);case 1:return Ie(e.type,!0);case 31:return Ee("Activity");default:return""}}function li(e){try{var t="";do t+=oi(e),e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qn(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xs(e){var t=qn(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(x){n=""+x,d.call(this,x)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(x){n=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function en(e){e._valueTracker||(e._valueTracker=Xs(e))}function ya(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=qn(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function ba(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var In=/[\n"\\]/g;function kt(e){return e.replace(In,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Io(e,t,i,n,a,d,x,P){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),t!=null?x==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ot(t)):e.value!==""+ot(t)&&(e.value=""+ot(t)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),t!=null?Ho(e,x,ot(t)):i!=null?Ho(e,x,ot(i)):n!=null&&e.removeAttribute("value"),a==null&&d!=null&&(e.defaultChecked=!!d),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?e.name=""+ot(P):e.removeAttribute("name")}function xu(e,t,i,n,a,d,x,P){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||t!=null))return;i=i!=null?""+ot(i):"",t=t!=null?""+ot(t):i,P||t===e.value||(e.value=t),e.defaultValue=t}n=n??a,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=P?e.checked:!!n,e.defaultChecked=!!n,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x)}function Ho(e,t,i){t==="number"&&ba(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Sa(e,t,i,n){if(e=e.options,t){t={};for(var a=0;a<i.length;a++)t["$"+i[a]]=!0;for(i=0;i<e.length;i++)a=t.hasOwnProperty("$"+e[i].value),e[i].selected!==a&&(e[i].selected=a),a&&n&&(e[i].defaultSelected=!0)}else{for(i=""+ot(i),t=null,a=0;a<e.length;a++){if(e[a].value===i){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Mu(e,t,i){if(t!=null&&(t=""+ot(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+ot(i):""}function Lu(e,t,i,n){if(t==null){if(n!=null){if(i!=null)throw Error(s(92));if(Z(n)){if(1<n.length)throw Error(s(93));n=n[0]}i=n}i==null&&(i=""),t=i}i=ot(t),e.defaultValue=i,n=e.textContent,n===i&&n!==""&&n!==null&&(e.value=n)}function wa(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Nv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ou(e,t,i){var n=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,i):typeof i!="number"||i===0||Nv.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function ku(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var n in i)!i.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&i[a]!==n&&Ou(e,a,n)}else for(var d in t)t.hasOwnProperty(d)&&Ou(e,d,t[d])}function Vo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(e){return zv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Go=null;function Yo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ra=null,Ta=null;function Au(e){var t=xi(e);if(t&&(e=t.stateNode)){var i=e[st]||null;e:switch(e=t.stateNode,t.type){case"input":if(Io(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+kt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var a=n[st]||null;if(!a)throw Error(s(90));Io(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<i.length;t++)n=i[t],n.form===e.form&&ya(n)}break e;case"textarea":Mu(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Sa(e,!!i.multiple,t,!1)}}}var Qo=!1;function Pu(e,t,i){if(Qo)return e(t,i);Qo=!0;try{var n=e(t);return n}finally{if(Qo=!1,(Ra!==null||Ta!==null)&&(Nc(),Ra&&(t=Ra,e=Ta,Ta=Ra=null,Au(t),e)))for(t=0;t<e.length;t++)Au(e[t])}}function yr(e,t){var i=e.stateNode;if(i===null)return null;var n=i[st]||null;if(n===null)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fo=!1;if(Li)try{var br={};Object.defineProperty(br,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{Fo=!1}var tn=null,Ko=null,$s=null;function Nu(){if($s)return $s;var e,t=Ko,i=t.length,n,a="value"in tn?tn.value:tn.textContent,d=a.length;for(e=0;e<i&&t[e]===a[e];e++);var x=i-e;for(n=1;n<=x&&t[i-n]===a[d-n];n++);return $s=a.slice(e,1<n?1-n:void 0)}function Js(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function ju(){return!1}function At(e){function t(i,n,a,d,x){this._reactName=i,this._targetInst=a,this.type=n,this.nativeEvent=d,this.target=x,this.currentTarget=null;for(var P in e)e.hasOwnProperty(P)&&(i=e[P],this[P]=i?i(d):d[P]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ws:ju,this.isPropagationStopped=ju,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var Hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ec=At(Hn),Sr=D({},Hn,{view:0,detail:0}),Uv=At(Sr),Xo,Zo,wr,tc=D({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wr&&(wr&&e.type==="mousemove"?(Xo=e.screenX-wr.screenX,Zo=e.screenY-wr.screenY):Zo=Xo=0,wr=e),Xo)},movementY:function(e){return"movementY"in e?e.movementY:Zo}}),zu=At(tc),Bv=D({},tc,{dataTransfer:0}),qv=At(Bv),Iv=D({},Sr,{relatedTarget:0}),$o=At(Iv),Hv=D({},Hn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vv=At(Hv),Gv=D({},Hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yv=At(Gv),Qv=D({},Hn,{data:0}),Uu=At(Qv),Fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xv[e])?!!t[e]:!1}function Jo(){return Zv}var $v=D({},Sr,{key:function(e){if(e.key){var t=Fv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jo,charCode:function(e){return e.type==="keypress"?Js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jv=At($v),Wv=D({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bu=At(Wv),e_=D({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jo}),t_=At(e_),i_=D({},Hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),n_=At(i_),a_=D({},tc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),r_=At(a_),s_=D({},Hn,{newState:0,oldState:0}),c_=At(s_),o_=[9,13,27,32],Wo=Li&&"CompositionEvent"in window,Rr=null;Li&&"documentMode"in document&&(Rr=document.documentMode);var l_=Li&&"TextEvent"in window&&!Rr,qu=Li&&(!Wo||Rr&&8<Rr&&11>=Rr),Iu=" ",Hu=!1;function Vu(e,t){switch(e){case"keyup":return o_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ca=!1;function d_(e,t){switch(e){case"compositionend":return Gu(t);case"keypress":return t.which!==32?null:(Hu=!0,Iu);case"textInput":return e=t.data,e===Iu&&Hu?null:e;default:return null}}function u_(e,t){if(Ca)return e==="compositionend"||!Wo&&Vu(e,t)?(e=Nu(),$s=Ko=tn=null,Ca=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qu&&t.locale!=="ko"?null:t.data;default:return null}}var f_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!f_[e.type]:t==="textarea"}function Qu(e,t,i,n){Ra?Ta?Ta.push(n):Ta=[n]:Ra=n,t=Ic(t,"onChange"),0<t.length&&(i=new ec("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Tr=null,Cr=null;function p_(e){Dh(e,0)}function ic(e){var t=Ji(e);if(ya(t))return e}function Fu(e,t){if(e==="change")return t}var Ku=!1;if(Li){var el;if(Li){var tl="oninput"in document;if(!tl){var Xu=document.createElement("div");Xu.setAttribute("oninput","return;"),tl=typeof Xu.oninput=="function"}el=tl}else el=!1;Ku=el&&(!document.documentMode||9<document.documentMode)}function Zu(){Tr&&(Tr.detachEvent("onpropertychange",$u),Cr=Tr=null)}function $u(e){if(e.propertyName==="value"&&ic(Cr)){var t=[];Qu(t,Cr,e,Yo(e)),Pu(p_,t)}}function h_(e,t,i){e==="focusin"?(Zu(),Tr=t,Cr=i,Tr.attachEvent("onpropertychange",$u)):e==="focusout"&&Zu()}function m_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ic(Cr)}function g_(e,t){if(e==="click")return ic(t)}function v_(e,t){if(e==="input"||e==="change")return ic(t)}function __(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:__;function Er(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var a=i[n];if(!sr.call(t,a)||!It(e[a],t[a]))return!1}return!0}function Ju(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wu(e,t){var i=Ju(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ju(i)}}function ef(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ef(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ba(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ba(e.document)}return t}function il(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var y_=Li&&"documentMode"in document&&11>=document.documentMode,Ea=null,nl=null,Dr=null,al=!1;function nf(e,t,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;al||Ea==null||Ea!==ba(n)||(n=Ea,"selectionStart"in n&&il(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Dr&&Er(Dr,n)||(Dr=n,n=Ic(nl,"onSelect"),0<n.length&&(t=new ec("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=Ea)))}function Vn(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Da={animationend:Vn("Animation","AnimationEnd"),animationiteration:Vn("Animation","AnimationIteration"),animationstart:Vn("Animation","AnimationStart"),transitionrun:Vn("Transition","TransitionRun"),transitionstart:Vn("Transition","TransitionStart"),transitioncancel:Vn("Transition","TransitionCancel"),transitionend:Vn("Transition","TransitionEnd")},rl={},af={};Li&&(af=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Gn(e){if(rl[e])return rl[e];if(!Da[e])return e;var t=Da[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in af)return rl[e]=t[i];return e}var rf=Gn("animationend"),sf=Gn("animationiteration"),cf=Gn("animationstart"),b_=Gn("transitionrun"),S_=Gn("transitionstart"),w_=Gn("transitioncancel"),of=Gn("transitionend"),lf=new Map,sl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sl.push("scrollEnd");function di(e,t){lf.set(e,t),_i(t,[e])}var df=new WeakMap;function Xt(e,t){if(typeof e=="object"&&e!==null){var i=df.get(e);return i!==void 0?i:(t={value:e,source:t,stack:li(t)},df.set(e,t),t)}return{value:e,source:t,stack:li(t)}}var Zt=[],xa=0,cl=0;function nc(){for(var e=xa,t=cl=xa=0;t<e;){var i=Zt[t];Zt[t++]=null;var n=Zt[t];Zt[t++]=null;var a=Zt[t];Zt[t++]=null;var d=Zt[t];if(Zt[t++]=null,n!==null&&a!==null){var x=n.pending;x===null?a.next=a:(a.next=x.next,x.next=a),n.pending=a}d!==0&&uf(i,a,d)}}function ac(e,t,i,n){Zt[xa++]=e,Zt[xa++]=t,Zt[xa++]=i,Zt[xa++]=n,cl|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function ol(e,t,i,n){return ac(e,t,i,n),rc(e)}function Ma(e,t){return ac(e,null,null,t),rc(e)}function uf(e,t,i){e.lanes|=i;var n=e.alternate;n!==null&&(n.lanes|=i);for(var a=!1,d=e.return;d!==null;)d.childLanes|=i,n=d.alternate,n!==null&&(n.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(a=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,a&&t!==null&&(a=31-yt(i),e=d.hiddenUpdates,n=e[a],n===null?e[a]=[t]:n.push(t),t.lane=i|536870912),d):null}function rc(e){if(50<Jr)throw Jr=0,hd=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var La={};function R_(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(e,t,i,n){return new R_(e,t,i,n)}function ll(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oi(e,t){var i=e.alternate;return i===null?(i=Ht(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function ff(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function sc(e,t,i,n,a,d){var x=0;if(n=e,typeof e=="function")ll(e)&&(x=1);else if(typeof e=="string")x=Cy(e,i,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=Ht(31,i,t,a),e.elementType=C,e.lanes=d,e;case A:return Yn(i.children,a,d,t);case g:x=8,a|=24;break;case h:return e=Ht(12,i,t,a|2),e.elementType=h,e.lanes=d,e;case m:return e=Ht(13,i,t,a),e.elementType=m,e.lanes=d,e;case S:return e=Ht(19,i,t,a),e.elementType=S,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case l:case u:x=10;break e;case f:x=9;break e;case p:x=11;break e;case b:x=14;break e;case M:x=16,n=null;break e}x=29,i=Error(s(130,e===null?"null":typeof e,"")),n=null}return t=Ht(x,i,t,a),t.elementType=e,t.type=n,t.lanes=d,t}function Yn(e,t,i,n){return e=Ht(7,e,n,t),e.lanes=i,e}function dl(e,t,i){return e=Ht(6,e,null,t),e.lanes=i,e}function ul(e,t,i){return t=Ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Oa=[],ka=0,cc=null,oc=0,$t=[],Jt=0,Qn=null,ki=1,Ai="";function Fn(e,t){Oa[ka++]=oc,Oa[ka++]=cc,cc=e,oc=t}function pf(e,t,i){$t[Jt++]=ki,$t[Jt++]=Ai,$t[Jt++]=Qn,Qn=e;var n=ki;e=Ai;var a=32-yt(n)-1;n&=~(1<<a),i+=1;var d=32-yt(t)+a;if(30<d){var x=a-a%5;d=(n&(1<<x)-1).toString(32),n>>=x,a-=x,ki=1<<32-yt(t)+a|i<<a|n,Ai=d+e}else ki=1<<d|i<<a|n,Ai=e}function fl(e){e.return!==null&&(Fn(e,1),pf(e,1,0))}function pl(e){for(;e===cc;)cc=Oa[--ka],Oa[ka]=null,oc=Oa[--ka],Oa[ka]=null;for(;e===Qn;)Qn=$t[--Jt],$t[Jt]=null,Ai=$t[--Jt],$t[Jt]=null,ki=$t[--Jt],$t[Jt]=null}var xt=null,Fe=null,Oe=!1,Kn=null,yi=!1,hl=Error(s(519));function Xn(e){var t=Error(s(418,""));throw Lr(Xt(t,e)),hl}function hf(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[Ge]=e,t[st]=n,i){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(i=0;i<es.length;i++)Te(es[i],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),xu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),en(t);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),Lu(t,n.value,n.defaultValue,n.children),en(t)}i=n.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||n.suppressHydrationWarning===!0||Oh(t.textContent,i)?(n.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),n.onScroll!=null&&Te("scroll",t),n.onScrollEnd!=null&&Te("scrollend",t),n.onClick!=null&&(t.onclick=Hc),t=!0):t=!1,t||Xn(e)}function mf(e){for(xt=e.return;xt;)switch(xt.tag){case 5:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:xt=xt.return}}function xr(e){if(e!==xt)return!1;if(!Oe)return mf(e),Oe=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ld(e.type,e.memoizedProps)),i=!i),i&&Fe&&Xn(e),mf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(t===0){Fe=fi(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++;e=e.nextSibling}Fe=null}}else t===27?(t=Fe,_n(e.type)?(e=Pd,Pd=null,Fe=e):Fe=t):Fe=xt?fi(e.stateNode.nextSibling):null;return!0}function Mr(){Fe=xt=null,Oe=!1}function gf(){var e=Kn;return e!==null&&(jt===null?jt=e:jt.push.apply(jt,e),Kn=null),e}function Lr(e){Kn===null?Kn=[e]:Kn.push(e)}var ml=W(null),Zn=null,Pi=null;function nn(e,t,i){ne(ml,t._currentValue),t._currentValue=i}function Ni(e){e._currentValue=ml.current,ae(ml)}function gl(e,t,i){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function vl(e,t,i,n){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var d=a.dependencies;if(d!==null){var x=a.child;d=d.firstContext;e:for(;d!==null;){var P=d;d=a;for(var B=0;B<t.length;B++)if(P.context===t[B]){d.lanes|=i,P=d.alternate,P!==null&&(P.lanes|=i),gl(d.return,i,e),n||(x=null);break e}d=P.next}}else if(a.tag===18){if(x=a.return,x===null)throw Error(s(341));x.lanes|=i,d=x.alternate,d!==null&&(d.lanes|=i),gl(x,i,e),x=null}else x=a.child;if(x!==null)x.return=a;else for(x=a;x!==null;){if(x===e){x=null;break}if(a=x.sibling,a!==null){a.return=x.return,x=a;break}x=x.return}a=x}}function Or(e,t,i,n){e=null;for(var a=t,d=!1;a!==null;){if(!d){if((a.flags&524288)!==0)d=!0;else if((a.flags&262144)!==0)break}if(a.tag===10){var x=a.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var P=a.type;It(a.pendingProps.value,x.value)||(e!==null?e.push(P):e=[P])}}else if(a===it.current){if(x=a.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(ss):e=[ss])}a=a.return}e!==null&&vl(t,e,i,n),t.flags|=262144}function lc(e){for(e=e.firstContext;e!==null;){if(!It(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $n(e){Zn=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function wt(e){return vf(Zn,e)}function dc(e,t){return Zn===null&&$n(e),vf(e,t)}function vf(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Pi===null){if(e===null)throw Error(s(308));Pi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Pi=Pi.next=t;return i}var T_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},C_=r.unstable_scheduleCallback,E_=r.unstable_NormalPriority,nt={$$typeof:u,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _l(){return{controller:new T_,data:new Map,refCount:0}}function kr(e){e.refCount--,e.refCount===0&&C_(E_,function(){e.controller.abort()})}var Ar=null,yl=0,Aa=0,Pa=null;function D_(e,t){if(Ar===null){var i=Ar=[];yl=0,Aa=Sd(),Pa={status:"pending",value:void 0,then:function(n){i.push(n)}}}return yl++,t.then(_f,_f),t}function _f(){if(--yl===0&&Ar!==null){Pa!==null&&(Pa.status="fulfilled");var e=Ar;Ar=null,Aa=0,Pa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function x_(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(a){i.push(a)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var a=0;a<i.length;a++)(0,i[a])(t)},function(a){for(n.status="rejected",n.reason=a,a=0;a<i.length;a++)(0,i[a])(void 0)}),n}var yf=j.S;j.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&D_(e,t),yf!==null&&yf(e,t)};var Jn=W(null);function bl(){var e=Jn.current;return e!==null?e:Be.pooledCache}function uc(e,t){t===null?ne(Jn,Jn.current):ne(Jn,t.pool)}function bf(){var e=bl();return e===null?null:{parent:nt._currentValue,pool:e}}var Pr=Error(s(460)),Sf=Error(s(474)),fc=Error(s(542)),Sl={then:function(){}};function wf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pc(){}function Rf(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(pc,pc),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cf(e),e;default:if(typeof t.status=="string")t.then(pc,pc);else{if(e=Be,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=n}},function(n){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cf(e),e}throw Nr=t,Pr}}var Nr=null;function Tf(){if(Nr===null)throw Error(s(459));var e=Nr;return Nr=null,e}function Cf(e){if(e===Pr||e===fc)throw Error(s(483))}var an=!1;function wl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function sn(e,t,i){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ae&2)!==0){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=rc(e),uf(e,null,i),t}return ac(e,n,t,i),rc(e)}function jr(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,ht(e,i)}}function Tl(e,t){var i=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var a=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var x={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?a=d=x:d=d.next=x,i=i.next}while(i!==null);d===null?a=d=t:d=d.next=t}else a=d=t;i={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:d,shared:n.shared,callbacks:n.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Cl=!1;function zr(){if(Cl){var e=Pa;if(e!==null)throw e}}function Ur(e,t,i,n){Cl=!1;var a=e.updateQueue;an=!1;var d=a.firstBaseUpdate,x=a.lastBaseUpdate,P=a.shared.pending;if(P!==null){a.shared.pending=null;var B=P,F=B.next;B.next=null,x===null?d=F:x.next=F,x=B;var $=e.alternate;$!==null&&($=$.updateQueue,P=$.lastBaseUpdate,P!==x&&(P===null?$.firstBaseUpdate=F:P.next=F,$.lastBaseUpdate=B))}if(d!==null){var ee=a.baseState;x=0,$=F=B=null,P=d;do{var K=P.lane&-536870913,X=K!==P.lane;if(X?(xe&K)===K:(n&K)===K){K!==0&&K===Aa&&(Cl=!0),$!==null&&($=$.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var ge=e,pe=P;K=t;var ze=i;switch(pe.tag){case 1:if(ge=pe.payload,typeof ge=="function"){ee=ge.call(ze,ee,K);break e}ee=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=pe.payload,K=typeof ge=="function"?ge.call(ze,ee,K):ge,K==null)break e;ee=D({},ee,K);break e;case 2:an=!0}}K=P.callback,K!==null&&(e.flags|=64,X&&(e.flags|=8192),X=a.callbacks,X===null?a.callbacks=[K]:X.push(K))}else X={lane:K,tag:P.tag,payload:P.payload,callback:P.callback,next:null},$===null?(F=$=X,B=ee):$=$.next=X,x|=K;if(P=P.next,P===null){if(P=a.shared.pending,P===null)break;X=P,P=X.next,X.next=null,a.lastBaseUpdate=X,a.shared.pending=null}}while(!0);$===null&&(B=ee),a.baseState=B,a.firstBaseUpdate=F,a.lastBaseUpdate=$,d===null&&(a.shared.lanes=0),hn|=x,e.lanes=x,e.memoizedState=ee}}function Ef(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Df(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Ef(i[e],t)}var Na=W(null),hc=W(0);function xf(e,t){e=Hi,ne(hc,e),ne(Na,t),Hi=e|t.baseLanes}function El(){ne(hc,Hi),ne(Na,Na.current)}function Dl(){Hi=hc.current,ae(Na),ae(hc)}var cn=0,be=null,Ne=null,We=null,mc=!1,ja=!1,Wn=!1,gc=0,Br=0,za=null,M_=0;function Ze(){throw Error(s(321))}function xl(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!It(e[i],t[i]))return!1;return!0}function Ml(e,t,i,n,a,d){return cn=d,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?up:fp,Wn=!1,d=i(n,a),Wn=!1,ja&&(d=Lf(t,i,n,a)),Mf(e),d}function Mf(e){j.H=wc;var t=Ne!==null&&Ne.next!==null;if(cn=0,We=Ne=be=null,mc=!1,Br=0,za=null,t)throw Error(s(300));e===null||lt||(e=e.dependencies,e!==null&&lc(e)&&(lt=!0))}function Lf(e,t,i,n){be=e;var a=0;do{if(ja&&(za=null),Br=0,ja=!1,25<=a)throw Error(s(301));if(a+=1,We=Ne=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}j.H=j_,d=t(i,n)}while(ja);return d}function L_(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?qr(t):t,e=e.useState()[0],(Ne!==null?Ne.memoizedState:null)!==e&&(be.flags|=1024),t}function Ll(){var e=gc!==0;return gc=0,e}function Ol(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function kl(e){if(mc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}mc=!1}cn=0,We=Ne=be=null,ja=!1,Br=gc=0,za=null}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?be.memoizedState=We=e:We=We.next=e,We}function et(){if(Ne===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=We===null?be.memoizedState:We.next;if(t!==null)We=t,Ne=e;else{if(e===null)throw be.alternate===null?Error(s(467)):Error(s(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},We===null?be.memoizedState=We=e:We=We.next=e}return We}function Al(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qr(e){var t=Br;return Br+=1,za===null&&(za=[]),e=Rf(za,e,t),t=be,(We===null?t.memoizedState:We.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?up:fp),e}function vc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qr(e);if(e.$$typeof===u)return wt(e)}throw Error(s(438,String(e)))}function Pl(e){var t=null,i=be.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var n=be.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Al(),be.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=O;return t.index++,i}function ji(e,t){return typeof t=="function"?t(e):t}function _c(e){var t=et();return Nl(t,Ne,e)}function Nl(e,t,i){var n=e.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=i;var a=e.baseQueue,d=n.pending;if(d!==null){if(a!==null){var x=a.next;a.next=d.next,d.next=x}t.baseQueue=a=d,n.pending=null}if(d=e.baseState,a===null)e.memoizedState=d;else{t=a.next;var P=x=null,B=null,F=t,$=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(xe&ee)===ee:(cn&ee)===ee){var K=F.revertLane;if(K===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===Aa&&($=!0);else if((cn&K)===K){F=F.next,K===Aa&&($=!0);continue}else ee={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},B===null?(P=B=ee,x=d):B=B.next=ee,be.lanes|=K,hn|=K;ee=F.action,Wn&&i(d,ee),d=F.hasEagerState?F.eagerState:i(d,ee)}else K={lane:ee,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},B===null?(P=B=K,x=d):B=B.next=K,be.lanes|=ee,hn|=ee;F=F.next}while(F!==null&&F!==t);if(B===null?x=d:B.next=P,!It(d,e.memoizedState)&&(lt=!0,$&&(i=Pa,i!==null)))throw i;e.memoizedState=d,e.baseState=x,e.baseQueue=B,n.lastRenderedState=d}return a===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function jl(e){var t=et(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var n=i.dispatch,a=i.pending,d=t.memoizedState;if(a!==null){i.pending=null;var x=a=a.next;do d=e(d,x.action),x=x.next;while(x!==a);It(d,t.memoizedState)||(lt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,n]}function Of(e,t,i){var n=be,a=et(),d=Oe;if(d){if(i===void 0)throw Error(s(407));i=i()}else i=t();var x=!It((Ne||a).memoizedState,i);x&&(a.memoizedState=i,lt=!0),a=a.queue;var P=Pf.bind(null,n,a,e);if(Ir(2048,8,P,[e]),a.getSnapshot!==t||x||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,Ua(9,yc(),Af.bind(null,n,a,i,t),null),Be===null)throw Error(s(349));d||(cn&124)!==0||kf(n,t,i)}return i}function kf(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=be.updateQueue,t===null?(t=Al(),be.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Af(e,t,i,n){t.value=i,t.getSnapshot=n,Nf(t)&&jf(e)}function Pf(e,t,i){return i(function(){Nf(t)&&jf(e)})}function Nf(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!It(e,i)}catch{return!0}}function jf(e){var t=Ma(e,2);t!==null&&Ft(t,e,2)}function zl(e){var t=Pt();if(typeof e=="function"){var i=e;if(e=i(),Wn){Ot(!0);try{i()}finally{Ot(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:e},t}function zf(e,t,i,n){return e.baseState=i,Nl(e,Ne,typeof n=="function"?n:ji)}function O_(e,t,i,n,a){if(Sc(e))throw Error(s(485));if(e=t.action,e!==null){var d={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){d.listeners.push(x)}};j.T!==null?i(!0):d.isTransition=!1,n(d),i=t.pending,i===null?(d.next=t.pending=d,Uf(t,d)):(d.next=i.next,t.pending=i.next=d)}}function Uf(e,t){var i=t.action,n=t.payload,a=e.state;if(t.isTransition){var d=j.T,x={};j.T=x;try{var P=i(a,n),B=j.S;B!==null&&B(x,P),Bf(e,t,P)}catch(F){Ul(e,t,F)}finally{j.T=d}}else try{d=i(a,n),Bf(e,t,d)}catch(F){Ul(e,t,F)}}function Bf(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(n){qf(e,t,n)},function(n){return Ul(e,t,n)}):qf(e,t,i)}function qf(e,t,i){t.status="fulfilled",t.value=i,If(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Uf(e,i)))}function Ul(e,t,i){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=i,If(t),t=t.next;while(t!==n)}e.action=null}function If(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Hf(e,t){return t}function Vf(e,t){if(Oe){var i=Be.formState;if(i!==null){e:{var n=be;if(Oe){if(Fe){t:{for(var a=Fe,d=yi;a.nodeType!==8;){if(!d){a=null;break t}if(a=fi(a.nextSibling),a===null){a=null;break t}}d=a.data,a=d==="F!"||d==="F"?a:null}if(a){Fe=fi(a.nextSibling),n=a.data==="F!";break e}}Xn(n)}n=!1}n&&(t=i[0])}}return i=Pt(),i.memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hf,lastRenderedState:t},i.queue=n,i=op.bind(null,be,n),n.dispatch=i,n=zl(!1),d=Vl.bind(null,be,!1,n.queue),n=Pt(),a={state:t,dispatch:null,action:e,pending:null},n.queue=a,i=O_.bind(null,be,a,d,i),a.dispatch=i,n.memoizedState=e,[t,i,!1]}function Gf(e){var t=et();return Yf(t,Ne,e)}function Yf(e,t,i){if(t=Nl(e,t,Hf)[0],e=_c(ji)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=qr(t)}catch(x){throw x===Pr?fc:x}else n=t;t=et();var a=t.queue,d=a.dispatch;return i!==t.memoizedState&&(be.flags|=2048,Ua(9,yc(),k_.bind(null,a,i),null)),[n,d,e]}function k_(e,t){e.action=t}function Qf(e){var t=et(),i=Ne;if(i!==null)return Yf(t,i,e);et(),t=t.memoizedState,i=et();var n=i.queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Ua(e,t,i,n){return e={tag:e,create:i,deps:n,inst:t,next:null},t=be.updateQueue,t===null&&(t=Al(),be.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function yc(){return{destroy:void 0,resource:void 0}}function Ff(){return et().memoizedState}function bc(e,t,i,n){var a=Pt();n=n===void 0?null:n,be.flags|=e,a.memoizedState=Ua(1|t,yc(),i,n)}function Ir(e,t,i,n){var a=et();n=n===void 0?null:n;var d=a.memoizedState.inst;Ne!==null&&n!==null&&xl(n,Ne.memoizedState.deps)?a.memoizedState=Ua(t,d,i,n):(be.flags|=e,a.memoizedState=Ua(1|t,d,i,n))}function Kf(e,t){bc(8390656,8,e,t)}function Xf(e,t){Ir(2048,8,e,t)}function Zf(e,t){return Ir(4,2,e,t)}function $f(e,t){return Ir(4,4,e,t)}function Jf(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wf(e,t,i){i=i!=null?i.concat([e]):null,Ir(4,4,Jf.bind(null,t,e),i)}function Bl(){}function ep(e,t){var i=et();t=t===void 0?null:t;var n=i.memoizedState;return t!==null&&xl(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function tp(e,t){var i=et();t=t===void 0?null:t;var n=i.memoizedState;if(t!==null&&xl(t,n[1]))return n[0];if(n=e(),Wn){Ot(!0);try{e()}finally{Ot(!1)}}return i.memoizedState=[n,t],n}function ql(e,t,i){return i===void 0||(cn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=i,e=ah(),be.lanes|=e,hn|=e,i)}function ip(e,t,i,n){return It(i,t)?i:Na.current!==null?(e=ql(e,i,n),It(e,t)||(lt=!0),e):(cn&42)===0?(lt=!0,e.memoizedState=i):(e=ah(),be.lanes|=e,hn|=e,t)}function np(e,t,i,n,a){var d=V.p;V.p=d!==0&&8>d?d:8;var x=j.T,P={};j.T=P,Vl(e,!1,t,i);try{var B=a(),F=j.S;if(F!==null&&F(P,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var $=x_(B,n);Hr(e,t,$,Qt(e))}else Hr(e,t,n,Qt(e))}catch(ee){Hr(e,t,{then:function(){},status:"rejected",reason:ee},Qt())}finally{V.p=d,j.T=x}}function A_(){}function Il(e,t,i,n){if(e.tag!==5)throw Error(s(476));var a=ap(e).queue;np(e,a,t,te,i===null?A_:function(){return rp(e),i(n)})}function ap(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:te},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function rp(e){var t=ap(e).next.queue;Hr(e,t,{},Qt())}function Hl(){return wt(ss)}function sp(){return et().memoizedState}function cp(){return et().memoizedState}function P_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Qt();e=rn(i);var n=sn(t,e,i);n!==null&&(Ft(n,t,i),jr(n,t,i)),t={cache:_l()},e.payload=t;return}t=t.return}}function N_(e,t,i){var n=Qt();i={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Sc(e)?lp(t,i):(i=ol(e,t,i,n),i!==null&&(Ft(i,e,n),dp(i,t,n)))}function op(e,t,i){var n=Qt();Hr(e,t,i,n)}function Hr(e,t,i,n){var a={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Sc(e))lp(t,a);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var x=t.lastRenderedState,P=d(x,i);if(a.hasEagerState=!0,a.eagerState=P,It(P,x))return ac(e,t,a,0),Be===null&&nc(),!1}catch{}finally{}if(i=ol(e,t,a,n),i!==null)return Ft(i,e,n),dp(i,t,n),!0}return!1}function Vl(e,t,i,n){if(n={lane:2,revertLane:Sd(),action:n,hasEagerState:!1,eagerState:null,next:null},Sc(e)){if(t)throw Error(s(479))}else t=ol(e,i,n,2),t!==null&&Ft(t,e,2)}function Sc(e){var t=e.alternate;return e===be||t!==null&&t===be}function lp(e,t){ja=mc=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function dp(e,t,i){if((i&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,ht(e,i)}}var wc={readContext:wt,use:vc,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze},up={readContext:wt,use:vc,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:Kf,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,bc(4194308,4,Jf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bc(4194308,4,e,t)},useInsertionEffect:function(e,t){bc(4,2,e,t)},useMemo:function(e,t){var i=Pt();t=t===void 0?null:t;var n=e();if(Wn){Ot(!0);try{e()}finally{Ot(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=Pt();if(i!==void 0){var a=i(t);if(Wn){Ot(!0);try{i(t)}finally{Ot(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=N_.bind(null,be,e),[n.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:function(e){e=zl(e);var t=e.queue,i=op.bind(null,be,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Bl,useDeferredValue:function(e,t){var i=Pt();return ql(i,e,t)},useTransition:function(){var e=zl(!1);return e=np.bind(null,be,e.queue,!0,!1),Pt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=be,a=Pt();if(Oe){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Be===null)throw Error(s(349));(xe&124)!==0||kf(n,t,i)}a.memoizedState=i;var d={value:i,getSnapshot:t};return a.queue=d,Kf(Pf.bind(null,n,d,e),[e]),n.flags|=2048,Ua(9,yc(),Af.bind(null,n,d,i,t),null),i},useId:function(){var e=Pt(),t=Be.identifierPrefix;if(Oe){var i=Ai,n=ki;i=(n&~(1<<32-yt(n)-1)).toString(32)+i,t=""+t+"R"+i,i=gc++,0<i&&(t+="H"+i.toString(32)),t+=""}else i=M_++,t=""+t+"r"+i.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Hl,useFormState:Vf,useActionState:Vf,useOptimistic:function(e){var t=Pt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Vl.bind(null,be,!0,i),i.dispatch=t,[e,t]},useMemoCache:Pl,useCacheRefresh:function(){return Pt().memoizedState=P_.bind(null,be)}},fp={readContext:wt,use:vc,useCallback:ep,useContext:wt,useEffect:Xf,useImperativeHandle:Wf,useInsertionEffect:Zf,useLayoutEffect:$f,useMemo:tp,useReducer:_c,useRef:Ff,useState:function(){return _c(ji)},useDebugValue:Bl,useDeferredValue:function(e,t){var i=et();return ip(i,Ne.memoizedState,e,t)},useTransition:function(){var e=_c(ji)[0],t=et().memoizedState;return[typeof e=="boolean"?e:qr(e),t]},useSyncExternalStore:Of,useId:sp,useHostTransitionStatus:Hl,useFormState:Gf,useActionState:Gf,useOptimistic:function(e,t){var i=et();return zf(i,Ne,e,t)},useMemoCache:Pl,useCacheRefresh:cp},j_={readContext:wt,use:vc,useCallback:ep,useContext:wt,useEffect:Xf,useImperativeHandle:Wf,useInsertionEffect:Zf,useLayoutEffect:$f,useMemo:tp,useReducer:jl,useRef:Ff,useState:function(){return jl(ji)},useDebugValue:Bl,useDeferredValue:function(e,t){var i=et();return Ne===null?ql(i,e,t):ip(i,Ne.memoizedState,e,t)},useTransition:function(){var e=jl(ji)[0],t=et().memoizedState;return[typeof e=="boolean"?e:qr(e),t]},useSyncExternalStore:Of,useId:sp,useHostTransitionStatus:Hl,useFormState:Qf,useActionState:Qf,useOptimistic:function(e,t){var i=et();return Ne!==null?zf(i,Ne,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Pl,useCacheRefresh:cp},Ba=null,Vr=0;function Rc(e){var t=Vr;return Vr+=1,Ba===null&&(Ba=[]),Rf(Ba,e,t)}function Gr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tc(e,t){throw t.$$typeof===v?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function pp(e){var t=e._init;return t(e._payload)}function hp(e){function t(G,I){if(e){var Q=G.deletions;Q===null?(G.deletions=[I],G.flags|=16):Q.push(I)}}function i(G,I){if(!e)return null;for(;I!==null;)t(G,I),I=I.sibling;return null}function n(G){for(var I=new Map;G!==null;)G.key!==null?I.set(G.key,G):I.set(G.index,G),G=G.sibling;return I}function a(G,I){return G=Oi(G,I),G.index=0,G.sibling=null,G}function d(G,I,Q){return G.index=Q,e?(Q=G.alternate,Q!==null?(Q=Q.index,Q<I?(G.flags|=67108866,I):Q):(G.flags|=67108866,I)):(G.flags|=1048576,I)}function x(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function P(G,I,Q,J){return I===null||I.tag!==6?(I=dl(Q,G.mode,J),I.return=G,I):(I=a(I,Q),I.return=G,I)}function B(G,I,Q,J){var oe=Q.type;return oe===A?$(G,I,Q.props.children,J,Q.key):I!==null&&(I.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===M&&pp(oe)===I.type)?(I=a(I,Q.props),Gr(I,Q),I.return=G,I):(I=sc(Q.type,Q.key,Q.props,null,G.mode,J),Gr(I,Q),I.return=G,I)}function F(G,I,Q,J){return I===null||I.tag!==4||I.stateNode.containerInfo!==Q.containerInfo||I.stateNode.implementation!==Q.implementation?(I=ul(Q,G.mode,J),I.return=G,I):(I=a(I,Q.children||[]),I.return=G,I)}function $(G,I,Q,J,oe){return I===null||I.tag!==7?(I=Yn(Q,G.mode,J,oe),I.return=G,I):(I=a(I,Q),I.return=G,I)}function ee(G,I,Q){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=dl(""+I,G.mode,Q),I.return=G,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case L:return Q=sc(I.type,I.key,I.props,null,G.mode,Q),Gr(Q,I),Q.return=G,Q;case k:return I=ul(I,G.mode,Q),I.return=G,I;case M:var J=I._init;return I=J(I._payload),ee(G,I,Q)}if(Z(I)||H(I))return I=Yn(I,G.mode,Q,null),I.return=G,I;if(typeof I.then=="function")return ee(G,Rc(I),Q);if(I.$$typeof===u)return ee(G,dc(G,I),Q);Tc(G,I)}return null}function K(G,I,Q,J){var oe=I!==null?I.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return oe!==null?null:P(G,I,""+Q,J);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case L:return Q.key===oe?B(G,I,Q,J):null;case k:return Q.key===oe?F(G,I,Q,J):null;case M:return oe=Q._init,Q=oe(Q._payload),K(G,I,Q,J)}if(Z(Q)||H(Q))return oe!==null?null:$(G,I,Q,J,null);if(typeof Q.then=="function")return K(G,I,Rc(Q),J);if(Q.$$typeof===u)return K(G,I,dc(G,Q),J);Tc(G,Q)}return null}function X(G,I,Q,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return G=G.get(Q)||null,P(I,G,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case L:return G=G.get(J.key===null?Q:J.key)||null,B(I,G,J,oe);case k:return G=G.get(J.key===null?Q:J.key)||null,F(I,G,J,oe);case M:var we=J._init;return J=we(J._payload),X(G,I,Q,J,oe)}if(Z(J)||H(J))return G=G.get(Q)||null,$(I,G,J,oe,null);if(typeof J.then=="function")return X(G,I,Q,Rc(J),oe);if(J.$$typeof===u)return X(G,I,Q,dc(I,J),oe);Tc(I,J)}return null}function ge(G,I,Q,J){for(var oe=null,we=null,ue=I,he=I=0,ut=null;ue!==null&&he<Q.length;he++){ue.index>he?(ut=ue,ue=null):ut=ue.sibling;var Me=K(G,ue,Q[he],J);if(Me===null){ue===null&&(ue=ut);break}e&&ue&&Me.alternate===null&&t(G,ue),I=d(Me,I,he),we===null?oe=Me:we.sibling=Me,we=Me,ue=ut}if(he===Q.length)return i(G,ue),Oe&&Fn(G,he),oe;if(ue===null){for(;he<Q.length;he++)ue=ee(G,Q[he],J),ue!==null&&(I=d(ue,I,he),we===null?oe=ue:we.sibling=ue,we=ue);return Oe&&Fn(G,he),oe}for(ue=n(ue);he<Q.length;he++)ut=X(ue,G,he,Q[he],J),ut!==null&&(e&&ut.alternate!==null&&ue.delete(ut.key===null?he:ut.key),I=d(ut,I,he),we===null?oe=ut:we.sibling=ut,we=ut);return e&&ue.forEach(function(Rn){return t(G,Rn)}),Oe&&Fn(G,he),oe}function pe(G,I,Q,J){if(Q==null)throw Error(s(151));for(var oe=null,we=null,ue=I,he=I=0,ut=null,Me=Q.next();ue!==null&&!Me.done;he++,Me=Q.next()){ue.index>he?(ut=ue,ue=null):ut=ue.sibling;var Rn=K(G,ue,Me.value,J);if(Rn===null){ue===null&&(ue=ut);break}e&&ue&&Rn.alternate===null&&t(G,ue),I=d(Rn,I,he),we===null?oe=Rn:we.sibling=Rn,we=Rn,ue=ut}if(Me.done)return i(G,ue),Oe&&Fn(G,he),oe;if(ue===null){for(;!Me.done;he++,Me=Q.next())Me=ee(G,Me.value,J),Me!==null&&(I=d(Me,I,he),we===null?oe=Me:we.sibling=Me,we=Me);return Oe&&Fn(G,he),oe}for(ue=n(ue);!Me.done;he++,Me=Q.next())Me=X(ue,G,he,Me.value,J),Me!==null&&(e&&Me.alternate!==null&&ue.delete(Me.key===null?he:Me.key),I=d(Me,I,he),we===null?oe=Me:we.sibling=Me,we=Me);return e&&ue.forEach(function(zy){return t(G,zy)}),Oe&&Fn(G,he),oe}function ze(G,I,Q,J){if(typeof Q=="object"&&Q!==null&&Q.type===A&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case L:e:{for(var oe=Q.key;I!==null;){if(I.key===oe){if(oe=Q.type,oe===A){if(I.tag===7){i(G,I.sibling),J=a(I,Q.props.children),J.return=G,G=J;break e}}else if(I.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===M&&pp(oe)===I.type){i(G,I.sibling),J=a(I,Q.props),Gr(J,Q),J.return=G,G=J;break e}i(G,I);break}else t(G,I);I=I.sibling}Q.type===A?(J=Yn(Q.props.children,G.mode,J,Q.key),J.return=G,G=J):(J=sc(Q.type,Q.key,Q.props,null,G.mode,J),Gr(J,Q),J.return=G,G=J)}return x(G);case k:e:{for(oe=Q.key;I!==null;){if(I.key===oe)if(I.tag===4&&I.stateNode.containerInfo===Q.containerInfo&&I.stateNode.implementation===Q.implementation){i(G,I.sibling),J=a(I,Q.children||[]),J.return=G,G=J;break e}else{i(G,I);break}else t(G,I);I=I.sibling}J=ul(Q,G.mode,J),J.return=G,G=J}return x(G);case M:return oe=Q._init,Q=oe(Q._payload),ze(G,I,Q,J)}if(Z(Q))return ge(G,I,Q,J);if(H(Q)){if(oe=H(Q),typeof oe!="function")throw Error(s(150));return Q=oe.call(Q),pe(G,I,Q,J)}if(typeof Q.then=="function")return ze(G,I,Rc(Q),J);if(Q.$$typeof===u)return ze(G,I,dc(G,Q),J);Tc(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,I!==null&&I.tag===6?(i(G,I.sibling),J=a(I,Q),J.return=G,G=J):(i(G,I),J=dl(Q,G.mode,J),J.return=G,G=J),x(G)):i(G,I)}return function(G,I,Q,J){try{Vr=0;var oe=ze(G,I,Q,J);return Ba=null,oe}catch(ue){if(ue===Pr||ue===fc)throw ue;var we=Ht(29,ue,null,G.mode);return we.lanes=J,we.return=G,we}finally{}}}var qa=hp(!0),mp=hp(!1),Wt=W(null),bi=null;function on(e){var t=e.alternate;ne(at,at.current&1),ne(Wt,e),bi===null&&(t===null||Na.current!==null||t.memoizedState!==null)&&(bi=e)}function gp(e){if(e.tag===22){if(ne(at,at.current),ne(Wt,e),bi===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(bi=e)}}else ln()}function ln(){ne(at,at.current),ne(Wt,Wt.current)}function zi(e){ae(Wt),bi===e&&(bi=null),ae(at)}var at=W(0);function Cc(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Ad(i)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Gl(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:D({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Yl={enqueueSetState:function(e,t,i){e=e._reactInternals;var n=Qt(),a=rn(n);a.payload=t,i!=null&&(a.callback=i),t=sn(e,a,n),t!==null&&(Ft(t,e,n),jr(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=Qt(),a=rn(n);a.tag=1,a.payload=t,i!=null&&(a.callback=i),t=sn(e,a,n),t!==null&&(Ft(t,e,n),jr(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Qt(),n=rn(i);n.tag=2,t!=null&&(n.callback=t),t=sn(e,n,i),t!==null&&(Ft(t,e,i),jr(t,e,i))}};function vp(e,t,i,n,a,d,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,d,x):t.prototype&&t.prototype.isPureReactComponent?!Er(i,n)||!Er(a,d):!0}function _p(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Yl.enqueueReplaceState(t,t.state,null)}function ea(e,t){var i=t;if("ref"in t){i={};for(var n in t)n!=="ref"&&(i[n]=t[n])}if(e=e.defaultProps){i===t&&(i=D({},i));for(var a in e)i[a]===void 0&&(i[a]=e[a])}return i}var Ec=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function yp(e){Ec(e)}function bp(e){console.error(e)}function Sp(e){Ec(e)}function Dc(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function wp(e,t,i){try{var n=e.onCaughtError;n(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Ql(e,t,i){return i=rn(i),i.tag=3,i.payload={element:null},i.callback=function(){Dc(e,t)},i}function Rp(e){return e=rn(e),e.tag=3,e}function Tp(e,t,i,n){var a=i.type.getDerivedStateFromError;if(typeof a=="function"){var d=n.value;e.payload=function(){return a(d)},e.callback=function(){wp(t,i,n)}}var x=i.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){wp(t,i,n),typeof a!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var P=n.stack;this.componentDidCatch(n.value,{componentStack:P!==null?P:""})})}function z_(e,t,i,n,a){if(i.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=i.alternate,t!==null&&Or(t,i,a,!0),i=Wt.current,i!==null){switch(i.tag){case 13:return bi===null?gd():i.alternate===null&&Ke===0&&(Ke=3),i.flags&=-257,i.flags|=65536,i.lanes=a,n===Sl?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([n]):t.add(n),_d(e,n,a)),!1;case 22:return i.flags|=65536,n===Sl?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([n]):i.add(n)),_d(e,n,a)),!1}throw Error(s(435,i.tag))}return _d(e,n,a),gd(),!1}if(Oe)return t=Wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==hl&&(e=Error(s(422),{cause:n}),Lr(Xt(e,i)))):(n!==hl&&(t=Error(s(423),{cause:n}),Lr(Xt(t,i))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,n=Xt(n,i),a=Ql(e.stateNode,n,a),Tl(e,a),Ke!==4&&(Ke=2)),!1;var d=Error(s(520),{cause:n});if(d=Xt(d,i),$r===null?$r=[d]:$r.push(d),Ke!==4&&(Ke=2),t===null)return!0;n=Xt(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=a&-a,i.lanes|=e,e=Ql(i.stateNode,n,e),Tl(i,e),!1;case 1:if(t=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(mn===null||!mn.has(d))))return i.flags|=65536,a&=-a,i.lanes|=a,a=Rp(a),Tp(a,e,i,n),Tl(i,a),!1}i=i.return}while(i!==null);return!1}var Cp=Error(s(461)),lt=!1;function mt(e,t,i,n){t.child=e===null?mp(t,null,i,n):qa(t,e.child,i,n)}function Ep(e,t,i,n,a){i=i.render;var d=t.ref;if("ref"in n){var x={};for(var P in n)P!=="ref"&&(x[P]=n[P])}else x=n;return $n(t),n=Ml(e,t,i,x,d,a),P=Ll(),e!==null&&!lt?(Ol(e,t,a),Ui(e,t,a)):(Oe&&P&&fl(t),t.flags|=1,mt(e,t,n,a),t.child)}function Dp(e,t,i,n,a){if(e===null){var d=i.type;return typeof d=="function"&&!ll(d)&&d.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=d,xp(e,t,d,n,a)):(e=sc(i.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!ed(e,a)){var x=d.memoizedProps;if(i=i.compare,i=i!==null?i:Er,i(x,n)&&e.ref===t.ref)return Ui(e,t,a)}return t.flags|=1,e=Oi(d,n),e.ref=t.ref,e.return=t,t.child=e}function xp(e,t,i,n,a){if(e!==null){var d=e.memoizedProps;if(Er(d,n)&&e.ref===t.ref)if(lt=!1,t.pendingProps=n=d,ed(e,a))(e.flags&131072)!==0&&(lt=!0);else return t.lanes=e.lanes,Ui(e,t,a)}return Fl(e,t,i,n,a)}function Mp(e,t,i){var n=t.pendingProps,a=n.children,d=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((t.flags&128)!==0){if(n=d!==null?d.baseLanes|i:i,e!==null){for(a=t.child=e.child,d=0;a!==null;)d=d|a.lanes|a.childLanes,a=a.sibling;t.childLanes=d&~n}else t.childLanes=0,t.child=null;return Lp(e,t,n,i)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&uc(t,d!==null?d.cachePool:null),d!==null?xf(t,d):El(),gp(t);else return t.lanes=t.childLanes=536870912,Lp(e,t,d!==null?d.baseLanes|i:i,i)}else d!==null?(uc(t,d.cachePool),xf(t,d),ln(),t.memoizedState=null):(e!==null&&uc(t,null),El(),ln());return mt(e,t,a,i),t.child}function Lp(e,t,i,n){var a=bl();return a=a===null?null:{parent:nt._currentValue,pool:a},t.memoizedState={baseLanes:i,cachePool:a},e!==null&&uc(t,null),El(),gp(t),e!==null&&Or(e,t,n,!0),null}function xc(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Fl(e,t,i,n,a){return $n(t),i=Ml(e,t,i,n,void 0,a),n=Ll(),e!==null&&!lt?(Ol(e,t,a),Ui(e,t,a)):(Oe&&n&&fl(t),t.flags|=1,mt(e,t,i,a),t.child)}function Op(e,t,i,n,a,d){return $n(t),t.updateQueue=null,i=Lf(t,n,i,a),Mf(e),n=Ll(),e!==null&&!lt?(Ol(e,t,d),Ui(e,t,d)):(Oe&&n&&fl(t),t.flags|=1,mt(e,t,i,d),t.child)}function kp(e,t,i,n,a){if($n(t),t.stateNode===null){var d=La,x=i.contextType;typeof x=="object"&&x!==null&&(d=wt(x)),d=new i(n,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Yl,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=n,d.state=t.memoizedState,d.refs={},wl(t),x=i.contextType,d.context=typeof x=="object"&&x!==null?wt(x):La,d.state=t.memoizedState,x=i.getDerivedStateFromProps,typeof x=="function"&&(Gl(t,i,x,n),d.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(x=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),x!==d.state&&Yl.enqueueReplaceState(d,d.state,null),Ur(t,n,d,a),zr(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){d=t.stateNode;var P=t.memoizedProps,B=ea(i,P);d.props=B;var F=d.context,$=i.contextType;x=La,typeof $=="object"&&$!==null&&(x=wt($));var ee=i.getDerivedStateFromProps;$=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",P=t.pendingProps!==P,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(P||F!==x)&&_p(t,d,n,x),an=!1;var K=t.memoizedState;d.state=K,Ur(t,n,d,a),zr(),F=t.memoizedState,P||K!==F||an?(typeof ee=="function"&&(Gl(t,i,ee,n),F=t.memoizedState),(B=an||vp(t,i,B,n,K,F,x))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=F),d.props=n,d.state=F,d.context=x,n=B):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,Rl(e,t),x=t.memoizedProps,$=ea(i,x),d.props=$,ee=t.pendingProps,K=d.context,F=i.contextType,B=La,typeof F=="object"&&F!==null&&(B=wt(F)),P=i.getDerivedStateFromProps,(F=typeof P=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(x!==ee||K!==B)&&_p(t,d,n,B),an=!1,K=t.memoizedState,d.state=K,Ur(t,n,d,a),zr();var X=t.memoizedState;x!==ee||K!==X||an||e!==null&&e.dependencies!==null&&lc(e.dependencies)?(typeof P=="function"&&(Gl(t,i,P,n),X=t.memoizedState),($=an||vp(t,i,$,n,K,X,B)||e!==null&&e.dependencies!==null&&lc(e.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,X,B),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,X,B)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||x===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=X),d.props=n,d.state=X,d.context=B,n=$):(typeof d.componentDidUpdate!="function"||x===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),n=!1)}return d=n,xc(e,t),n=(t.flags&128)!==0,d||n?(d=t.stateNode,i=n&&typeof i.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&n?(t.child=qa(t,e.child,null,a),t.child=qa(t,null,i,a)):mt(e,t,i,a),t.memoizedState=d.state,e=t.child):e=Ui(e,t,a),e}function Ap(e,t,i,n){return Mr(),t.flags|=256,mt(e,t,i,n),t.child}var Kl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xl(e){return{baseLanes:e,cachePool:bf()}}function Zl(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=ei),e}function Pp(e,t,i){var n=t.pendingProps,a=!1,d=(t.flags&128)!==0,x;if((x=d)||(x=e!==null&&e.memoizedState===null?!1:(at.current&2)!==0),x&&(a=!0,t.flags&=-129),x=(t.flags&32)!==0,t.flags&=-33,e===null){if(Oe){if(a?on(t):ln(),Oe){var P=Fe,B;if(B=P){e:{for(B=P,P=yi;B.nodeType!==8;){if(!P){P=null;break e}if(B=fi(B.nextSibling),B===null){P=null;break e}}P=B}P!==null?(t.memoizedState={dehydrated:P,treeContext:Qn!==null?{id:ki,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},B=Ht(18,null,null,0),B.stateNode=P,B.return=t,t.child=B,xt=t,Fe=null,B=!0):B=!1}B||Xn(t)}if(P=t.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return Ad(P)?t.lanes=32:t.lanes=536870912,null;zi(t)}return P=n.children,n=n.fallback,a?(ln(),a=t.mode,P=Mc({mode:"hidden",children:P},a),n=Yn(n,a,i,null),P.return=t,n.return=t,P.sibling=n,t.child=P,a=t.child,a.memoizedState=Xl(i),a.childLanes=Zl(e,x,i),t.memoizedState=Kl,n):(on(t),$l(t,P))}if(B=e.memoizedState,B!==null&&(P=B.dehydrated,P!==null)){if(d)t.flags&256?(on(t),t.flags&=-257,t=Jl(e,t,i)):t.memoizedState!==null?(ln(),t.child=e.child,t.flags|=128,t=null):(ln(),a=n.fallback,P=t.mode,n=Mc({mode:"visible",children:n.children},P),a=Yn(a,P,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,qa(t,e.child,null,i),n=t.child,n.memoizedState=Xl(i),n.childLanes=Zl(e,x,i),t.memoizedState=Kl,t=a);else if(on(t),Ad(P)){if(x=P.nextSibling&&P.nextSibling.dataset,x)var F=x.dgst;x=F,n=Error(s(419)),n.stack="",n.digest=x,Lr({value:n,source:null,stack:null}),t=Jl(e,t,i)}else if(lt||Or(e,t,i,!1),x=(i&e.childLanes)!==0,lt||x){if(x=Be,x!==null&&(n=i&-i,n=(n&42)!==0?1:Kt(n),n=(n&(x.suspendedLanes|i))!==0?0:n,n!==0&&n!==B.retryLane))throw B.retryLane=n,Ma(e,n),Ft(x,e,n),Cp;P.data==="$?"||gd(),t=Jl(e,t,i)}else P.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=B.treeContext,Fe=fi(P.nextSibling),xt=t,Oe=!0,Kn=null,yi=!1,e!==null&&($t[Jt++]=ki,$t[Jt++]=Ai,$t[Jt++]=Qn,ki=e.id,Ai=e.overflow,Qn=t),t=$l(t,n.children),t.flags|=4096);return t}return a?(ln(),a=n.fallback,P=t.mode,B=e.child,F=B.sibling,n=Oi(B,{mode:"hidden",children:n.children}),n.subtreeFlags=B.subtreeFlags&65011712,F!==null?a=Oi(F,a):(a=Yn(a,P,i,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,P=e.child.memoizedState,P===null?P=Xl(i):(B=P.cachePool,B!==null?(F=nt._currentValue,B=B.parent!==F?{parent:F,pool:F}:B):B=bf(),P={baseLanes:P.baseLanes|i,cachePool:B}),a.memoizedState=P,a.childLanes=Zl(e,x,i),t.memoizedState=Kl,n):(on(t),i=e.child,e=i.sibling,i=Oi(i,{mode:"visible",children:n.children}),i.return=t,i.sibling=null,e!==null&&(x=t.deletions,x===null?(t.deletions=[e],t.flags|=16):x.push(e)),t.child=i,t.memoizedState=null,i)}function $l(e,t){return t=Mc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Mc(e,t){return e=Ht(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Jl(e,t,i){return qa(t,e.child,null,i),e=$l(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Np(e,t,i){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gl(e.return,t,i)}function Wl(e,t,i,n,a){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:a}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=n,d.tail=i,d.tailMode=a)}function jp(e,t,i){var n=t.pendingProps,a=n.revealOrder,d=n.tail;if(mt(e,t,n.children,i),n=at.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Np(e,i,t);else if(e.tag===19)Np(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(ne(at,n),a){case"forwards":for(i=t.child,a=null;i!==null;)e=i.alternate,e!==null&&Cc(e)===null&&(a=i),i=i.sibling;i=a,i===null?(a=t.child,t.child=null):(a=i.sibling,i.sibling=null),Wl(t,!1,a,i,d);break;case"backwards":for(i=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Cc(e)===null){t.child=a;break}e=a.sibling,a.sibling=i,i=a,a=e}Wl(t,!0,i,null,d);break;case"together":Wl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ui(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),hn|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Or(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=Oi(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Oi(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function ed(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&lc(e)))}function U_(e,t,i){switch(t.tag){case 3:ke(t,t.stateNode.containerInfo),nn(t,nt,e.memoizedState.cache),Mr();break;case 27:case 5:rr(t);break;case 4:ke(t,t.stateNode.containerInfo);break;case 10:nn(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(on(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Pp(e,t,i):(on(t),e=Ui(e,t,i),e!==null?e.sibling:null);on(t);break;case 19:var a=(e.flags&128)!==0;if(n=(i&t.childLanes)!==0,n||(Or(e,t,i,!1),n=(i&t.childLanes)!==0),a){if(n)return jp(e,t,i);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ne(at,at.current),n)break;return null;case 22:case 23:return t.lanes=0,Mp(e,t,i);case 24:nn(t,nt,e.memoizedState.cache)}return Ui(e,t,i)}function zp(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)lt=!0;else{if(!ed(e,i)&&(t.flags&128)===0)return lt=!1,U_(e,t,i);lt=(e.flags&131072)!==0}else lt=!1,Oe&&(t.flags&1048576)!==0&&pf(t,oc,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,typeof n=="function")ll(n)?(e=ea(n,e),t.tag=1,t=kp(null,t,n,e,i)):(t.tag=0,t=Fl(null,t,n,e,i));else{if(n!=null){if(a=n.$$typeof,a===p){t.tag=11,t=Ep(null,t,n,e,i);break e}else if(a===b){t.tag=14,t=Dp(null,t,n,e,i);break e}}throw t=Y(n)||n,Error(s(306,t,""))}}return t;case 0:return Fl(e,t,t.type,t.pendingProps,i);case 1:return n=t.type,a=ea(n,t.pendingProps),kp(e,t,n,a,i);case 3:e:{if(ke(t,t.stateNode.containerInfo),e===null)throw Error(s(387));n=t.pendingProps;var d=t.memoizedState;a=d.element,Rl(e,t),Ur(t,n,null,i);var x=t.memoizedState;if(n=x.cache,nn(t,nt,n),n!==d.cache&&vl(t,[nt],i,!0),zr(),n=x.element,d.isDehydrated)if(d={element:n,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=Ap(e,t,n,i);break e}else if(n!==a){a=Xt(Error(s(424)),t),Lr(a),t=Ap(e,t,n,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Fe=fi(e.firstChild),xt=t,Oe=!0,Kn=null,yi=!0,i=mp(t,null,n,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Mr(),n===a){t=Ui(e,t,i);break e}mt(e,t,n,i)}t=t.child}return t;case 26:return xc(e,t),e===null?(i=Ih(t.type,null,t.pendingProps,null))?t.memoizedState=i:Oe||(i=t.type,e=t.pendingProps,n=Vc(me.current).createElement(i),n[Ge]=t,n[st]=e,vt(n,i,e),Ye(n),t.stateNode=n):t.memoizedState=Ih(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return rr(t),e===null&&Oe&&(n=t.stateNode=Uh(t.type,t.pendingProps,me.current),xt=t,yi=!0,a=Fe,_n(t.type)?(Pd=a,Fe=fi(n.firstChild)):Fe=a),mt(e,t,t.pendingProps.children,i),xc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Oe&&((a=n=Fe)&&(n=fy(n,t.type,t.pendingProps,yi),n!==null?(t.stateNode=n,xt=t,Fe=fi(n.firstChild),yi=!1,a=!0):a=!1),a||Xn(t)),rr(t),a=t.type,d=t.pendingProps,x=e!==null?e.memoizedProps:null,n=d.children,Ld(a,d)?n=null:x!==null&&Ld(a,x)&&(t.flags|=32),t.memoizedState!==null&&(a=Ml(e,t,L_,null,null,i),ss._currentValue=a),xc(e,t),mt(e,t,n,i),t.child;case 6:return e===null&&Oe&&((e=i=Fe)&&(i=py(i,t.pendingProps,yi),i!==null?(t.stateNode=i,xt=t,Fe=null,e=!0):e=!1),e||Xn(t)),null;case 13:return Pp(e,t,i);case 4:return ke(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=qa(t,null,n,i):mt(e,t,n,i),t.child;case 11:return Ep(e,t,t.type,t.pendingProps,i);case 7:return mt(e,t,t.pendingProps,i),t.child;case 8:return mt(e,t,t.pendingProps.children,i),t.child;case 12:return mt(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,nn(t,t.type,n.value),mt(e,t,n.children,i),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,$n(t),a=wt(a),n=n(a),t.flags|=1,mt(e,t,n,i),t.child;case 14:return Dp(e,t,t.type,t.pendingProps,i);case 15:return xp(e,t,t.type,t.pendingProps,i);case 19:return jp(e,t,i);case 31:return n=t.pendingProps,i=t.mode,n={mode:n.mode,children:n.children},e===null?(i=Mc(n,i),i.ref=t.ref,t.child=i,i.return=t,t=i):(i=Oi(e.child,n),i.ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return Mp(e,t,i);case 24:return $n(t),n=wt(nt),e===null?(a=bl(),a===null&&(a=Be,d=_l(),a.pooledCache=d,d.refCount++,d!==null&&(a.pooledCacheLanes|=i),a=d),t.memoizedState={parent:n,cache:a},wl(t),nn(t,nt,a)):((e.lanes&i)!==0&&(Rl(e,t),Ur(t,null,null,i),zr()),a=e.memoizedState,d=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),nn(t,nt,n)):(n=d.cache,nn(t,nt,n),n!==a.cache&&vl(t,[nt],i,!0))),mt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Bi(e){e.flags|=4}function Up(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qh(t)){if(t=Wt.current,t!==null&&((xe&4194048)===xe?bi!==null:(xe&62914560)!==xe&&(xe&536870912)===0||t!==bi))throw Nr=Sl,Sf;e.flags|=8192}}function Lc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?pr():536870912,e.lanes|=t,Ga|=t)}function Yr(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,n=0;if(t)for(var a=e.child;a!==null;)i|=a.lanes|a.childLanes,n|=a.subtreeFlags&65011712,n|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)i|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function B_(e,t,i){var n=t.pendingProps;switch(pl(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return i=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ni(nt),Et(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(xr(t)?Bi(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,gf())),Qe(t),null;case 26:return i=t.memoizedState,e===null?(Bi(t),i!==null?(Qe(t),Up(t,i)):(Qe(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Bi(t),Qe(t),Up(t,i)):(Qe(t),t.flags&=-16777217):(e.memoizedProps!==n&&Bi(t),Qe(t),t.flags&=-16777217),null;case 27:Ln(t),i=me.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Bi(t);else{if(!n){if(t.stateNode===null)throw Error(s(166));return Qe(t),null}e=se.current,xr(t)?hf(t):(e=Uh(a,n,i),t.stateNode=e,Bi(t))}return Qe(t),null;case 5:if(Ln(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&Bi(t);else{if(!n){if(t.stateNode===null)throw Error(s(166));return Qe(t),null}if(e=se.current,xr(t))hf(t);else{switch(a=Vc(me.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?a.createElement(i,{is:n.is}):a.createElement(i)}}e[Ge]=t,e[st]=n;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(vt(e,i,n),i){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Bi(t)}}return Qe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&Bi(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(s(166));if(e=me.current,xr(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,a=xt,a!==null)switch(a.tag){case 27:case 5:n=a.memoizedProps}e[Ge]=t,e=!!(e.nodeValue===i||n!==null&&n.suppressHydrationWarning===!0||Oh(e.nodeValue,i)),e||Xn(t)}else e=Vc(e).createTextNode(n),e[Ge]=t,t.stateNode=e}return Qe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=xr(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(s(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));a[Ge]=t}else Mr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),a=!1}else a=gf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(zi(t),t):(zi(t),null)}if(zi(t),(t.flags&128)!==0)return t.lanes=i,t;if(i=n!==null,e=e!==null&&e.memoizedState!==null,i){n=t.child,a=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(a=n.alternate.memoizedState.cachePool.pool);var d=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),d!==a&&(n.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),Lc(t,t.updateQueue),Qe(t),null;case 4:return Et(),e===null&&Cd(t.stateNode.containerInfo),Qe(t),null;case 10:return Ni(t.type),Qe(t),null;case 19:if(ae(at),a=t.memoizedState,a===null)return Qe(t),null;if(n=(t.flags&128)!==0,d=a.rendering,d===null)if(n)Yr(a,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=Cc(e),d!==null){for(t.flags|=128,Yr(a,!1),e=d.updateQueue,t.updateQueue=e,Lc(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)ff(i,e),i=i.sibling;return ne(at,at.current&1|2),t.child}e=e.sibling}a.tail!==null&&Bt()>Ac&&(t.flags|=128,n=!0,Yr(a,!1),t.lanes=4194304)}else{if(!n)if(e=Cc(d),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Lc(t,e),Yr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!d.alternate&&!Oe)return Qe(t),null}else 2*Bt()-a.renderingStartTime>Ac&&i!==536870912&&(t.flags|=128,n=!0,Yr(a,!1),t.lanes=4194304);a.isBackwards?(d.sibling=t.child,t.child=d):(e=a.last,e!==null?e.sibling=d:t.child=d,a.last=d)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Bt(),t.sibling=null,e=at.current,ne(at,n?e&1|2:e&1),t):(Qe(t),null);case 22:case 23:return zi(t),Dl(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(i&536870912)!==0&&(t.flags&128)===0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),i=t.updateQueue,i!==null&&Lc(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),e!==null&&ae(Jn),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ni(nt),Qe(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function q_(e,t){switch(pl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ni(nt),Et(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ln(t),null;case 13:if(zi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(at),null;case 4:return Et(),null;case 10:return Ni(t.type),null;case 22:case 23:return zi(t),Dl(),e!==null&&ae(Jn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ni(nt),null;case 25:return null;default:return null}}function Bp(e,t){switch(pl(t),t.tag){case 3:Ni(nt),Et();break;case 26:case 27:case 5:Ln(t);break;case 4:Et();break;case 13:zi(t);break;case 19:ae(at);break;case 10:Ni(t.type);break;case 22:case 23:zi(t),Dl(),e!==null&&ae(Jn);break;case 24:Ni(nt)}}function Qr(e,t){try{var i=t.updateQueue,n=i!==null?i.lastEffect:null;if(n!==null){var a=n.next;i=a;do{if((i.tag&e)===e){n=void 0;var d=i.create,x=i.inst;n=d(),x.destroy=n}i=i.next}while(i!==a)}}catch(P){Ue(t,t.return,P)}}function dn(e,t,i){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var d=a.next;n=d;do{if((n.tag&e)===e){var x=n.inst,P=x.destroy;if(P!==void 0){x.destroy=void 0,a=t;var B=i,F=P;try{F()}catch($){Ue(a,B,$)}}}n=n.next}while(n!==d)}}catch($){Ue(t,t.return,$)}}function qp(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Df(t,i)}catch(n){Ue(e,e.return,n)}}}function Ip(e,t,i){i.props=ea(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){Ue(e,t,n)}}function Fr(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof i=="function"?e.refCleanup=i(n):i.current=n}}catch(a){Ue(e,t,a)}}function Si(e,t){var i=e.ref,n=e.refCleanup;if(i!==null)if(typeof n=="function")try{n()}catch(a){Ue(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(a){Ue(e,t,a)}else i.current=null}function Hp(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(a){Ue(e,e.return,a)}}function td(e,t,i){try{var n=e.stateNode;cy(n,e.type,i,t),n[st]=t}catch(a){Ue(e,e.return,a)}}function Vp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_n(e.type)||e.tag===4}function id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_n(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nd(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Hc));else if(n!==4&&(n===27&&_n(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(nd(e,t,i),e=e.sibling;e!==null;)nd(e,t,i),e=e.sibling}function Oc(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(n===27&&_n(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Oc(e,t,i),e=e.sibling;e!==null;)Oc(e,t,i),e=e.sibling}function Gp(e){var t=e.stateNode,i=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);vt(t,n,i),t[Ge]=e,t[st]=i}catch(d){Ue(e,e.return,d)}}var qi=!1,$e=!1,ad=!1,Yp=typeof WeakSet=="function"?WeakSet:Set,dt=null;function I_(e,t){if(e=e.containerInfo,xd=Xc,e=tf(e),il(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var a=n.anchorOffset,d=n.focusNode;n=n.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var x=0,P=-1,B=-1,F=0,$=0,ee=e,K=null;t:for(;;){for(var X;ee!==i||a!==0&&ee.nodeType!==3||(P=x+a),ee!==d||n!==0&&ee.nodeType!==3||(B=x+n),ee.nodeType===3&&(x+=ee.nodeValue.length),(X=ee.firstChild)!==null;)K=ee,ee=X;for(;;){if(ee===e)break t;if(K===i&&++F===a&&(P=x),K===d&&++$===n&&(B=x),(X=ee.nextSibling)!==null)break;ee=K,K=ee.parentNode}ee=X}i=P===-1||B===-1?null:{start:P,end:B}}else i=null}i=i||{start:0,end:0}}else i=null;for(Md={focusedElem:e,selectionRange:i},Xc=!1,dt=t;dt!==null;)if(t=dt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,dt=e;else for(;dt!==null;){switch(t=dt,d=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=t,a=d.memoizedProps,d=d.memoizedState,n=i.stateNode;try{var ge=ea(i.type,a,i.elementType===i.type);e=n.getSnapshotBeforeUpdate(ge,d),n.__reactInternalSnapshotBeforeUpdate=e}catch(pe){Ue(i,i.return,pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)kd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,dt=e;break}dt=t.return}}function Qp(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:un(e,i),n&4&&Qr(5,i);break;case 1:if(un(e,i),n&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(x){Ue(i,i.return,x)}else{var a=ea(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(x){Ue(i,i.return,x)}}n&64&&qp(i),n&512&&Fr(i,i.return);break;case 3:if(un(e,i),n&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Df(e,t)}catch(x){Ue(i,i.return,x)}}break;case 27:t===null&&n&4&&Gp(i);case 26:case 5:un(e,i),t===null&&n&4&&Hp(i),n&512&&Fr(i,i.return);break;case 12:un(e,i);break;case 13:un(e,i),n&4&&Xp(e,i),n&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Z_.bind(null,i),hy(e,i))));break;case 22:if(n=i.memoizedState!==null||qi,!n){t=t!==null&&t.memoizedState!==null||$e,a=qi;var d=$e;qi=n,($e=t)&&!d?fn(e,i,(i.subtreeFlags&8772)!==0):un(e,i),qi=a,$e=d}break;case 30:break;default:un(e,i)}}function Fp(e){var t=e.alternate;t!==null&&(e.alternate=null,Fp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Un(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,Nt=!1;function Ii(e,t,i){for(i=i.child;i!==null;)Kp(e,t,i),i=i.sibling}function Kp(e,t,i){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Xi,i)}catch{}switch(i.tag){case 26:$e||Si(i,t),Ii(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:$e||Si(i,t);var n=Ve,a=Nt;_n(i.type)&&(Ve=i.stateNode,Nt=!1),Ii(e,t,i),is(i.stateNode),Ve=n,Nt=a;break;case 5:$e||Si(i,t);case 6:if(n=Ve,a=Nt,Ve=null,Ii(e,t,i),Ve=n,Nt=a,Ve!==null)if(Nt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(i.stateNode)}catch(d){Ue(i,t,d)}else try{Ve.removeChild(i.stateNode)}catch(d){Ue(i,t,d)}break;case 18:Ve!==null&&(Nt?(e=Ve,jh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ds(e)):jh(Ve,i.stateNode));break;case 4:n=Ve,a=Nt,Ve=i.stateNode.containerInfo,Nt=!0,Ii(e,t,i),Ve=n,Nt=a;break;case 0:case 11:case 14:case 15:$e||dn(2,i,t),$e||dn(4,i,t),Ii(e,t,i);break;case 1:$e||(Si(i,t),n=i.stateNode,typeof n.componentWillUnmount=="function"&&Ip(i,t,n)),Ii(e,t,i);break;case 21:Ii(e,t,i);break;case 22:$e=(n=$e)||i.memoizedState!==null,Ii(e,t,i),$e=n;break;default:Ii(e,t,i)}}function Xp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ds(e)}catch(i){Ue(t,t.return,i)}}function H_(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Yp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Yp),t;default:throw Error(s(435,e.tag))}}function rd(e,t){var i=H_(e);t.forEach(function(n){var a=$_.bind(null,e,n);i.has(n)||(i.add(n),n.then(a,a))})}function Vt(e,t){var i=t.deletions;if(i!==null)for(var n=0;n<i.length;n++){var a=i[n],d=e,x=t,P=x;e:for(;P!==null;){switch(P.tag){case 27:if(_n(P.type)){Ve=P.stateNode,Nt=!1;break e}break;case 5:Ve=P.stateNode,Nt=!1;break e;case 3:case 4:Ve=P.stateNode.containerInfo,Nt=!0;break e}P=P.return}if(Ve===null)throw Error(s(160));Kp(d,x,a),Ve=null,Nt=!1,d=a.alternate,d!==null&&(d.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Zp(t,e),t=t.sibling}var ui=null;function Zp(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vt(t,e),Gt(e),n&4&&(dn(3,e,e.return),Qr(3,e),dn(5,e,e.return));break;case 1:Vt(t,e),Gt(e),n&512&&($e||i===null||Si(i,i.return)),n&64&&qi&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?n:i.concat(n))));break;case 26:var a=ui;if(Vt(t,e),Gt(e),n&512&&($e||i===null||Si(i,i.return)),n&4){var d=i!==null?i.memoizedState:null;if(n=e.memoizedState,i===null)if(n===null)if(e.stateNode===null){e:{n=e.type,i=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":d=a.getElementsByTagName("title")[0],(!d||d[ci]||d[Ge]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=a.createElement(n),a.head.insertBefore(d,a.querySelector("head > title"))),vt(d,n,i),d[Ge]=e,Ye(d),n=d;break e;case"link":var x=Gh("link","href",a).get(n+(i.href||""));if(x){for(var P=0;P<x.length;P++)if(d=x[P],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){x.splice(P,1);break t}}d=a.createElement(n),vt(d,n,i),a.head.appendChild(d);break;case"meta":if(x=Gh("meta","content",a).get(n+(i.content||""))){for(P=0;P<x.length;P++)if(d=x[P],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){x.splice(P,1);break t}}d=a.createElement(n),vt(d,n,i),a.head.appendChild(d);break;default:throw Error(s(468,n))}d[Ge]=e,Ye(d),n=d}e.stateNode=n}else Yh(a,e.type,e.stateNode);else e.stateNode=Vh(a,n,e.memoizedProps);else d!==n?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,n===null?Yh(a,e.type,e.stateNode):Vh(a,n,e.memoizedProps)):n===null&&e.stateNode!==null&&td(e,e.memoizedProps,i.memoizedProps)}break;case 27:Vt(t,e),Gt(e),n&512&&($e||i===null||Si(i,i.return)),i!==null&&n&4&&td(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Vt(t,e),Gt(e),n&512&&($e||i===null||Si(i,i.return)),e.flags&32){a=e.stateNode;try{wa(a,"")}catch(X){Ue(e,e.return,X)}}n&4&&e.stateNode!=null&&(a=e.memoizedProps,td(e,a,i!==null?i.memoizedProps:a)),n&1024&&(ad=!0);break;case 6:if(Vt(t,e),Gt(e),n&4){if(e.stateNode===null)throw Error(s(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(X){Ue(e,e.return,X)}}break;case 3:if(Qc=null,a=ui,ui=Gc(t.containerInfo),Vt(t,e),ui=a,Gt(e),n&4&&i!==null&&i.memoizedState.isDehydrated)try{ds(t.containerInfo)}catch(X){Ue(e,e.return,X)}ad&&(ad=!1,$p(e));break;case 4:n=ui,ui=Gc(e.stateNode.containerInfo),Vt(t,e),Gt(e),ui=n;break;case 12:Vt(t,e),Gt(e);break;case 13:Vt(t,e),Gt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(ud=Bt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,rd(e,n)));break;case 22:a=e.memoizedState!==null;var B=i!==null&&i.memoizedState!==null,F=qi,$=$e;if(qi=F||a,$e=$||B,Vt(t,e),$e=$,qi=F,Gt(e),n&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(i===null||B||qi||$e||ta(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){B=i=t;try{if(d=B.stateNode,a)x=d.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{P=B.stateNode;var ee=B.memoizedProps.style,K=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;P.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(X){Ue(B,B.return,X)}}}else if(t.tag===6){if(i===null){B=t;try{B.stateNode.nodeValue=a?"":B.memoizedProps}catch(X){Ue(B,B.return,X)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(i=n.retryQueue,i!==null&&(n.retryQueue=null,rd(e,i))));break;case 19:Vt(t,e),Gt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,rd(e,n)));break;case 30:break;case 21:break;default:Vt(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{for(var i,n=e.return;n!==null;){if(Vp(n)){i=n;break}n=n.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var a=i.stateNode,d=id(e);Oc(e,d,a);break;case 5:var x=i.stateNode;i.flags&32&&(wa(x,""),i.flags&=-33);var P=id(e);Oc(e,P,x);break;case 3:case 4:var B=i.stateNode.containerInfo,F=id(e);nd(e,F,B);break;default:throw Error(s(161))}}catch($){Ue(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $p(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$p(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function un(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Qp(e,t.alternate,t),t=t.sibling}function ta(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:dn(4,t,t.return),ta(t);break;case 1:Si(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Ip(t,t.return,i),ta(t);break;case 27:is(t.stateNode);case 26:case 5:Si(t,t.return),ta(t);break;case 22:t.memoizedState===null&&ta(t);break;case 30:ta(t);break;default:ta(t)}e=e.sibling}}function fn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,a=e,d=t,x=d.flags;switch(d.tag){case 0:case 11:case 15:fn(a,d,i),Qr(4,d);break;case 1:if(fn(a,d,i),n=d,a=n.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(F){Ue(n,n.return,F)}if(n=d,a=n.updateQueue,a!==null){var P=n.stateNode;try{var B=a.shared.hiddenCallbacks;if(B!==null)for(a.shared.hiddenCallbacks=null,a=0;a<B.length;a++)Ef(B[a],P)}catch(F){Ue(n,n.return,F)}}i&&x&64&&qp(d),Fr(d,d.return);break;case 27:Gp(d);case 26:case 5:fn(a,d,i),i&&n===null&&x&4&&Hp(d),Fr(d,d.return);break;case 12:fn(a,d,i);break;case 13:fn(a,d,i),i&&x&4&&Xp(a,d);break;case 22:d.memoizedState===null&&fn(a,d,i),Fr(d,d.return);break;case 30:break;default:fn(a,d,i)}t=t.sibling}}function sd(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&kr(i))}function cd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&kr(e))}function wi(e,t,i,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jp(e,t,i,n),t=t.sibling}function Jp(e,t,i,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:wi(e,t,i,n),a&2048&&Qr(9,t);break;case 1:wi(e,t,i,n);break;case 3:wi(e,t,i,n),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&kr(e)));break;case 12:if(a&2048){wi(e,t,i,n),e=t.stateNode;try{var d=t.memoizedProps,x=d.id,P=d.onPostCommit;typeof P=="function"&&P(x,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){Ue(t,t.return,B)}}else wi(e,t,i,n);break;case 13:wi(e,t,i,n);break;case 23:break;case 22:d=t.stateNode,x=t.alternate,t.memoizedState!==null?d._visibility&2?wi(e,t,i,n):Kr(e,t):d._visibility&2?wi(e,t,i,n):(d._visibility|=2,Ia(e,t,i,n,(t.subtreeFlags&10256)!==0)),a&2048&&sd(x,t);break;case 24:wi(e,t,i,n),a&2048&&cd(t.alternate,t);break;default:wi(e,t,i,n)}}function Ia(e,t,i,n,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var d=e,x=t,P=i,B=n,F=x.flags;switch(x.tag){case 0:case 11:case 15:Ia(d,x,P,B,a),Qr(8,x);break;case 23:break;case 22:var $=x.stateNode;x.memoizedState!==null?$._visibility&2?Ia(d,x,P,B,a):Kr(d,x):($._visibility|=2,Ia(d,x,P,B,a)),a&&F&2048&&sd(x.alternate,x);break;case 24:Ia(d,x,P,B,a),a&&F&2048&&cd(x.alternate,x);break;default:Ia(d,x,P,B,a)}t=t.sibling}}function Kr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,n=t,a=n.flags;switch(n.tag){case 22:Kr(i,n),a&2048&&sd(n.alternate,n);break;case 24:Kr(i,n),a&2048&&cd(n.alternate,n);break;default:Kr(i,n)}t=t.sibling}}var Xr=8192;function Ha(e){if(e.subtreeFlags&Xr)for(e=e.child;e!==null;)Wp(e),e=e.sibling}function Wp(e){switch(e.tag){case 26:Ha(e),e.flags&Xr&&e.memoizedState!==null&&Dy(ui,e.memoizedState,e.memoizedProps);break;case 5:Ha(e);break;case 3:case 4:var t=ui;ui=Gc(e.stateNode.containerInfo),Ha(e),ui=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Xr,Xr=16777216,Ha(e),Xr=t):Ha(e));break;default:Ha(e)}}function eh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];dt=n,ih(n,e)}eh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)th(e),e=e.sibling}function th(e){switch(e.tag){case 0:case 11:case 15:Zr(e),e.flags&2048&&dn(9,e,e.return);break;case 3:Zr(e);break;case 12:Zr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,kc(e)):Zr(e);break;default:Zr(e)}}function kc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var n=t[i];dt=n,ih(n,e)}eh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:dn(8,t,t.return),kc(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,kc(t));break;default:kc(t)}e=e.sibling}}function ih(e,t){for(;dt!==null;){var i=dt;switch(i.tag){case 0:case 11:case 15:dn(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var n=i.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:kr(i.memoizedState.cache)}if(n=i.child,n!==null)n.return=i,dt=n;else e:for(i=e;dt!==null;){n=dt;var a=n.sibling,d=n.return;if(Fp(n),n===i){dt=null;break e}if(a!==null){a.return=d,dt=a;break e}dt=d}}}var V_={getCacheForType:function(e){var t=wt(nt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i}},G_=typeof WeakMap=="function"?WeakMap:Map,Ae=0,Be=null,Re=null,xe=0,Pe=0,Yt=null,pn=!1,Va=!1,od=!1,Hi=0,Ke=0,hn=0,ia=0,ld=0,ei=0,Ga=0,$r=null,jt=null,dd=!1,ud=0,Ac=1/0,Pc=null,mn=null,gt=0,gn=null,Ya=null,Qa=0,fd=0,pd=null,nh=null,Jr=0,hd=null;function Qt(){if((Ae&2)!==0&&xe!==0)return xe&-xe;if(j.T!==null){var e=Aa;return e!==0?e:Sd()}return jn()}function ah(){ei===0&&(ei=(xe&536870912)===0||Oe?_a():536870912);var e=Wt.current;return e!==null&&(e.flags|=32),ei}function Ft(e,t,i){(e===Be&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)&&(Fa(e,0),vn(e,xe,ei,!1)),ri(e,i),((Ae&2)===0||e!==Be)&&(e===Be&&((Ae&2)===0&&(ia|=i),Ke===4&&vn(e,xe,ei,!1)),Ri(e))}function rh(e,t,i){if((Ae&6)!==0)throw Error(s(327));var n=!i&&(t&124)===0&&(t&e.expiredLanes)===0||ai(e,t),a=n?F_(e,t):vd(e,t,!0),d=n;do{if(a===0){Va&&!n&&vn(e,t,0,!1);break}else{if(i=e.current.alternate,d&&!Y_(i)){a=vd(e,t,!1),d=!1;continue}if(a===2){if(d=t,e.errorRecoveryDisabledLanes&d)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{var P=e;a=$r;var B=P.current.memoizedState.isDehydrated;if(B&&(Fa(P,x).flags|=256),x=vd(P,x,!1),x!==2){if(od&&!B){P.errorRecoveryDisabledLanes|=d,ia|=d,a=4;break e}d=jt,jt=a,d!==null&&(jt===null?jt=d:jt.push.apply(jt,d))}a=x}if(d=!1,a!==2)continue}}if(a===1){Fa(e,0),vn(e,t,0,!0);break}e:{switch(n=e,d=a,d){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:vn(n,t,ei,!pn);break e;case 2:jt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(a=ud+300-Bt(),10<a)){if(vn(n,t,ei,!pn),va(n,0,!0)!==0)break e;n.timeoutHandle=Ph(sh.bind(null,n,i,jt,Pc,dd,t,ei,ia,Ga,pn,d,2,-0,0),a);break e}sh(n,i,jt,Pc,dd,t,ei,ia,Ga,pn,d,0,-0,0)}}break}while(!0);Ri(e)}function sh(e,t,i,n,a,d,x,P,B,F,$,ee,K,X){if(e.timeoutHandle=-1,ee=t.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(rs={stylesheets:null,count:0,unsuspend:Ey},Wp(t),ee=xy(),ee!==null)){e.cancelPendingCommit=ee(ph.bind(null,e,t,d,i,n,a,x,P,B,$,1,K,X)),vn(e,d,x,!F);return}ph(e,t,d,i,n,a,x,P,B)}function Y_(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var n=0;n<i.length;n++){var a=i[n],d=a.getSnapshot;a=a.value;try{if(!It(d(),a))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t,i,n){t&=~ld,t&=~ia,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var d=31-yt(a),x=1<<d;n[d]=-1,a&=~x}i!==0&&mr(e,i,t)}function Nc(){return(Ae&6)===0?(Wr(0),!1):!0}function md(){if(Re!==null){if(Pe===0)var e=Re.return;else e=Re,Pi=Zn=null,kl(e),Ba=null,Vr=0,e=Re;for(;e!==null;)Bp(e.alternate,e),e=e.return;Re=null}}function Fa(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,ly(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),md(),Be=e,Re=i=Oi(e.current,null),xe=t,Pe=0,Yt=null,pn=!1,Va=ai(e,t),od=!1,Ga=ei=ld=ia=hn=Ke=0,jt=$r=null,dd=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var a=31-yt(n),d=1<<a;t|=e[a],n&=~d}return Hi=t,nc(),i}function ch(e,t){be=null,j.H=wc,t===Pr||t===fc?(t=Tf(),Pe=3):t===Sf?(t=Tf(),Pe=4):Pe=t===Cp?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Yt=t,Re===null&&(Ke=1,Dc(e,Xt(t,e.current)))}function oh(){var e=j.H;return j.H=wc,e===null?wc:e}function lh(){var e=j.A;return j.A=V_,e}function gd(){Ke=4,pn||(xe&4194048)!==xe&&Wt.current!==null||(Va=!0),(hn&134217727)===0&&(ia&134217727)===0||Be===null||vn(Be,xe,ei,!1)}function vd(e,t,i){var n=Ae;Ae|=2;var a=oh(),d=lh();(Be!==e||xe!==t)&&(Pc=null,Fa(e,t)),t=!1;var x=Ke;e:do try{if(Pe!==0&&Re!==null){var P=Re,B=Yt;switch(Pe){case 8:md(),x=6;break e;case 3:case 2:case 9:case 6:Wt.current===null&&(t=!0);var F=Pe;if(Pe=0,Yt=null,Ka(e,P,B,F),i&&Va){x=0;break e}break;default:F=Pe,Pe=0,Yt=null,Ka(e,P,B,F)}}Q_(),x=Ke;break}catch($){ch(e,$)}while(!0);return t&&e.shellSuspendCounter++,Pi=Zn=null,Ae=n,j.H=a,j.A=d,Re===null&&(Be=null,xe=0,nc()),x}function Q_(){for(;Re!==null;)dh(Re)}function F_(e,t){var i=Ae;Ae|=2;var n=oh(),a=lh();Be!==e||xe!==t?(Pc=null,Ac=Bt()+500,Fa(e,t)):Va=ai(e,t);e:do try{if(Pe!==0&&Re!==null){t=Re;var d=Yt;t:switch(Pe){case 1:Pe=0,Yt=null,Ka(e,t,d,1);break;case 2:case 9:if(wf(d)){Pe=0,Yt=null,uh(t);break}t=function(){Pe!==2&&Pe!==9||Be!==e||(Pe=7),Ri(e)},d.then(t,t);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:wf(d)?(Pe=0,Yt=null,uh(t)):(Pe=0,Yt=null,Ka(e,t,d,7));break;case 5:var x=null;switch(Re.tag){case 26:x=Re.memoizedState;case 5:case 27:var P=Re;if(!x||Qh(x)){Pe=0,Yt=null;var B=P.sibling;if(B!==null)Re=B;else{var F=P.return;F!==null?(Re=F,jc(F)):Re=null}break t}}Pe=0,Yt=null,Ka(e,t,d,5);break;case 6:Pe=0,Yt=null,Ka(e,t,d,6);break;case 8:md(),Ke=6;break e;default:throw Error(s(462))}}K_();break}catch($){ch(e,$)}while(!0);return Pi=Zn=null,j.H=n,j.A=a,Ae=i,Re!==null?0:(Be=null,xe=0,nc(),Ke)}function K_(){for(;Re!==null&&!Ki();)dh(Re)}function dh(e){var t=zp(e.alternate,e,Hi);e.memoizedProps=e.pendingProps,t===null?jc(e):Re=t}function uh(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Op(i,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=Op(i,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:kl(t);default:Bp(i,t),t=Re=ff(t,Hi),t=zp(i,t,Hi)}e.memoizedProps=e.pendingProps,t===null?jc(e):Re=t}function Ka(e,t,i,n){Pi=Zn=null,kl(t),Ba=null,Vr=0;var a=t.return;try{if(z_(e,a,t,i,xe)){Ke=1,Dc(e,Xt(i,e.current)),Re=null;return}}catch(d){if(a!==null)throw Re=a,d;Ke=1,Dc(e,Xt(i,e.current)),Re=null;return}t.flags&32768?(Oe||n===1?e=!0:Va||(xe&536870912)!==0?e=!1:(pn=e=!0,(n===2||n===9||n===3||n===6)&&(n=Wt.current,n!==null&&n.tag===13&&(n.flags|=16384))),fh(t,e)):jc(t)}function jc(e){var t=e;do{if((t.flags&32768)!==0){fh(t,pn);return}e=t.return;var i=B_(t.alternate,t,Hi);if(i!==null){Re=i;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Ke===0&&(Ke=5)}function fh(e,t){do{var i=q_(e.alternate,e);if(i!==null){i.flags&=32767,Re=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Re=e;return}Re=e=i}while(e!==null);Ke=6,Re=null}function ph(e,t,i,n,a,d,x,P,B){e.cancelPendingCommit=null;do zc();while(gt!==0);if((Ae&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(d=t.lanes|t.childLanes,d|=cl,hr(e,i,d,x,P,B),e===Be&&(Re=Be=null,xe=0),Ya=t,gn=e,Qa=i,fd=d,pd=a,nh=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,J_(On,function(){return _h(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=j.T,j.T=null,a=V.p,V.p=2,x=Ae,Ae|=4;try{I_(e,t,i)}finally{Ae=x,V.p=a,j.T=n}}gt=1,hh(),mh(),gh()}}function hh(){if(gt===1){gt=0;var e=gn,t=Ya,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=j.T,j.T=null;var n=V.p;V.p=2;var a=Ae;Ae|=4;try{Zp(t,e);var d=Md,x=tf(e.containerInfo),P=d.focusedElem,B=d.selectionRange;if(x!==P&&P&&P.ownerDocument&&ef(P.ownerDocument.documentElement,P)){if(B!==null&&il(P)){var F=B.start,$=B.end;if($===void 0&&($=F),"selectionStart"in P)P.selectionStart=F,P.selectionEnd=Math.min($,P.value.length);else{var ee=P.ownerDocument||document,K=ee&&ee.defaultView||window;if(K.getSelection){var X=K.getSelection(),ge=P.textContent.length,pe=Math.min(B.start,ge),ze=B.end===void 0?pe:Math.min(B.end,ge);!X.extend&&pe>ze&&(x=ze,ze=pe,pe=x);var G=Wu(P,pe),I=Wu(P,ze);if(G&&I&&(X.rangeCount!==1||X.anchorNode!==G.node||X.anchorOffset!==G.offset||X.focusNode!==I.node||X.focusOffset!==I.offset)){var Q=ee.createRange();Q.setStart(G.node,G.offset),X.removeAllRanges(),pe>ze?(X.addRange(Q),X.extend(I.node,I.offset)):(Q.setEnd(I.node,I.offset),X.addRange(Q))}}}}for(ee=[],X=P;X=X.parentNode;)X.nodeType===1&&ee.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ee.length;P++){var J=ee[P];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Xc=!!xd,Md=xd=null}finally{Ae=a,V.p=n,j.T=i}}e.current=t,gt=2}}function mh(){if(gt===2){gt=0;var e=gn,t=Ya,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=j.T,j.T=null;var n=V.p;V.p=2;var a=Ae;Ae|=4;try{Qp(e,t.alternate,t)}finally{Ae=a,V.p=n,j.T=i}}gt=3}}function gh(){if(gt===4||gt===3){gt=0,Fs();var e=gn,t=Ya,i=Qa,n=nh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?gt=5:(gt=0,Ya=gn=null,vh(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(mn=null),gr(i),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Xi,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=j.T,a=V.p,V.p=2,j.T=null;try{for(var d=e.onRecoverableError,x=0;x<n.length;x++){var P=n[x];d(P.value,{componentStack:P.stack})}}finally{j.T=t,V.p=a}}(Qa&3)!==0&&zc(),Ri(e),a=e.pendingLanes,(i&4194090)!==0&&(a&42)!==0?e===hd?Jr++:(Jr=0,hd=e):Jr=0,Wr(0)}}function vh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,kr(t)))}function zc(e){return hh(),mh(),gh(),_h()}function _h(){if(gt!==5)return!1;var e=gn,t=fd;fd=0;var i=gr(Qa),n=j.T,a=V.p;try{V.p=32>i?32:i,j.T=null,i=pd,pd=null;var d=gn,x=Qa;if(gt=0,Ya=gn=null,Qa=0,(Ae&6)!==0)throw Error(s(331));var P=Ae;if(Ae|=4,th(d.current),Jp(d,d.current,x,i),Ae=P,Wr(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Xi,d)}catch{}return!0}finally{V.p=a,j.T=n,vh(e,t)}}function yh(e,t,i){t=Xt(i,t),t=Ql(e.stateNode,t,2),e=sn(e,t,2),e!==null&&(ri(e,2),Ri(e))}function Ue(e,t,i){if(e.tag===3)yh(e,e,i);else for(;t!==null;){if(t.tag===3){yh(t,e,i);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mn===null||!mn.has(n))){e=Xt(i,e),i=Rp(2),n=sn(t,i,2),n!==null&&(Tp(i,n,t,e),ri(n,2),Ri(n));break}}t=t.return}}function _d(e,t,i){var n=e.pingCache;if(n===null){n=e.pingCache=new G_;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(i)||(od=!0,a.add(i),e=X_.bind(null,e,t,i),t.then(e,e))}function X_(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Be===e&&(xe&i)===i&&(Ke===4||Ke===3&&(xe&62914560)===xe&&300>Bt()-ud?(Ae&2)===0&&Fa(e,0):ld|=i,Ga===xe&&(Ga=0)),Ri(e)}function bh(e,t){t===0&&(t=pr()),e=Ma(e,t),e!==null&&(ri(e,t),Ri(e))}function Z_(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),bh(e,i)}function $_(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(i=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}n!==null&&n.delete(t),bh(e,i)}function J_(e,t){return ha(e,t)}var Uc=null,Xa=null,yd=!1,Bc=!1,bd=!1,na=0;function Ri(e){e!==Xa&&e.next===null&&(Xa===null?Uc=Xa=e:Xa=Xa.next=e),Bc=!0,yd||(yd=!0,ey())}function Wr(e,t){if(!bd&&Bc){bd=!0;do for(var i=!1,n=Uc;n!==null;){if(e!==0){var a=n.pendingLanes;if(a===0)var d=0;else{var x=n.suspendedLanes,P=n.pingedLanes;d=(1<<31-yt(42|e)+1)-1,d&=a&~(x&~P),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,Th(n,d))}else d=xe,d=va(n,n===Be?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(d&3)===0||ai(n,d)||(i=!0,Th(n,d));n=n.next}while(i);bd=!1}}function W_(){Sh()}function Sh(){Bc=yd=!1;var e=0;na!==0&&(oy()&&(e=na),na=0);for(var t=Bt(),i=null,n=Uc;n!==null;){var a=n.next,d=wh(n,t);d===0?(n.next=null,i===null?Uc=a:i.next=a,a===null&&(Xa=i)):(i=n,(e!==0||(d&3)!==0)&&(Bc=!0)),n=a}Wr(e)}function wh(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var x=31-yt(d),P=1<<x,B=a[x];B===-1?((P&i)===0||(P&n)!==0)&&(a[x]=Nn(P,t)):B<=t&&(e.expiredLanes|=P),d&=~P}if(t=Be,i=xe,i=va(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,i===0||e===t&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Fi(n),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ai(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(n!==null&&Fi(n),gr(i)){case 2:case 8:i=or;break;case 32:i=On;break;case 268435456:i=ga;break;default:i=On}return n=Rh.bind(null,e),i=ha(i,n),e.callbackPriority=t,e.callbackNode=i,t}return n!==null&&n!==null&&Fi(n),e.callbackPriority=2,e.callbackNode=null,2}function Rh(e,t){if(gt!==0&&gt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(zc()&&e.callbackNode!==i)return null;var n=xe;return n=va(e,e===Be?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(rh(e,n,t),wh(e,Bt()),e.callbackNode!=null&&e.callbackNode===i?Rh.bind(null,e):null)}function Th(e,t){if(zc())return null;rh(e,t,!0)}function ey(){dy(function(){(Ae&6)!==0?ha(cr,W_):Sh()})}function Sd(){return na===0&&(na=_a()),na}function Ch(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zs(""+e)}function Eh(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function ty(e,t,i,n,a){if(t==="submit"&&i&&i.stateNode===a){var d=Ch((a[st]||null).action),x=n.submitter;x&&(t=(t=x[st]||null)?Ch(t.formAction):x.getAttribute("formAction"),t!==null&&(d=t,x=null));var P=new ec("action","action",null,n,a);e.push({event:P,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(na!==0){var B=x?Eh(a,x):new FormData(a);Il(i,{pending:!0,data:B,method:a.method,action:d},null,B)}}else typeof d=="function"&&(P.preventDefault(),B=x?Eh(a,x):new FormData(a),Il(i,{pending:!0,data:B,method:a.method,action:d},d,B))},currentTarget:a}]})}}for(var wd=0;wd<sl.length;wd++){var Rd=sl[wd],iy=Rd.toLowerCase(),ny=Rd[0].toUpperCase()+Rd.slice(1);di(iy,"on"+ny)}di(rf,"onAnimationEnd"),di(sf,"onAnimationIteration"),di(cf,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(b_,"onTransitionRun"),di(S_,"onTransitionStart"),di(w_,"onTransitionCancel"),di(of,"onTransitionEnd"),ct("onMouseEnter",["mouseout","mouseover"]),ct("onMouseLeave",["mouseout","mouseover"]),ct("onPointerEnter",["pointerout","pointerover"]),ct("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ay=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(es));function Dh(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var n=e[i],a=n.event;n=n.listeners;e:{var d=void 0;if(t)for(var x=n.length-1;0<=x;x--){var P=n[x],B=P.instance,F=P.currentTarget;if(P=P.listener,B!==d&&a.isPropagationStopped())break e;d=P,a.currentTarget=F;try{d(a)}catch($){Ec($)}a.currentTarget=null,d=B}else for(x=0;x<n.length;x++){if(P=n[x],B=P.instance,F=P.currentTarget,P=P.listener,B!==d&&a.isPropagationStopped())break e;d=P,a.currentTarget=F;try{d(a)}catch($){Ec($)}a.currentTarget=null,d=B}}}}function Te(e,t){var i=t[zn];i===void 0&&(i=t[zn]=new Set);var n=e+"__bubble";i.has(n)||(xh(t,e,2,!1),i.add(n))}function Td(e,t,i){var n=0;t&&(n|=4),xh(i,e,n,t)}var qc="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[qc]){e[qc]=!0,Ks.forEach(function(i){i!=="selectionchange"&&(ay.has(i)||Td(i,!1,e),Td(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qc]||(t[qc]=!0,Td("selectionchange",!1,t))}}function xh(e,t,i,n){switch(Jh(t)){case 2:var a=Oy;break;case 8:a=ky;break;default:a=Bd}i=a.bind(null,t,i,e),a=void 0,!Fo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,i,{capture:!0,passive:a}):e.addEventListener(t,i,!0):a!==void 0?e.addEventListener(t,i,{passive:a}):e.addEventListener(t,i,!1)}function Ed(e,t,i,n,a){var d=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var x=n.tag;if(x===3||x===4){var P=n.stateNode.containerInfo;if(P===a)break;if(x===4)for(x=n.return;x!==null;){var B=x.tag;if((B===3||B===4)&&x.stateNode.containerInfo===a)return;x=x.return}for(;P!==null;){if(x=Dt(P),x===null)return;if(B=x.tag,B===5||B===6||B===26||B===27){n=d=x;continue e}P=P.parentNode}}n=n.return}Pu(function(){var F=d,$=Yo(i),ee=[];e:{var K=lf.get(e);if(K!==void 0){var X=ec,ge=e;switch(e){case"keypress":if(Js(i)===0)break e;case"keydown":case"keyup":X=Jv;break;case"focusin":ge="focus",X=$o;break;case"focusout":ge="blur",X=$o;break;case"beforeblur":case"afterblur":X=$o;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=qv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=t_;break;case rf:case sf:case cf:X=Vv;break;case of:X=n_;break;case"scroll":case"scrollend":X=Uv;break;case"wheel":X=r_;break;case"copy":case"cut":case"paste":X=Yv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Bu;break;case"toggle":case"beforetoggle":X=c_}var pe=(t&4)!==0,ze=!pe&&(e==="scroll"||e==="scrollend"),G=pe?K!==null?K+"Capture":null:K;pe=[];for(var I=F,Q;I!==null;){var J=I;if(Q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||Q===null||G===null||(J=yr(I,G),J!=null&&pe.push(ts(I,J,Q))),ze)break;I=I.return}0<pe.length&&(K=new X(K,ge,null,i,$),ee.push({event:K,listeners:pe}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",K&&i!==Go&&(ge=i.relatedTarget||i.fromElement)&&(Dt(ge)||ge[St]))break e;if((X||K)&&(K=$.window===$?$:(K=$.ownerDocument)?K.defaultView||K.parentWindow:window,X?(ge=i.relatedTarget||i.toElement,X=F,ge=ge?Dt(ge):null,ge!==null&&(ze=y(ge),pe=ge.tag,ge!==ze||pe!==5&&pe!==27&&pe!==6)&&(ge=null)):(X=null,ge=F),X!==ge)){if(pe=zu,J="onMouseLeave",G="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(pe=Bu,J="onPointerLeave",G="onPointerEnter",I="pointer"),ze=X==null?K:Ji(X),Q=ge==null?K:Ji(ge),K=new pe(J,I+"leave",X,i,$),K.target=ze,K.relatedTarget=Q,J=null,Dt($)===F&&(pe=new pe(G,I+"enter",ge,i,$),pe.target=Q,pe.relatedTarget=ze,J=pe),ze=J,X&&ge)t:{for(pe=X,G=ge,I=0,Q=pe;Q;Q=Za(Q))I++;for(Q=0,J=G;J;J=Za(J))Q++;for(;0<I-Q;)pe=Za(pe),I--;for(;0<Q-I;)G=Za(G),Q--;for(;I--;){if(pe===G||G!==null&&pe===G.alternate)break t;pe=Za(pe),G=Za(G)}pe=null}else pe=null;X!==null&&Mh(ee,K,X,pe,!1),ge!==null&&ze!==null&&Mh(ee,ze,ge,pe,!0)}}e:{if(K=F?Ji(F):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var oe=Fu;else if(Yu(K))if(Ku)oe=v_;else{oe=m_;var we=h_}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?F&&Vo(F.elementType)&&(oe=Fu):oe=g_;if(oe&&(oe=oe(e,F))){Qu(ee,oe,i,$);break e}we&&we(e,K,F),e==="focusout"&&F&&K.type==="number"&&F.memoizedProps.value!=null&&Ho(K,"number",K.value)}switch(we=F?Ji(F):window,e){case"focusin":(Yu(we)||we.contentEditable==="true")&&(Ea=we,nl=F,Dr=null);break;case"focusout":Dr=nl=Ea=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,nf(ee,i,$);break;case"selectionchange":if(y_)break;case"keydown":case"keyup":nf(ee,i,$)}var ue;if(Wo)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Ca?Vu(e,i)&&(he="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(he="onCompositionStart");he&&(qu&&i.locale!=="ko"&&(Ca||he!=="onCompositionStart"?he==="onCompositionEnd"&&Ca&&(ue=Nu()):(tn=$,Ko="value"in tn?tn.value:tn.textContent,Ca=!0)),we=Ic(F,he),0<we.length&&(he=new Uu(he,e,null,i,$),ee.push({event:he,listeners:we}),ue?he.data=ue:(ue=Gu(i),ue!==null&&(he.data=ue)))),(ue=l_?d_(e,i):u_(e,i))&&(he=Ic(F,"onBeforeInput"),0<he.length&&(we=new Uu("onBeforeInput","beforeinput",null,i,$),ee.push({event:we,listeners:he}),we.data=ue)),ty(ee,e,F,i,$)}Dh(ee,t)})}function ts(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ic(e,t){for(var i=t+"Capture",n=[];e!==null;){var a=e,d=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||d===null||(a=yr(e,i),a!=null&&n.unshift(ts(e,a,d)),a=yr(e,t),a!=null&&n.push(ts(e,a,d))),e.tag===3)return n;e=e.return}return[]}function Za(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Mh(e,t,i,n,a){for(var d=t._reactName,x=[];i!==null&&i!==n;){var P=i,B=P.alternate,F=P.stateNode;if(P=P.tag,B!==null&&B===n)break;P!==5&&P!==26&&P!==27||F===null||(B=F,a?(F=yr(i,d),F!=null&&x.unshift(ts(i,F,B))):a||(F=yr(i,d),F!=null&&x.push(ts(i,F,B)))),i=i.return}x.length!==0&&e.push({event:t,listeners:x})}var ry=/\r\n?/g,sy=/\u0000|\uFFFD/g;function Lh(e){return(typeof e=="string"?e:""+e).replace(ry,`
`).replace(sy,"")}function Oh(e,t){return t=Lh(t),Lh(e)===t}function Hc(){}function je(e,t,i,n,a,d){switch(i){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||wa(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&wa(e,""+n);break;case"className":Ce(e,"class",n);break;case"tabIndex":Ce(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Ce(e,i,n);break;case"style":ku(e,n,d);break;case"data":if(t!=="object"){Ce(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=Zs(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(t!=="input"&&je(e,t,"name",a.name,a,null),je(e,t,"formEncType",a.formEncType,a,null),je(e,t,"formMethod",a.formMethod,a,null),je(e,t,"formTarget",a.formTarget,a,null)):(je(e,t,"encType",a.encType,a,null),je(e,t,"method",a.method,a,null),je(e,t,"target",a.target,a,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(i);break}n=Zs(""+n),e.setAttribute(i,n);break;case"onClick":n!=null&&(e.onclick=Hc);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(s(61));if(i=n.__html,i!=null){if(a.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}i=Zs(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":n===!0?e.setAttribute(i,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":Te("beforetoggle",e),Te("toggle",e),re(e,"popover",n);break;case"xlinkActuate":de(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":de(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":de(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":de(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":de(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":de(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":de(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":de(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":de(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":re(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=jv.get(i)||i,re(e,i,n))}}function Dd(e,t,i,n,a,d){switch(i){case"style":ku(e,n,d);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(s(61));if(i=n.__html,i!=null){if(a.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof n=="string"?wa(e,n):(typeof n=="number"||typeof n=="bigint")&&wa(e,""+n);break;case"onScroll":n!=null&&Te("scroll",e);break;case"onScrollEnd":n!=null&&Te("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Hc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_r.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(a=i.endsWith("Capture"),t=i.slice(2,a?i.length-7:void 0),d=e[st]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(t,d,a),typeof n=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,a);break e}i in e?e[i]=n:n===!0?e.setAttribute(i,""):re(e,i,n)}}}function vt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var n=!1,a=!1,d;for(d in i)if(i.hasOwnProperty(d)){var x=i[d];if(x!=null)switch(d){case"src":n=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:je(e,t,d,x,i,null)}}a&&je(e,t,"srcSet",i.srcSet,i,null),n&&je(e,t,"src",i.src,i,null);return;case"input":Te("invalid",e);var P=d=x=a=null,B=null,F=null;for(n in i)if(i.hasOwnProperty(n)){var $=i[n];if($!=null)switch(n){case"name":a=$;break;case"type":x=$;break;case"checked":B=$;break;case"defaultChecked":F=$;break;case"value":d=$;break;case"defaultValue":P=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,t));break;default:je(e,t,n,$,i,null)}}xu(e,d,P,B,F,x,a,!1),en(e);return;case"select":Te("invalid",e),n=x=d=null;for(a in i)if(i.hasOwnProperty(a)&&(P=i[a],P!=null))switch(a){case"value":d=P;break;case"defaultValue":x=P;break;case"multiple":n=P;default:je(e,t,a,P,i,null)}t=d,i=x,e.multiple=!!n,t!=null?Sa(e,!!n,t,!1):i!=null&&Sa(e,!!n,i,!0);return;case"textarea":Te("invalid",e),d=a=n=null;for(x in i)if(i.hasOwnProperty(x)&&(P=i[x],P!=null))switch(x){case"value":n=P;break;case"defaultValue":a=P;break;case"children":d=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:je(e,t,x,P,i,null)}Lu(e,n,a,d),en(e);return;case"option":for(B in i)if(i.hasOwnProperty(B)&&(n=i[B],n!=null))switch(B){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:je(e,t,B,n,i,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(n=0;n<es.length;n++)Te(es[n],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in i)if(i.hasOwnProperty(F)&&(n=i[F],n!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:je(e,t,F,n,i,null)}return;default:if(Vo(t)){for($ in i)i.hasOwnProperty($)&&(n=i[$],n!==void 0&&Dd(e,t,$,n,i,void 0));return}}for(P in i)i.hasOwnProperty(P)&&(n=i[P],n!=null&&je(e,t,P,n,i,null))}function cy(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,d=null,x=null,P=null,B=null,F=null,$=null;for(X in i){var ee=i[X];if(i.hasOwnProperty(X)&&ee!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":B=ee;default:n.hasOwnProperty(X)||je(e,t,X,null,n,ee)}}for(var K in n){var X=n[K];if(ee=i[K],n.hasOwnProperty(K)&&(X!=null||ee!=null))switch(K){case"type":d=X;break;case"name":a=X;break;case"checked":F=X;break;case"defaultChecked":$=X;break;case"value":x=X;break;case"defaultValue":P=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,t));break;default:X!==ee&&je(e,t,K,X,n,ee)}}Io(e,x,P,B,F,$,d,a);return;case"select":X=x=P=K=null;for(d in i)if(B=i[d],i.hasOwnProperty(d)&&B!=null)switch(d){case"value":break;case"multiple":X=B;default:n.hasOwnProperty(d)||je(e,t,d,null,n,B)}for(a in n)if(d=n[a],B=i[a],n.hasOwnProperty(a)&&(d!=null||B!=null))switch(a){case"value":K=d;break;case"defaultValue":P=d;break;case"multiple":x=d;default:d!==B&&je(e,t,a,d,n,B)}t=P,i=x,n=X,K!=null?Sa(e,!!i,K,!1):!!n!=!!i&&(t!=null?Sa(e,!!i,t,!0):Sa(e,!!i,i?[]:"",!1));return;case"textarea":X=K=null;for(P in i)if(a=i[P],i.hasOwnProperty(P)&&a!=null&&!n.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:je(e,t,P,null,n,a)}for(x in n)if(a=n[x],d=i[x],n.hasOwnProperty(x)&&(a!=null||d!=null))switch(x){case"value":K=a;break;case"defaultValue":X=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(s(91));break;default:a!==d&&je(e,t,x,a,n,d)}Mu(e,K,X);return;case"option":for(var ge in i)if(K=i[ge],i.hasOwnProperty(ge)&&K!=null&&!n.hasOwnProperty(ge))switch(ge){case"selected":e.selected=!1;break;default:je(e,t,ge,null,n,K)}for(B in n)if(K=n[B],X=i[B],n.hasOwnProperty(B)&&K!==X&&(K!=null||X!=null))switch(B){case"selected":e.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:je(e,t,B,K,n,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in i)K=i[pe],i.hasOwnProperty(pe)&&K!=null&&!n.hasOwnProperty(pe)&&je(e,t,pe,null,n,K);for(F in n)if(K=n[F],X=i[F],n.hasOwnProperty(F)&&K!==X&&(K!=null||X!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,t));break;default:je(e,t,F,K,n,X)}return;default:if(Vo(t)){for(var ze in i)K=i[ze],i.hasOwnProperty(ze)&&K!==void 0&&!n.hasOwnProperty(ze)&&Dd(e,t,ze,void 0,n,K);for($ in n)K=n[$],X=i[$],!n.hasOwnProperty($)||K===X||K===void 0&&X===void 0||Dd(e,t,$,K,n,X);return}}for(var G in i)K=i[G],i.hasOwnProperty(G)&&K!=null&&!n.hasOwnProperty(G)&&je(e,t,G,null,n,K);for(ee in n)K=n[ee],X=i[ee],!n.hasOwnProperty(ee)||K===X||K==null&&X==null||je(e,t,ee,K,n,X)}var xd=null,Md=null;function Vc(e){return e.nodeType===9?e:e.ownerDocument}function kh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ah(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ld(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Od=null;function oy(){var e=window.event;return e&&e.type==="popstate"?e===Od?!1:(Od=e,!0):(Od=null,!1)}var Ph=typeof setTimeout=="function"?setTimeout:void 0,ly=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,dy=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(e){return Nh.resolve(null).then(e).catch(uy)}:Ph;function uy(e){setTimeout(function(){throw e})}function _n(e){return e==="head"}function jh(e,t){var i=t,n=0,a=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(0<n&&8>n){i=n;var x=e.ownerDocument;if(i&1&&is(x.documentElement),i&2&&is(x.body),i&4)for(i=x.head,is(i),x=i.firstChild;x;){var P=x.nextSibling,B=x.nodeName;x[ci]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&x.rel.toLowerCase()==="stylesheet"||i.removeChild(x),x=P}}if(a===0){e.removeChild(d),ds(t);return}a--}else i==="$"||i==="$?"||i==="$!"?a++:n=i.charCodeAt(0)-48;else n=0;i=d}while(i);ds(t)}function kd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":kd(i),Un(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function fy(e,t,i,n){for(;e.nodeType===1;){var a=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ci])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=fi(e.nextSibling),e===null)break}return null}function py(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=fi(e.nextSibling),e===null))return null;return e}function Ad(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function hy(e,t){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")t();else{var n=function(){t(),i.removeEventListener("DOMContentLoaded",n)};i.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function fi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Pd=null;function zh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}function Uh(e,t,i){switch(t=Vc(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function is(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Un(e)}var ti=new Map,Bh=new Set;function Gc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Vi=V.d;V.d={f:my,r:gy,D:vy,C:_y,L:yy,m:by,X:wy,S:Sy,M:Ry};function my(){var e=Vi.f(),t=Nc();return e||t}function gy(e){var t=xi(e);t!==null&&t.tag===5&&t.type==="form"?rp(t):Vi.r(e)}var $a=typeof document>"u"?null:document;function qh(e,t,i){var n=$a;if(n&&typeof t=="string"&&t){var a=kt(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof i=="string"&&(a+='[crossorigin="'+i+'"]'),Bh.has(a)||(Bh.add(a),e={rel:e,crossOrigin:i,href:t},n.querySelector(a)===null&&(t=n.createElement("link"),vt(t,"link",e),Ye(t),n.head.appendChild(t)))}}function vy(e){Vi.D(e),qh("dns-prefetch",e,null)}function _y(e,t){Vi.C(e,t),qh("preconnect",e,t)}function yy(e,t,i){Vi.L(e,t,i);var n=$a;if(n&&e&&t){var a='link[rel="preload"][as="'+kt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(a+='[imagesrcset="'+kt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(a+='[imagesizes="'+kt(i.imageSizes)+'"]')):a+='[href="'+kt(e)+'"]';var d=a;switch(t){case"style":d=Ja(e);break;case"script":d=Wa(e)}ti.has(d)||(e=D({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),ti.set(d,e),n.querySelector(a)!==null||t==="style"&&n.querySelector(ns(d))||t==="script"&&n.querySelector(as(d))||(t=n.createElement("link"),vt(t,"link",e),Ye(t),n.head.appendChild(t)))}}function by(e,t){Vi.m(e,t);var i=$a;if(i&&e){var n=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+kt(n)+'"][href="'+kt(e)+'"]',d=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Wa(e)}if(!ti.has(d)&&(e=D({rel:"modulepreload",href:e},t),ti.set(d,e),i.querySelector(a)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(as(d)))return}n=i.createElement("link"),vt(n,"link",e),Ye(n),i.head.appendChild(n)}}}function Sy(e,t,i){Vi.S(e,t,i);var n=$a;if(n&&e){var a=Mi(n).hoistableStyles,d=Ja(e);t=t||"default";var x=a.get(d);if(!x){var P={loading:0,preload:null};if(x=n.querySelector(ns(d)))P.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":t},i),(i=ti.get(d))&&Nd(e,i);var B=x=n.createElement("link");Ye(B),vt(B,"link",e),B._p=new Promise(function(F,$){B.onload=F,B.onerror=$}),B.addEventListener("load",function(){P.loading|=1}),B.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Yc(x,t,n)}x={type:"stylesheet",instance:x,count:1,state:P},a.set(d,x)}}}function wy(e,t){Vi.X(e,t);var i=$a;if(i&&e){var n=Mi(i).hoistableScripts,a=Wa(e),d=n.get(a);d||(d=i.querySelector(as(a)),d||(e=D({src:e,async:!0},t),(t=ti.get(a))&&jd(e,t),d=i.createElement("script"),Ye(d),vt(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(a,d))}}function Ry(e,t){Vi.M(e,t);var i=$a;if(i&&e){var n=Mi(i).hoistableScripts,a=Wa(e),d=n.get(a);d||(d=i.querySelector(as(a)),d||(e=D({src:e,async:!0,type:"module"},t),(t=ti.get(a))&&jd(e,t),d=i.createElement("script"),Ye(d),vt(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(a,d))}}function Ih(e,t,i,n){var a=(a=me.current)?Gc(a):null;if(!a)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Ja(i.href),i=Mi(a).hoistableStyles,n=i.get(t),n||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ja(i.href);var d=Mi(a).hoistableStyles,x=d.get(e);if(x||(a=a.ownerDocument||a,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,x),(d=a.querySelector(ns(e)))&&!d._p&&(x.instance=d,x.state.loading=5),ti.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ti.set(e,i),d||Ty(a,e,i,x.state))),t&&n===null)throw Error(s(528,""));return x}if(t&&n!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Wa(i),i=Mi(a).hoistableScripts,n=i.get(t),n||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ja(e){return'href="'+kt(e)+'"'}function ns(e){return'link[rel="stylesheet"]['+e+"]"}function Hh(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function Ty(e,t,i,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),vt(t,"link",i),Ye(t),e.head.appendChild(t))}function Wa(e){return'[src="'+kt(e)+'"]'}function as(e){return"script[async]"+e}function Vh(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+kt(i.href)+'"]');if(n)return t.instance=n,Ye(n),n;var a=D({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Ye(n),vt(n,"style",a),Yc(n,i.precedence,e),t.instance=n;case"stylesheet":a=Ja(i.href);var d=e.querySelector(ns(a));if(d)return t.state.loading|=4,t.instance=d,Ye(d),d;n=Hh(i),(a=ti.get(a))&&Nd(n,a),d=(e.ownerDocument||e).createElement("link"),Ye(d);var x=d;return x._p=new Promise(function(P,B){x.onload=P,x.onerror=B}),vt(d,"link",n),t.state.loading|=4,Yc(d,i.precedence,e),t.instance=d;case"script":return d=Wa(i.src),(a=e.querySelector(as(d)))?(t.instance=a,Ye(a),a):(n=i,(a=ti.get(d))&&(n=D({},i),jd(n,a)),e=e.ownerDocument||e,a=e.createElement("script"),Ye(a),vt(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,Yc(n,i.precedence,e));return t.instance}function Yc(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,d=a,x=0;x<n.length;x++){var P=n[x];if(P.dataset.precedence===t)d=P;else if(d!==a)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Nd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function jd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Qc=null;function Gh(e,t,i){if(Qc===null){var n=new Map,a=Qc=new Map;a.set(i,n)}else a=Qc,n=a.get(i),n||(n=new Map,a.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),a=0;a<i.length;a++){var d=i[a];if(!(d[ci]||d[Ge]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var x=d.getAttribute(t)||"";x=e+x;var P=n.get(x);P?P.push(d):n.set(x,[d])}}return n}function Yh(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Cy(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Qh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var rs=null;function Ey(){}function Dy(e,t,i){if(rs===null)throw Error(s(475));var n=rs;if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var a=Ja(i.href),d=e.querySelector(ns(a));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Fc.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=d,Ye(d);return}d=e.ownerDocument||e,i=Hh(i),(a=ti.get(a))&&Nd(i,a),d=d.createElement("link"),Ye(d);var x=d;x._p=new Promise(function(P,B){x.onload=P,x.onerror=B}),vt(d,"link",i),t.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(n.count++,t=Fc.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function xy(){if(rs===null)throw Error(s(475));var e=rs;return e.stylesheets&&e.count===0&&zd(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&zd(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Fc(){if(this.count--,this.count===0){if(this.stylesheets)zd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kc=null;function zd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kc=new Map,t.forEach(My,e),Kc=null,Fc.call(e))}function My(e,t){if(!(t.state.loading&4)){var i=Kc.get(e);if(i)var n=i.get(null);else{i=new Map,Kc.set(e,i);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<a.length;d++){var x=a[d];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(i.set(x.dataset.precedence,x),n=x)}n&&i.set(null,n)}a=t.instance,x=a.getAttribute("data-precedence"),d=i.get(x)||n,d===n&&i.set(null,a),i.set(x,a),this.count++,n=Fc.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),d?d.parentNode.insertBefore(a,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var ss={$$typeof:u,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function Ly(e,t,i,n,a,d,x,P){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=d,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Fh(e,t,i,n,a,d,x,P,B,F,$,ee){return e=new Ly(e,t,i,x,P,B,F,ee),t=1,d===!0&&(t|=24),d=Ht(3,null,null,t),e.current=d,d.stateNode=e,t=_l(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:n,isDehydrated:i,cache:t},wl(d),e}function Kh(e){return e?(e=La,e):La}function Xh(e,t,i,n,a,d){a=Kh(a),n.context===null?n.context=a:n.pendingContext=a,n=rn(t),n.payload={element:i},d=d===void 0?null:d,d!==null&&(n.callback=d),i=sn(e,n,t),i!==null&&(Ft(i,e,t),jr(i,e,t))}function Zh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Ud(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function $h(e){if(e.tag===13){var t=Ma(e,67108864);t!==null&&Ft(t,e,67108864),Ud(e,67108864)}}var Xc=!0;function Oy(e,t,i,n){var a=j.T;j.T=null;var d=V.p;try{V.p=2,Bd(e,t,i,n)}finally{V.p=d,j.T=a}}function ky(e,t,i,n){var a=j.T;j.T=null;var d=V.p;try{V.p=8,Bd(e,t,i,n)}finally{V.p=d,j.T=a}}function Bd(e,t,i,n){if(Xc){var a=qd(n);if(a===null)Ed(e,t,n,Zc,i),Wh(e,n);else if(Py(a,e,t,i,n))n.stopPropagation();else if(Wh(e,n),t&4&&-1<Ay.indexOf(e)){for(;a!==null;){var d=xi(a);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var x=bt(d.pendingLanes);if(x!==0){var P=d;for(P.pendingLanes|=2,P.entangledLanes|=2;x;){var B=1<<31-yt(x);P.entanglements[1]|=B,x&=~B}Ri(d),(Ae&6)===0&&(Ac=Bt()+500,Wr(0))}}break;case 13:P=Ma(d,2),P!==null&&Ft(P,d,2),Nc(),Ud(d,2)}if(d=qd(n),d===null&&Ed(e,t,n,Zc,i),d===a)break;a=d}a!==null&&n.stopPropagation()}else Ed(e,t,n,null,i)}}function qd(e){return e=Yo(e),Id(e)}var Zc=null;function Id(e){if(Zc=null,e=Dt(e),e!==null){var t=y(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=_(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Zc=e,null}function Jh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Di()){case cr:return 2;case or:return 8;case On:case ma:return 32;case ga:return 268435456;default:return 32}default:return 32}}var Hd=!1,yn=null,bn=null,Sn=null,cs=new Map,os=new Map,wn=[],Ay="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wh(e,t){switch(e){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":cs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":os.delete(t.pointerId)}}function ls(e,t,i,n,a,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:d,targetContainers:[a]},t!==null&&(t=xi(t),t!==null&&$h(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Py(e,t,i,n,a){switch(t){case"focusin":return yn=ls(yn,e,t,i,n,a),!0;case"dragenter":return bn=ls(bn,e,t,i,n,a),!0;case"mouseover":return Sn=ls(Sn,e,t,i,n,a),!0;case"pointerover":var d=a.pointerId;return cs.set(d,ls(cs.get(d)||null,e,t,i,n,a)),!0;case"gotpointercapture":return d=a.pointerId,os.set(d,ls(os.get(d)||null,e,t,i,n,a)),!0}return!1}function em(e){var t=Dt(e.target);if(t!==null){var i=y(t);if(i!==null){if(t=i.tag,t===13){if(t=_(i),t!==null){e.blockedOn=t,vr(e.priority,function(){if(i.tag===13){var n=Qt();n=Kt(n);var a=Ma(i,n);a!==null&&Ft(a,i,n),Ud(i,n)}});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $c(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=qd(e.nativeEvent);if(i===null){i=e.nativeEvent;var n=new i.constructor(i.type,i);Go=n,i.target.dispatchEvent(n),Go=null}else return t=xi(i),t!==null&&$h(t),e.blockedOn=i,!1;t.shift()}return!0}function tm(e,t,i){$c(e)&&i.delete(t)}function Ny(){Hd=!1,yn!==null&&$c(yn)&&(yn=null),bn!==null&&$c(bn)&&(bn=null),Sn!==null&&$c(Sn)&&(Sn=null),cs.forEach(tm),os.forEach(tm)}function Jc(e,t){e.blockedOn===t&&(e.blockedOn=null,Hd||(Hd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ny)))}var Wc=null;function im(e){Wc!==e&&(Wc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wc===e&&(Wc=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],a=e[t+2];if(typeof n!="function"){if(Id(n||i)===null)continue;break}var d=xi(i);d!==null&&(e.splice(t,3),t-=3,Il(d,{pending:!0,data:a,method:i.method,action:n},n,a))}}))}function ds(e){function t(B){return Jc(B,e)}yn!==null&&Jc(yn,e),bn!==null&&Jc(bn,e),Sn!==null&&Jc(Sn,e),cs.forEach(t),os.forEach(t);for(var i=0;i<wn.length;i++){var n=wn[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<wn.length&&(i=wn[0],i.blockedOn===null);)em(i),i.blockedOn===null&&wn.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(n=0;n<i.length;n+=3){var a=i[n],d=i[n+1],x=a[st]||null;if(typeof d=="function")x||im(i);else if(x){var P=null;if(d&&d.hasAttribute("formAction")){if(a=d,x=d[st]||null)P=x.formAction;else if(Id(a)!==null)continue}else P=x.action;typeof P=="function"?i[n+1]=P:(i.splice(n,3),n-=3),im(i)}}}function Vd(e){this._internalRoot=e}eo.prototype.render=Vd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,n=Qt();Xh(i,n,e,t,null,null)},eo.prototype.unmount=Vd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xh(e.current,2,null,e,null,null),Nc(),t[St]=null}};function eo(e){this._internalRoot=e}eo.prototype.unstable_scheduleHydration=function(e){if(e){var t=jn();e={blockedOn:null,target:e,priority:t};for(var i=0;i<wn.length&&t!==0&&t<wn[i].priority;i++);wn.splice(i,0,e),i===0&&em(e)}};var nm=c.version;if(nm!=="19.1.0")throw Error(s(527,nm,"19.1.0"));V.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=E(t),e=e!==null?R(e):null,e=e===null?null:e.stateNode,e};var jy={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var to=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!to.isDisabled&&to.supportsFiber)try{Xi=to.inject(jy),pt=to}catch{}}return fs.createRoot=function(e,t){if(!w(e))throw Error(s(299));var i=!1,n="",a=yp,d=bp,x=Sp,P=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(P=t.unstable_transitionCallbacks)),t=Fh(e,1,!1,null,null,i,n,a,d,x,P,null),e[St]=t.current,Cd(e),new Vd(t)},fs.hydrateRoot=function(e,t,i){if(!w(e))throw Error(s(299));var n=!1,a="",d=yp,x=bp,P=Sp,B=null,F=null;return i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(P=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(B=i.unstable_transitionCallbacks),i.formState!==void 0&&(F=i.formState)),t=Fh(e,1,!0,t,i??null,n,a,d,x,P,B,F),t.context=Kh(null),i=t.current,n=Qt(),n=Kt(n),a=rn(n),a.callback=null,sn(i,a,n),i=n,t.current.lanes=i,ri(t,i),Ri(t),e[St]=t.current,Cd(e),new eo(t)},fs.version="19.1.0",fs}var mm;function Xy(){if(mm)return Qd.exports;mm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(c){console.error(c)}}return r(),Qd.exports=Ky(),Qd.exports}var jS=Xy();const Ei=Object.create(null);Ei.open="0";Ei.close="1";Ei.ping="2";Ei.pong="3";Ei.message="4";Ei.upgrade="5";Ei.noop="6";const Co=Object.create(null);Object.keys(Ei).forEach(r=>{Co[Ei[r]]=r});const fu={type:"error",data:"parser error"},Fg=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Kg=typeof ArrayBuffer=="function",Xg=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,Su=({type:r,data:c},o,s)=>Fg&&c instanceof Blob?o?s(c):gm(c,s):Kg&&(c instanceof ArrayBuffer||Xg(c))?o?s(c):gm(new Blob([c]),s):s(Ei[r]+(c||"")),gm=(r,c)=>{const o=new FileReader;return o.onload=function(){const s=o.result.split(",")[1];c("b"+(s||""))},o.readAsDataURL(r)};function vm(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let Zd;function Zy(r,c){if(Fg&&r.data instanceof Blob)return r.data.arrayBuffer().then(vm).then(c);if(Kg&&(r.data instanceof ArrayBuffer||Xg(r.data)))return c(vm(r.data));Su(r,!1,o=>{Zd||(Zd=new TextEncoder),c(Zd.encode(o))})}const _m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<_m.length;r++)Vs[_m.charCodeAt(r)]=r;const $y=r=>{let c=r.length*.75,o=r.length,s,w=0,y,_,T,E;r[r.length-1]==="="&&(c--,r[r.length-2]==="="&&c--);const R=new ArrayBuffer(c),D=new Uint8Array(R);for(s=0;s<o;s+=4)y=Vs[r.charCodeAt(s)],_=Vs[r.charCodeAt(s+1)],T=Vs[r.charCodeAt(s+2)],E=Vs[r.charCodeAt(s+3)],D[w++]=y<<2|_>>4,D[w++]=(_&15)<<4|T>>2,D[w++]=(T&3)<<6|E&63;return R},Jy=typeof ArrayBuffer=="function",wu=(r,c)=>{if(typeof r!="string")return{type:"message",data:Zg(r,c)};const o=r.charAt(0);return o==="b"?{type:"message",data:Wy(r.substring(1),c)}:Co[o]?r.length>1?{type:Co[o],data:r.substring(1)}:{type:Co[o]}:fu},Wy=(r,c)=>{if(Jy){const o=$y(r);return Zg(o,c)}else return{base64:!0,data:r}},Zg=(r,c)=>{switch(c){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},$g="",e0=(r,c)=>{const o=r.length,s=new Array(o);let w=0;r.forEach((y,_)=>{Su(y,!1,T=>{s[_]=T,++w===o&&c(s.join($g))})})},t0=(r,c)=>{const o=r.split($g),s=[];for(let w=0;w<o.length;w++){const y=wu(o[w],c);if(s.push(y),y.type==="error")break}return s};function i0(){return new TransformStream({transform(r,c){Zy(r,o=>{const s=o.length;let w;if(s<126)w=new Uint8Array(1),new DataView(w.buffer).setUint8(0,s);else if(s<65536){w=new Uint8Array(3);const y=new DataView(w.buffer);y.setUint8(0,126),y.setUint16(1,s)}else{w=new Uint8Array(9);const y=new DataView(w.buffer);y.setUint8(0,127),y.setBigUint64(1,BigInt(s))}r.data&&typeof r.data!="string"&&(w[0]|=128),c.enqueue(w),c.enqueue(o)})}})}let $d;function io(r){return r.reduce((c,o)=>c+o.length,0)}function no(r,c){if(r[0].length===c)return r.shift();const o=new Uint8Array(c);let s=0;for(let w=0;w<c;w++)o[w]=r[0][s++],s===r[0].length&&(r.shift(),s=0);return r.length&&s<r[0].length&&(r[0]=r[0].slice(s)),o}function n0(r,c){$d||($d=new TextDecoder);const o=[];let s=0,w=-1,y=!1;return new TransformStream({transform(_,T){for(o.push(_);;){if(s===0){if(io(o)<1)break;const E=no(o,1);y=(E[0]&128)===128,w=E[0]&127,w<126?s=3:w===126?s=1:s=2}else if(s===1){if(io(o)<2)break;const E=no(o,2);w=new DataView(E.buffer,E.byteOffset,E.length).getUint16(0),s=3}else if(s===2){if(io(o)<8)break;const E=no(o,8),R=new DataView(E.buffer,E.byteOffset,E.length),D=R.getUint32(0);if(D>Math.pow(2,21)-1){T.enqueue(fu);break}w=D*Math.pow(2,32)+R.getUint32(4),s=3}else{if(io(o)<w)break;const E=no(o,w);T.enqueue(wu(y?E:$d.decode(E),c)),s=0}if(w===0||w>r){T.enqueue(fu);break}}}})}const Jg=4;function tt(r){if(r)return a0(r)}function a0(r){for(var c in tt.prototype)r[c]=tt.prototype[c];return r}tt.prototype.on=tt.prototype.addEventListener=function(r,c){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(c),this};tt.prototype.once=function(r,c){function o(){this.off(r,o),c.apply(this,arguments)}return o.fn=c,this.on(r,o),this};tt.prototype.off=tt.prototype.removeListener=tt.prototype.removeAllListeners=tt.prototype.removeEventListener=function(r,c){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+r];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var s,w=0;w<o.length;w++)if(s=o[w],s===c||s.fn===c){o.splice(w,1);break}return o.length===0&&delete this._callbacks["$"+r],this};tt.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var c=new Array(arguments.length-1),o=this._callbacks["$"+r],s=1;s<arguments.length;s++)c[s-1]=arguments[s];if(o){o=o.slice(0);for(var s=0,w=o.length;s<w;++s)o[s].apply(this,c)}return this};tt.prototype.emitReserved=tt.prototype.emit;tt.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};tt.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Ao=typeof Promise=="function"&&typeof Promise.resolve=="function"?c=>Promise.resolve().then(c):(c,o)=>o(c,0),ni=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),r0="arraybuffer";function Wg(r,...c){return c.reduce((o,s)=>(r.hasOwnProperty(s)&&(o[s]=r[s]),o),{})}const s0=ni.setTimeout,c0=ni.clearTimeout;function Po(r,c){c.useNativeTimers?(r.setTimeoutFn=s0.bind(ni),r.clearTimeoutFn=c0.bind(ni)):(r.setTimeoutFn=ni.setTimeout.bind(ni),r.clearTimeoutFn=ni.clearTimeout.bind(ni))}const o0=1.33;function l0(r){return typeof r=="string"?d0(r):Math.ceil((r.byteLength||r.size)*o0)}function d0(r){let c=0,o=0;for(let s=0,w=r.length;s<w;s++)c=r.charCodeAt(s),c<128?o+=1:c<2048?o+=2:c<55296||c>=57344?o+=3:(s++,o+=4);return o}function ev(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function u0(r){let c="";for(let o in r)r.hasOwnProperty(o)&&(c.length&&(c+="&"),c+=encodeURIComponent(o)+"="+encodeURIComponent(r[o]));return c}function f0(r){let c={},o=r.split("&");for(let s=0,w=o.length;s<w;s++){let y=o[s].split("=");c[decodeURIComponent(y[0])]=decodeURIComponent(y[1])}return c}class p0 extends Error{constructor(c,o,s){super(c),this.description=o,this.context=s,this.type="TransportError"}}let Ru=class extends tt{constructor(c){super(),this.writable=!1,Po(this,c),this.opts=c,this.query=c.query,this.socket=c.socket,this.supportsBinary=!c.forceBase64}onError(c,o,s){return super.emitReserved("error",new p0(c,o,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(c){this.readyState==="open"&&this.write(c)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(c){const o=wu(c,this.socket.binaryType);this.onPacket(o)}onPacket(c){super.emitReserved("packet",c)}onClose(c){this.readyState="closed",super.emitReserved("close",c)}pause(c){}createUri(c,o={}){return c+"://"+this._hostname()+this._port()+this.opts.path+this._query(o)}_hostname(){const c=this.opts.hostname;return c.indexOf(":")===-1?c:"["+c+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(c){const o=u0(c);return o.length?"?"+o:""}};class h0 extends Ru{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(c){this.readyState="pausing";const o=()=>{this.readyState="paused",c()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||o()})),this.writable||(s++,this.once("drain",function(){--s||o()}))}else o()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(c){const o=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};t0(c,this.socket.binaryType).forEach(o),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const c=()=>{this.write([{type:"close"}])};this.readyState==="open"?c():this.once("open",c)}write(c){this.writable=!1,e0(c,o=>{this.doWrite(o,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const c=this.opts.secure?"https":"http",o=this.query||{};return this.opts.timestampRequests!==!1&&(o[this.opts.timestampParam]=ev()),!this.supportsBinary&&!o.sid&&(o.b64=1),this.createUri(c,o)}}let tv=!1;try{tv=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const m0=tv;function g0(){}class v0 extends h0{constructor(c){if(super(c),typeof location<"u"){const o=location.protocol==="https:";let s=location.port;s||(s=o?"443":"80"),this.xd=typeof location<"u"&&c.hostname!==location.hostname||s!==c.port}}doWrite(c,o){const s=this.request({method:"POST",data:c});s.on("success",o),s.on("error",(w,y)=>{this.onError("xhr post error",w,y)})}doPoll(){const c=this.request();c.on("data",this.onData.bind(this)),c.on("error",(o,s)=>{this.onError("xhr poll error",o,s)}),this.pollXhr=c}}class Ci extends tt{constructor(c,o,s){super(),this.createRequest=c,Po(this,s),this._opts=s,this._method=s.method||"GET",this._uri=o,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var c;const o=Wg(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");o.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(o);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let w in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(w)&&s.setRequestHeader(w,this._opts.extraHeaders[w])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(c=this._opts.cookieJar)===null||c===void 0||c.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var w;s.readyState===3&&((w=this._opts.cookieJar)===null||w===void 0||w.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(w){this.setTimeoutFn(()=>{this._onError(w)},0);return}typeof document<"u"&&(this._index=Ci.requestsCount++,Ci.requests[this._index]=this)}_onError(c){this.emitReserved("error",c,this._xhr),this._cleanup(!0)}_cleanup(c){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=g0,c)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ci.requests[this._index],this._xhr=null}}_onLoad(){const c=this._xhr.responseText;c!==null&&(this.emitReserved("data",c),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ci.requestsCount=0;Ci.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ym);else if(typeof addEventListener=="function"){const r="onpagehide"in ni?"pagehide":"unload";addEventListener(r,ym,!1)}}function ym(){for(let r in Ci.requests)Ci.requests.hasOwnProperty(r)&&Ci.requests[r].abort()}const _0=function(){const r=iv({xdomain:!1});return r&&r.responseType!==null}();class y0 extends v0{constructor(c){super(c);const o=c&&c.forceBase64;this.supportsBinary=_0&&!o}request(c={}){return Object.assign(c,{xd:this.xd},this.opts),new Ci(iv,this.uri(),c)}}function iv(r){const c=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!c||m0))return new XMLHttpRequest}catch{}if(!c)try{return new ni[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const nv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class b0 extends Ru{get name(){return"websocket"}doOpen(){const c=this.uri(),o=this.opts.protocols,s=nv?{}:Wg(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(c,o,s)}catch(w){return this.emitReserved("error",w)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=c=>this.onClose({description:"websocket connection closed",context:c}),this.ws.onmessage=c=>this.onData(c.data),this.ws.onerror=c=>this.onError("websocket error",c)}write(c){this.writable=!1;for(let o=0;o<c.length;o++){const s=c[o],w=o===c.length-1;Su(s,this.supportsBinary,y=>{try{this.doWrite(s,y)}catch{}w&&Ao(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const c=this.opts.secure?"wss":"ws",o=this.query||{};return this.opts.timestampRequests&&(o[this.opts.timestampParam]=ev()),this.supportsBinary||(o.b64=1),this.createUri(c,o)}}const Jd=ni.WebSocket||ni.MozWebSocket;class S0 extends b0{createSocket(c,o,s){return nv?new Jd(c,o,s):o?new Jd(c,o):new Jd(c)}doWrite(c,o){this.ws.send(o)}}class w0 extends Ru{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(c){return this.emitReserved("error",c)}this._transport.closed.then(()=>{this.onClose()}).catch(c=>{this.onError("webtransport error",c)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(c=>{const o=n0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=c.readable.pipeThrough(o).getReader(),w=i0();w.readable.pipeTo(c.writable),this._writer=w.writable.getWriter();const y=()=>{s.read().then(({done:T,value:E})=>{T||(this.onPacket(E),y())}).catch(T=>{})};y();const _={type:"open"};this.query.sid&&(_.data=`{"sid":"${this.query.sid}"}`),this._writer.write(_).then(()=>this.onOpen())})})}write(c){this.writable=!1;for(let o=0;o<c.length;o++){const s=c[o],w=o===c.length-1;this._writer.write(s).then(()=>{w&&Ao(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var c;(c=this._transport)===null||c===void 0||c.close()}}const R0={websocket:S0,webtransport:w0,polling:y0},T0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,C0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pu(r){if(r.length>8e3)throw"URI too long";const c=r,o=r.indexOf("["),s=r.indexOf("]");o!=-1&&s!=-1&&(r=r.substring(0,o)+r.substring(o,s).replace(/:/g,";")+r.substring(s,r.length));let w=T0.exec(r||""),y={},_=14;for(;_--;)y[C0[_]]=w[_]||"";return o!=-1&&s!=-1&&(y.source=c,y.host=y.host.substring(1,y.host.length-1).replace(/;/g,":"),y.authority=y.authority.replace("[","").replace("]","").replace(/;/g,":"),y.ipv6uri=!0),y.pathNames=E0(y,y.path),y.queryKey=D0(y,y.query),y}function E0(r,c){const o=/\/{2,9}/g,s=c.replace(o,"/").split("/");return(c.slice(0,1)=="/"||c.length===0)&&s.splice(0,1),c.slice(-1)=="/"&&s.splice(s.length-1,1),s}function D0(r,c){const o={};return c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,w,y){w&&(o[w]=y)}),o}const hu=typeof addEventListener=="function"&&typeof removeEventListener=="function",Eo=[];hu&&addEventListener("offline",()=>{Eo.forEach(r=>r())},!1);class Cn extends tt{constructor(c,o){if(super(),this.binaryType=r0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,c&&typeof c=="object"&&(o=c,c=null),c){const s=pu(c);o.hostname=s.host,o.secure=s.protocol==="https"||s.protocol==="wss",o.port=s.port,s.query&&(o.query=s.query)}else o.host&&(o.hostname=pu(o.host).host);Po(this,o),this.secure=o.secure!=null?o.secure:typeof location<"u"&&location.protocol==="https:",o.hostname&&!o.port&&(o.port=this.secure?"443":"80"),this.hostname=o.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=o.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},o.transports.forEach(s=>{const w=s.prototype.name;this.transports.push(w),this._transportsByName[w]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},o),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=f0(this.opts.query)),hu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Eo.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(c){const o=Object.assign({},this.opts.query);o.EIO=Jg,o.transport=c,this.id&&(o.sid=this.id);const s=Object.assign({},this.opts,{query:o,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[c]);return new this._transportsByName[c](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const c=this.opts.rememberUpgrade&&Cn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const o=this.createTransport(c);o.open(),this.setTransport(o)}setTransport(c){this.transport&&this.transport.removeAllListeners(),this.transport=c,c.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",o=>this._onClose("transport close",o))}onOpen(){this.readyState="open",Cn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(c){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",c),this.emitReserved("heartbeat"),c.type){case"open":this.onHandshake(JSON.parse(c.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const o=new Error("server error");o.code=c.data,this._onError(o);break;case"message":this.emitReserved("data",c.data),this.emitReserved("message",c.data);break}}onHandshake(c){this.emitReserved("handshake",c),this.id=c.sid,this.transport.query.sid=c.sid,this._pingInterval=c.pingInterval,this._pingTimeout=c.pingTimeout,this._maxPayload=c.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const c=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+c,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},c),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const c=this._getWritablePackets();this.transport.send(c),this._prevBufferLen=c.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let o=1;for(let s=0;s<this.writeBuffer.length;s++){const w=this.writeBuffer[s].data;if(w&&(o+=l0(w)),s>0&&o>this._maxPayload)return this.writeBuffer.slice(0,s);o+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const c=Date.now()>this._pingTimeoutTime;return c&&(this._pingTimeoutTime=0,Ao(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),c}write(c,o,s){return this._sendPacket("message",c,o,s),this}send(c,o,s){return this._sendPacket("message",c,o,s),this}_sendPacket(c,o,s,w){if(typeof o=="function"&&(w=o,o=void 0),typeof s=="function"&&(w=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const y={type:c,data:o,options:s};this.emitReserved("packetCreate",y),this.writeBuffer.push(y),w&&this.once("flush",w),this.flush()}close(){const c=()=>{this._onClose("forced close"),this.transport.close()},o=()=>{this.off("upgrade",o),this.off("upgradeError",o),c()},s=()=>{this.once("upgrade",o),this.once("upgradeError",o)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():c()}):this.upgrading?s():c()),this}_onError(c){if(Cn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",c),this._onClose("transport error",c)}_onClose(c,o){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Eo.indexOf(this._offlineEventListener);s!==-1&&Eo.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",c,o),this.writeBuffer=[],this._prevBufferLen=0}}}Cn.protocol=Jg;class x0 extends Cn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let c=0;c<this._upgrades.length;c++)this._probe(this._upgrades[c])}_probe(c){let o=this.createTransport(c),s=!1;Cn.priorWebsocketSuccess=!1;const w=()=>{s||(o.send([{type:"ping",data:"probe"}]),o.once("packet",v=>{if(!s)if(v.type==="pong"&&v.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",o),!o)return;Cn.priorWebsocketSuccess=o.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(D(),this.setTransport(o),o.send([{type:"upgrade"}]),this.emitReserved("upgrade",o),o=null,this.upgrading=!1,this.flush())})}else{const L=new Error("probe error");L.transport=o.name,this.emitReserved("upgradeError",L)}}))};function y(){s||(s=!0,D(),o.close(),o=null)}const _=v=>{const L=new Error("probe error: "+v);L.transport=o.name,y(),this.emitReserved("upgradeError",L)};function T(){_("transport closed")}function E(){_("socket closed")}function R(v){o&&v.name!==o.name&&y()}const D=()=>{o.removeListener("open",w),o.removeListener("error",_),o.removeListener("close",T),this.off("close",E),this.off("upgrading",R)};o.once("open",w),o.once("error",_),o.once("close",T),this.once("close",E),this.once("upgrading",R),this._upgrades.indexOf("webtransport")!==-1&&c!=="webtransport"?this.setTimeoutFn(()=>{s||o.open()},200):o.open()}onHandshake(c){this._upgrades=this._filterUpgrades(c.upgrades),super.onHandshake(c)}_filterUpgrades(c){const o=[];for(let s=0;s<c.length;s++)~this.transports.indexOf(c[s])&&o.push(c[s]);return o}}let M0=class extends x0{constructor(c,o={}){const s=typeof c=="object"?c:o;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(w=>R0[w]).filter(w=>!!w)),super(c,s)}};function L0(r,c="",o){let s=r;o=o||typeof location<"u"&&location,r==null&&(r=o.protocol+"//"+o.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=o.protocol+r:r=o.host+r),/^(https?|wss?):\/\//.test(r)||(typeof o<"u"?r=o.protocol+"//"+r:r="https://"+r),s=pu(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const y=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+y+":"+s.port+c,s.href=s.protocol+"://"+y+(o&&o.port===s.port?"":":"+s.port),s}const O0=typeof ArrayBuffer=="function",k0=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,av=Object.prototype.toString,A0=typeof Blob=="function"||typeof Blob<"u"&&av.call(Blob)==="[object BlobConstructor]",P0=typeof File=="function"||typeof File<"u"&&av.call(File)==="[object FileConstructor]";function Tu(r){return O0&&(r instanceof ArrayBuffer||k0(r))||A0&&r instanceof Blob||P0&&r instanceof File}function Do(r,c){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let o=0,s=r.length;o<s;o++)if(Do(r[o]))return!0;return!1}if(Tu(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Do(r.toJSON(),!0);for(const o in r)if(Object.prototype.hasOwnProperty.call(r,o)&&Do(r[o]))return!0;return!1}function N0(r){const c=[],o=r.data,s=r;return s.data=mu(o,c),s.attachments=c.length,{packet:s,buffers:c}}function mu(r,c){if(!r)return r;if(Tu(r)){const o={_placeholder:!0,num:c.length};return c.push(r),o}else if(Array.isArray(r)){const o=new Array(r.length);for(let s=0;s<r.length;s++)o[s]=mu(r[s],c);return o}else if(typeof r=="object"&&!(r instanceof Date)){const o={};for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(o[s]=mu(r[s],c));return o}return r}function j0(r,c){return r.data=gu(r.data,c),delete r.attachments,r}function gu(r,c){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<c.length)return c[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let o=0;o<r.length;o++)r[o]=gu(r[o],c);else if(typeof r=="object")for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(r[o]=gu(r[o],c));return r}const z0=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],U0=5;var De;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(De||(De={}));class B0{constructor(c){this.replacer=c}encode(c){return(c.type===De.EVENT||c.type===De.ACK)&&Do(c)?this.encodeAsBinary({type:c.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,nsp:c.nsp,data:c.data,id:c.id}):[this.encodeAsString(c)]}encodeAsString(c){let o=""+c.type;return(c.type===De.BINARY_EVENT||c.type===De.BINARY_ACK)&&(o+=c.attachments+"-"),c.nsp&&c.nsp!=="/"&&(o+=c.nsp+","),c.id!=null&&(o+=c.id),c.data!=null&&(o+=JSON.stringify(c.data,this.replacer)),o}encodeAsBinary(c){const o=N0(c),s=this.encodeAsString(o.packet),w=o.buffers;return w.unshift(s),w}}function bm(r){return Object.prototype.toString.call(r)==="[object Object]"}class Cu extends tt{constructor(c){super(),this.reviver=c}add(c){let o;if(typeof c=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");o=this.decodeString(c);const s=o.type===De.BINARY_EVENT;s||o.type===De.BINARY_ACK?(o.type=s?De.EVENT:De.ACK,this.reconstructor=new q0(o),o.attachments===0&&super.emitReserved("decoded",o)):super.emitReserved("decoded",o)}else if(Tu(c)||c.base64)if(this.reconstructor)o=this.reconstructor.takeBinaryData(c),o&&(this.reconstructor=null,super.emitReserved("decoded",o));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+c)}decodeString(c){let o=0;const s={type:Number(c.charAt(0))};if(De[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===De.BINARY_EVENT||s.type===De.BINARY_ACK){const y=o+1;for(;c.charAt(++o)!=="-"&&o!=c.length;);const _=c.substring(y,o);if(_!=Number(_)||c.charAt(o)!=="-")throw new Error("Illegal attachments");s.attachments=Number(_)}if(c.charAt(o+1)==="/"){const y=o+1;for(;++o&&!(c.charAt(o)===","||o===c.length););s.nsp=c.substring(y,o)}else s.nsp="/";const w=c.charAt(o+1);if(w!==""&&Number(w)==w){const y=o+1;for(;++o;){const _=c.charAt(o);if(_==null||Number(_)!=_){--o;break}if(o===c.length)break}s.id=Number(c.substring(y,o+1))}if(c.charAt(++o)){const y=this.tryParse(c.substr(o));if(Cu.isPayloadValid(s.type,y))s.data=y;else throw new Error("invalid payload")}return s}tryParse(c){try{return JSON.parse(c,this.reviver)}catch{return!1}}static isPayloadValid(c,o){switch(c){case De.CONNECT:return bm(o);case De.DISCONNECT:return o===void 0;case De.CONNECT_ERROR:return typeof o=="string"||bm(o);case De.EVENT:case De.BINARY_EVENT:return Array.isArray(o)&&(typeof o[0]=="number"||typeof o[0]=="string"&&z0.indexOf(o[0])===-1);case De.ACK:case De.BINARY_ACK:return Array.isArray(o)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class q0{constructor(c){this.packet=c,this.buffers=[],this.reconPack=c}takeBinaryData(c){if(this.buffers.push(c),this.buffers.length===this.reconPack.attachments){const o=j0(this.reconPack,this.buffers);return this.finishedReconstruction(),o}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const I0=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Cu,Encoder:B0,get PacketType(){return De},protocol:U0},Symbol.toStringTag,{value:"Module"}));function hi(r,c,o){return r.on(c,o),function(){r.off(c,o)}}const H0=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class rv extends tt{constructor(c,o,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=c,this.nsp=o,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const c=this.io;this.subs=[hi(c,"open",this.onopen.bind(this)),hi(c,"packet",this.onpacket.bind(this)),hi(c,"error",this.onerror.bind(this)),hi(c,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...c){return c.unshift("message"),this.emit.apply(this,c),this}emit(c,...o){var s,w,y;if(H0.hasOwnProperty(c))throw new Error('"'+c.toString()+'" is a reserved event name');if(o.unshift(c),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const _={type:De.EVENT,data:o};if(_.options={},_.options.compress=this.flags.compress!==!1,typeof o[o.length-1]=="function"){const D=this.ids++,v=o.pop();this._registerAckCallback(D,v),_.id=D}const T=(w=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||w===void 0?void 0:w.writable,E=this.connected&&!(!((y=this.io.engine)===null||y===void 0)&&y._hasPingExpired());return this.flags.volatile&&!T||(E?(this.notifyOutgoingListeners(_),this.packet(_)):this.sendBuffer.push(_)),this.flags={},this}_registerAckCallback(c,o){var s;const w=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(w===void 0){this.acks[c]=o;return}const y=this.io.setTimeoutFn(()=>{delete this.acks[c];for(let T=0;T<this.sendBuffer.length;T++)this.sendBuffer[T].id===c&&this.sendBuffer.splice(T,1);o.call(this,new Error("operation has timed out"))},w),_=(...T)=>{this.io.clearTimeoutFn(y),o.apply(this,T)};_.withError=!0,this.acks[c]=_}emitWithAck(c,...o){return new Promise((s,w)=>{const y=(_,T)=>_?w(_):s(T);y.withError=!0,o.push(y),this.emit(c,...o)})}_addToQueue(c){let o;typeof c[c.length-1]=="function"&&(o=c.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:c,flags:Object.assign({fromQueue:!0},this.flags)};c.push((w,...y)=>s!==this._queue[0]?void 0:(w!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),o&&o(w)):(this._queue.shift(),o&&o(null,...y)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(c=!1){if(!this.connected||this._queue.length===0)return;const o=this._queue[0];o.pending&&!c||(o.pending=!0,o.tryCount++,this.flags=o.flags,this.emit.apply(this,o.args))}packet(c){c.nsp=this.nsp,this.io._packet(c)}onopen(){typeof this.auth=="function"?this.auth(c=>{this._sendConnectPacket(c)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(c){this.packet({type:De.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},c):c})}onerror(c){this.connected||this.emitReserved("connect_error",c)}onclose(c,o){this.connected=!1,delete this.id,this.emitReserved("disconnect",c,o),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(c=>{if(!this.sendBuffer.some(s=>String(s.id)===c)){const s=this.acks[c];delete this.acks[c],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(c){if(c.nsp===this.nsp)switch(c.type){case De.CONNECT:c.data&&c.data.sid?this.onconnect(c.data.sid,c.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(c);break;case De.ACK:case De.BINARY_ACK:this.onack(c);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();const s=new Error(c.data.message);s.data=c.data.data,this.emitReserved("connect_error",s);break}}onevent(c){const o=c.data||[];c.id!=null&&o.push(this.ack(c.id)),this.connected?this.emitEvent(o):this.receiveBuffer.push(Object.freeze(o))}emitEvent(c){if(this._anyListeners&&this._anyListeners.length){const o=this._anyListeners.slice();for(const s of o)s.apply(this,c)}super.emit.apply(this,c),this._pid&&c.length&&typeof c[c.length-1]=="string"&&(this._lastOffset=c[c.length-1])}ack(c){const o=this;let s=!1;return function(...w){s||(s=!0,o.packet({type:De.ACK,id:c,data:w}))}}onack(c){const o=this.acks[c.id];typeof o=="function"&&(delete this.acks[c.id],o.withError&&c.data.unshift(null),o.apply(this,c.data))}onconnect(c,o){this.id=c,this.recovered=o&&this._pid===o,this._pid=o,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(c=>this.emitEvent(c)),this.receiveBuffer=[],this.sendBuffer.forEach(c=>{this.notifyOutgoingListeners(c),this.packet(c)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(c=>c()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(c){return this.flags.compress=c,this}get volatile(){return this.flags.volatile=!0,this}timeout(c){return this.flags.timeout=c,this}onAny(c){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(c),this}prependAny(c){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(c),this}offAny(c){if(!this._anyListeners)return this;if(c){const o=this._anyListeners;for(let s=0;s<o.length;s++)if(c===o[s])return o.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(c){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(c),this}prependAnyOutgoing(c){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(c),this}offAnyOutgoing(c){if(!this._anyOutgoingListeners)return this;if(c){const o=this._anyOutgoingListeners;for(let s=0;s<o.length;s++)if(c===o[s])return o.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(c){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const o=this._anyOutgoingListeners.slice();for(const s of o)s.apply(this,c.data)}}}function ar(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}ar.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var c=Math.random(),o=Math.floor(c*this.jitter*r);r=(Math.floor(c*10)&1)==0?r-o:r+o}return Math.min(r,this.max)|0};ar.prototype.reset=function(){this.attempts=0};ar.prototype.setMin=function(r){this.ms=r};ar.prototype.setMax=function(r){this.max=r};ar.prototype.setJitter=function(r){this.jitter=r};class vu extends tt{constructor(c,o){var s;super(),this.nsps={},this.subs=[],c&&typeof c=="object"&&(o=c,c=void 0),o=o||{},o.path=o.path||"/socket.io",this.opts=o,Po(this,o),this.reconnection(o.reconnection!==!1),this.reconnectionAttempts(o.reconnectionAttempts||1/0),this.reconnectionDelay(o.reconnectionDelay||1e3),this.reconnectionDelayMax(o.reconnectionDelayMax||5e3),this.randomizationFactor((s=o.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ar({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(o.timeout==null?2e4:o.timeout),this._readyState="closed",this.uri=c;const w=o.parser||I0;this.encoder=new w.Encoder,this.decoder=new w.Decoder,this._autoConnect=o.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(c){return arguments.length?(this._reconnection=!!c,c||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(c){return c===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=c,this)}reconnectionDelay(c){var o;return c===void 0?this._reconnectionDelay:(this._reconnectionDelay=c,(o=this.backoff)===null||o===void 0||o.setMin(c),this)}randomizationFactor(c){var o;return c===void 0?this._randomizationFactor:(this._randomizationFactor=c,(o=this.backoff)===null||o===void 0||o.setJitter(c),this)}reconnectionDelayMax(c){var o;return c===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=c,(o=this.backoff)===null||o===void 0||o.setMax(c),this)}timeout(c){return arguments.length?(this._timeout=c,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(c){if(~this._readyState.indexOf("open"))return this;this.engine=new M0(this.uri,this.opts);const o=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const w=hi(o,"open",function(){s.onopen(),c&&c()}),y=T=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",T),c?c(T):this.maybeReconnectOnOpen()},_=hi(o,"error",y);if(this._timeout!==!1){const T=this._timeout,E=this.setTimeoutFn(()=>{w(),y(new Error("timeout")),o.close()},T);this.opts.autoUnref&&E.unref(),this.subs.push(()=>{this.clearTimeoutFn(E)})}return this.subs.push(w),this.subs.push(_),this}connect(c){return this.open(c)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const c=this.engine;this.subs.push(hi(c,"ping",this.onping.bind(this)),hi(c,"data",this.ondata.bind(this)),hi(c,"error",this.onerror.bind(this)),hi(c,"close",this.onclose.bind(this)),hi(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(c){try{this.decoder.add(c)}catch(o){this.onclose("parse error",o)}}ondecoded(c){Ao(()=>{this.emitReserved("packet",c)},this.setTimeoutFn)}onerror(c){this.emitReserved("error",c)}socket(c,o){let s=this.nsps[c];return s?this._autoConnect&&!s.active&&s.connect():(s=new rv(this,c,o),this.nsps[c]=s),s}_destroy(c){const o=Object.keys(this.nsps);for(const s of o)if(this.nsps[s].active)return;this._close()}_packet(c){const o=this.encoder.encode(c);for(let s=0;s<o.length;s++)this.engine.write(o[s],c.options)}cleanup(){this.subs.forEach(c=>c()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(c,o){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",c,o),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const c=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const o=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{c.skipReconnect||(this.emitReserved("reconnect_attempt",c.backoff.attempts),!c.skipReconnect&&c.open(w=>{w?(c._reconnecting=!1,c.reconnect(),this.emitReserved("reconnect_error",w)):c.onreconnect()}))},o);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const c=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",c)}}const ps={};function Wd(r,c){typeof r=="object"&&(c=r,r=void 0),c=c||{};const o=L0(r,c.path||"/socket.io"),s=o.source,w=o.id,y=o.path,_=ps[w]&&y in ps[w].nsps,T=c.forceNew||c["force new connection"]||c.multiplex===!1||_;let E;return T?E=new vu(s,c):(ps[w]||(ps[w]=new vu(s,c)),E=ps[w]),o.query&&!c.query&&(c.query=o.queryKey),E.socket(o.path,c)}Object.assign(Wd,{Manager:vu,Socket:rv,io:Wd,connect:Wd});var eu={},ao={exports:{}},tu,Sm;function V0(){if(Sm)return tu;Sm=1;var r=1e3,c=r*60,o=c*60,s=o*24,w=s*7,y=s*365.25;tu=function(D,v){v=v||{};var L=typeof D;if(L==="string"&&D.length>0)return _(D);if(L==="number"&&isFinite(D))return v.long?E(D):T(D);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(D))};function _(D){if(D=String(D),!(D.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(D);if(v){var L=parseFloat(v[1]),k=(v[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return L*y;case"weeks":case"week":case"w":return L*w;case"days":case"day":case"d":return L*s;case"hours":case"hour":case"hrs":case"hr":case"h":return L*o;case"minutes":case"minute":case"mins":case"min":case"m":return L*c;case"seconds":case"second":case"secs":case"sec":case"s":return L*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return L;default:return}}}}function T(D){var v=Math.abs(D);return v>=s?Math.round(D/s)+"d":v>=o?Math.round(D/o)+"h":v>=c?Math.round(D/c)+"m":v>=r?Math.round(D/r)+"s":D+"ms"}function E(D){var v=Math.abs(D);return v>=s?R(D,v,s,"day"):v>=o?R(D,v,o,"hour"):v>=c?R(D,v,c,"minute"):v>=r?R(D,v,r,"second"):D+" ms"}function R(D,v,L,k){var A=v>=L*1.5;return Math.round(D/L)+" "+k+(A?"s":"")}return tu}var iu,wm;function G0(){if(wm)return iu;wm=1;function r(c){s.debug=s,s.default=s,s.coerce=R,s.disable=T,s.enable=y,s.enabled=E,s.humanize=V0(),s.destroy=D,Object.keys(c).forEach(v=>{s[v]=c[v]}),s.names=[],s.skips=[],s.formatters={};function o(v){let L=0;for(let k=0;k<v.length;k++)L=(L<<5)-L+v.charCodeAt(k),L|=0;return s.colors[Math.abs(L)%s.colors.length]}s.selectColor=o;function s(v){let L,k=null,A,g;function h(...l){if(!h.enabled)return;const f=h,u=Number(new Date),p=u-(L||u);f.diff=p,f.prev=L,f.curr=u,L=u,l[0]=s.coerce(l[0]),typeof l[0]!="string"&&l.unshift("%O");let m=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,(b,M)=>{if(b==="%%")return"%";m++;const C=s.formatters[M];if(typeof C=="function"){const O=l[m];b=C.call(f,O),l.splice(m,1),m--}return b}),s.formatArgs.call(f,l),(f.log||s.log).apply(f,l)}return h.namespace=v,h.useColors=s.useColors(),h.color=s.selectColor(v),h.extend=w,h.destroy=s.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>k!==null?k:(A!==s.namespaces&&(A=s.namespaces,g=s.enabled(v)),g),set:l=>{k=l}}),typeof s.init=="function"&&s.init(h),h}function w(v,L){const k=s(this.namespace+(typeof L>"u"?":":L)+v);return k.log=this.log,k}function y(v){s.save(v),s.namespaces=v,s.names=[],s.skips=[];const L=(typeof v=="string"?v:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const k of L)k[0]==="-"?s.skips.push(k.slice(1)):s.names.push(k)}function _(v,L){let k=0,A=0,g=-1,h=0;for(;k<v.length;)if(A<L.length&&(L[A]===v[k]||L[A]==="*"))L[A]==="*"?(g=A,h=k,A++):(k++,A++);else if(g!==-1)A=g+1,h++,k=h;else return!1;for(;A<L.length&&L[A]==="*";)A++;return A===L.length}function T(){const v=[...s.names,...s.skips.map(L=>"-"+L)].join(",");return s.enable(""),v}function E(v){for(const L of s.skips)if(_(v,L))return!1;for(const L of s.names)if(_(v,L))return!0;return!1}function R(v){return v instanceof Error?v.stack||v.message:v}function D(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return iu=r,iu}var Rm;function No(){return Rm||(Rm=1,function(r,c){var o={};c.formatArgs=w,c.save=y,c.load=_,c.useColors=s,c.storage=T(),c.destroy=(()=>{let R=!1;return()=>{R||(R=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let R;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(R=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(R[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function w(R){if(R[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+R[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const D="color: "+this.color;R.splice(1,0,D,"color: inherit");let v=0,L=0;R[0].replace(/%[a-zA-Z%]/g,k=>{k!=="%%"&&(v++,k==="%c"&&(L=v))}),R.splice(L,0,D)}c.log=console.debug||console.log||(()=>{});function y(R){try{R?c.storage.setItem("debug",R):c.storage.removeItem("debug")}catch{}}function _(){let R;try{R=c.storage.getItem("debug")||c.storage.getItem("DEBUG")}catch{}return!R&&typeof process<"u"&&"env"in process&&(R=o.DEBUG),R}function T(){try{return localStorage}catch{}}r.exports=G0()(c);const{formatters:E}=r.exports;E.j=function(R){try{return JSON.stringify(R)}catch(D){return"[UnexpectedJSONParseError]: "+D.message}}}(ao,ao.exports)),ao.exports}var aa={},ra={},Gs={exports:{}},Y0=Gs.exports,Tm;function Q0(){return Tm||(Tm=1,function(r,c){(function(o,s){var w="2.0.3",y=500,_="user-agent",T="",E="?",R="function",D="undefined",v="object",L="string",k="browser",A="cpu",g="device",h="engine",l="os",f="result",u="name",p="type",m="vendor",S="version",b="architecture",M="major",C="model",O="console",U="mobile",H="tablet",N="smarttv",Y="wearable",Z="xr",j="embedded",V="inapp",te="brands",le="formFactors",q="fullVersionList",W="platform",ae="platformVersion",ne="bitness",se="sec-ch-ua",Se=se+"-full-version-list",me=se+"-arch",it=se+"-"+ne,ke=se+"-form-factors",Et=se+"-"+U,rr=se+"-"+C,Ln=se+"-"+W,sr=Ln+"-version",ha=[te,q,U,C,W,ae,b,le,ne],Fi="Amazon",Ki="Apple",Fs="ASUS",Bt="BlackBerry",Di="Google",cr="Huawei",or="Lenovo",On="Honor",ma="LG",ga="Microsoft",lr="Motorola",dr="Nvidia",Xi="OnePlus",pt="OPPO",Ot="Samsung",yt="Sharp",kn="Sony",ur="Xiaomi",fr="Zebra",An="Chrome",Pn="Chromium",bt="Chromecast",va="Edge",ai="Firefox",Nn="Opera",_a="Facebook",pr="Sogou",vi="Mobile ",ri=" Browser",hr="Windows",mr=typeof o!==D,ht=mr&&o.navigator?o.navigator:s,Kt=ht&&ht.userAgentData?ht.userAgentData:s,gr=function(ie,ce){var re={},Ce=ce;if(!qt(ce)){Ce={};for(var de in ce)for(var Le in ce[de])Ce[Le]=ce[de][Le].concat(Ce[Le]?Ce[Le]:[])}for(var fe in ie)re[fe]=Ce[fe]&&Ce[fe].length%2===0?Ce[fe].concat(ie[fe]):ie[fe];return re},jn=function(ie){for(var ce={},re=0;re<ie.length;re++)ce[ie[re].toUpperCase()]=ie[re];return ce},vr=function(ie,ce){if(typeof ie===v&&ie.length>0){for(var re in ie)if(St(ie[re])==St(ce))return!0;return!1}return Ge(ie)?St(ce).indexOf(St(ie))!==-1:!1},qt=function(ie,ce){for(var re in ie)return/^(browser|cpu|device|engine|os)$/.test(re)||(ce?qt(ie[re]):!1)},Ge=function(ie){return typeof ie===L},st=function(ie){if(!ie)return s;for(var ce=[],re=Zi(/\\?\"/g,ie).split(","),Ce=0;Ce<re.length;Ce++)if(re[Ce].indexOf(";")>-1){var de=ci(re[Ce]).split(";v=");ce[Ce]={brand:de[0],version:de[1]}}else ce[Ce]=ci(re[Ce]);return ce},St=function(ie){return Ge(ie)?ie.toLowerCase():ie},zn=function(ie){return Ge(ie)?Zi(/[^\d\.]/g,ie).split(".")[0]:s},si=function(ie){for(var ce in ie){var re=ie[ce];typeof re==v&&re.length==2?this[re[0]]=re[1]:this[re]=s}return this},Zi=function(ie,ce){return Ge(ce)?ce.replace(ie,T):ce},$i=function(ie){return Zi(/\\?\"/g,ie)},ci=function(ie,ce){if(Ge(ie))return ie=Zi(/^\s\s*/,ie),typeof ce===D?ie:ie.substring(0,y)},Un=function(ie,ce){if(!(!ie||!ce))for(var re=0,Ce,de,Le,fe,Ee,ve;re<ce.length&&!Ee;){var Ie=ce[re],oi=ce[re+1];for(Ce=de=0;Ce<Ie.length&&!Ee&&Ie[Ce];)if(Ee=Ie[Ce++].exec(ie),Ee)for(Le=0;Le<oi.length;Le++)ve=Ee[++de],fe=oi[Le],typeof fe===v&&fe.length>0?fe.length===2?typeof fe[1]==R?this[fe[0]]=fe[1].call(this,ve):this[fe[0]]=fe[1]:fe.length===3?typeof fe[1]===R&&!(fe[1].exec&&fe[1].test)?this[fe[0]]=ve?fe[1].call(this,ve,fe[2]):s:this[fe[0]]=ve?ve.replace(fe[1],fe[2]):s:fe.length===4&&(this[fe[0]]=ve?fe[3].call(this,ve.replace(fe[1],fe[2])):s):this[fe]=ve||s;re+=2}},Dt=function(ie,ce){for(var re in ce)if(typeof ce[re]===v&&ce[re].length>0){for(var Ce=0;Ce<ce[re].length;Ce++)if(vr(ce[re][Ce],ie))return re===E?s:re}else if(vr(ce[re],ie))return re===E?s:re;return ce.hasOwnProperty("*")?ce["*"]:ie},xi={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ji={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":s},Mi={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[S,[u,vi+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[S,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,S],[/opios[\/ ]+([\w\.]+)/i],[S,[u,Nn+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[S,[u,Nn+" GX"]],[/\bopr\/([\w\.]+)/i],[S,[u,Nn]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[S,[u,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[S,[u,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\/([-\w\.]+)/i,/(heytap|ovi|115|surf)browser\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[u,S],[/quark(?:pc)?\/([-\w\.]+)/i],[S,[u,"Quark"]],[/\bddg\/([\w\.]+)/i],[S,[u,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[S,[u,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[S,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[S,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[S,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[S,[u,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[S,[u,"Smart "+or+ri]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure"+ri],S],[/\bfocus\/([\w\.]+)/i],[S,[u,ai+" Focus"]],[/\bopt\/([\w\.]+)/i],[S,[u,Nn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[S,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[S,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[S,[u,Nn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[S,[u,"MIUI"+ri]],[/fxios\/([\w\.-]+)/i],[S,[u,vi+ai]],[/\bqihoobrowser\/?([\w\.]*)/i],[S,[u,"360"]],[/\b(qq)\/([\w\.]+)/i],[[u,/(.+)/,"$1Browser"],S],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1"+ri],S],[/samsungbrowser\/([\w\.]+)/i],[S,[u,Ot+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[S,[u,pr+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[u,pr+" Mobile"],S],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[u,S],[/(lbbrowser|rekonq)/i],[u],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[S,u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,_a],S,[p,V]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[u,S,[p,V]],[/\bgsa\/([\w\.]+) .*safari\//i],[S,[u,"GSA"],[p,V]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[S,[u,"TikTok"],[p,V]],[/\[(linkedin)app\]/i],[u,[p,V]],[/(chromium)[\/ ]([-\w\.]+)/i],[u,S],[/headlesschrome(?:\/([\w\.]+)| )/i],[S,[u,An+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,An+" WebView"],S],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[S,[u,"Android"+ri]],[/chrome\/([\w\.]+) mobile/i],[S,[u,vi+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,S],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[S,[u,vi+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[u,vi+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[S,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[S,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[u,S],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[u,vi+ai],S],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],S],[/(wolvic|librewolf)\/([\w\.]+)/i],[u,S],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[S,[u,ai+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[u,[S,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[u,[S,/[^\d\.]+./,T]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[b,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[b,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[b,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[b,/ower/,T,St]],[/ sun4\w[;\)]/i],[[b,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[b,St]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[C,[m,Ot],[p,H]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[C,[m,Ot],[p,U]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[C,[m,Ki],[p,U]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[C,[m,Ki],[p,H]],[/(macintosh);/i],[C,[m,Ki]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[C,[m,yt],[p,U]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[C,[m,On],[p,H]],[/honor([-\w ]+)[;\)]/i],[C,[m,On],[p,U]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[C,[m,cr],[p,H]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[C,[m,cr],[p,U]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[C,/_/g," "],[m,ur],[p,H]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[C,/_/g," "],[m,ur],[p,U]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[C,[m,pt],[p,U]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[C,[m,Dt,{OnePlus:["304","403","203"],"*":pt}],[p,H]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[C,[m,"BLU"],[p,U]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[C,[m,"Vivo"],[p,U]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[C,[m,"Realme"],[p,U]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[C,[m,lr],[p,U]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[C,[m,lr],[p,H]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[C,[m,ma],[p,H]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\w+)/i,/\blg-?([\d\w]+) bui/i],[C,[m,ma],[p,U]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[C,[m,or],[p,H]],[/(nokia) (t[12][01])/i],[m,C,[p,H]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[C,/_/g," "],[p,U],[m,"Nokia"]],[/(pixel (c|tablet))\b/i],[C,[m,Di],[p,H]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[C,[m,Di],[p,U]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[C,[m,kn],[p,U]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[C,"Xperia Tablet"],[m,kn],[p,H]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[C,[m,Xi],[p,U]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[C,[m,Fi],[p,H]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[C,/(.+)/g,"Fire Phone $1"],[m,Fi],[p,U]],[/(playbook);[-\w\),; ]+(rim)/i],[C,m,[p,H]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[C,[m,Bt],[p,U]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[C,[m,Fs],[p,H]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[C,[m,Fs],[p,U]],[/(nexus 9)/i],[C,[m,"HTC"],[p,H]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[C,/_/g," "],[p,U]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[C,[m,"TCL"],[p,H]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[C,[m,"TCL"],[p,U]],[/(itel) ((\w+))/i],[[m,St],C,[p,Dt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[C,[m,"Acer"],[p,H]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[C,[m,"Meizu"],[p,U]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[C,[m,"Ulefone"],[p,U]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[C,[m,"Energizer"],[p,U]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[C,[m,"Cat"],[p,U]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[C,[m,"Smartfren"],[p,U]],[/droid.+; (a(?:015|06[35]|142p?))/i],[C,[m,"Nothing"],[p,U]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[C,[m,"Archos"],[p,H]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[C,[m,"Archos"],[p,U]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[m,C,[p,H]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|tcl)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[m,C,[p,U]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[m,C,[p,H]],[/(surface duo)/i],[C,[m,ga],[p,H]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[C,[m,"Fairphone"],[p,U]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[C,[m,dr],[p,H]],[/(sprint) (\w+)/i],[m,C,[p,U]],[/(kin\.[onetw]{3})/i],[[C,/\./g," "],[m,ga],[p,U]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[C,[m,fr],[p,H]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[C,[m,fr],[p,U]],[/smart-tv.+(samsung)/i],[m,[p,N]],[/hbbtv.+maple;(\d+)/i],[[C,/^/,"SmartTV"],[m,Ot],[p,N]],[/tcast.+(lg)e?. ([-\w]+)/i],[m,C,[p,N]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,ma],[p,N]],[/(apple) ?tv/i],[m,[C,Ki+" TV"],[p,N]],[/crkey.*devicetype\/chromecast/i],[[C,bt+" Third Generation"],[m,Di],[p,N]],[/crkey.*devicetype\/([^/]*)/i],[[C,/^/,"Chromecast "],[m,Di],[p,N]],[/fuchsia.*crkey/i],[[C,bt+" Nest Hub"],[m,Di],[p,N]],[/crkey/i],[[C,bt],[m,Di],[p,N]],[/(portaltv)/i],[C,[m,_a],[p,N]],[/droid.+aft(\w+)( bui|\))/i],[C,[m,Fi],[p,N]],[/(shield \w+ tv)/i],[C,[m,dr],[p,N]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[C,[m,yt],[p,N]],[/(bravia[\w ]+)( bui|\))/i],[C,[m,kn],[p,N]],[/(mi(tv|box)-?\w+) bui/i],[C,[m,ur],[p,N]],[/Hbbtv.*(technisat) (.*);/i],[m,C,[p,N]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,ci],[C,ci],[p,N]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[C,[p,N]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,N]],[/(ouya)/i,/(nintendo) (\w+)/i],[m,C,[p,O]],[/droid.+; (shield)( bui|\))/i],[C,[m,dr],[p,O]],[/(playstation \w+)/i],[C,[m,kn],[p,O]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[C,[m,ga],[p,O]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[C,[m,Ot],[p,Y]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[m,C,[p,Y]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[C,[m,pt],[p,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[C,[m,Ki],[p,Y]],[/(opwwe\d{3})/i],[C,[m,Xi],[p,Y]],[/(moto 360)/i],[C,[m,lr],[p,Y]],[/(smartwatch 3)/i],[C,[m,kn],[p,Y]],[/(g watch r)/i],[C,[m,ma],[p,Y]],[/droid.+; (wt63?0{2,3})\)/i],[C,[m,fr],[p,Y]],[/droid.+; (glass) \d/i],[C,[m,Di],[p,Z]],[/(pico) (4|neo3(?: link|pro)?)/i],[m,C,[p,Z]],[/(quest( \d| pro)?s?).+vr/i],[C,[m,_a],[p,Z]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,j]],[/(aeobc)\b/i],[C,[m,Fi],[p,j]],[/(homepod).+mac os/i],[C,[m,Ki],[p,j]],[/windows iot/i],[[p,j]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[C,[p,Dt,{mobile:"Mobile",xr:"VR","*":H}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,H]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,U]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[C,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[S,[u,va+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[u,S],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[S,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,S],[/ladybird\//i],[[u,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[S,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,S],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[u,[S,Dt,xi]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[S,Dt,xi],[u,hr]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[S,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,"macOS"],[S,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[S,[u,bt+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[S,[u,bt+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[S,[u,bt+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[S,[u,bt+" Linux"]],[/crkey\/([\d\.]+)/i],[S,[u,bt]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[S,u],[/(ubuntu) ([\w\.]+) like android/i],[[u,/(.+)/,"$1 Touch"],S],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/\.; ]?([\d\.]*)/i],[u,S],[/\(bb(10);/i],[S,[u,Bt]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[S,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[S,[u,ai+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[S,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[S,[u,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,"Chrome OS"],S],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,S],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],S],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,S]]},Ye=function(){var ie={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return si.call(ie.init,[[k,[u,S,M,p]],[A,[b]],[g,[p,C,m]],[h,[u,S]],[l,[u,S]]]),si.call(ie.isIgnore,[[k,[S,M]],[h,[S]],[l,[S]]]),si.call(ie.isIgnoreRgx,[[k,/ ?browser$/i],[l,/ ?os$/i]]),si.call(ie.toString,[[k,[u,S]],[A,[b]],[g,[m,C]],[h,[u,S]],[l,[u,S]]]),ie}(),Ks=function(ie,ce){var re=Ye.init[ce],Ce=Ye.isIgnore[ce]||0,de=Ye.isIgnoreRgx[ce]||0,Le=Ye.toString[ce]||0;function fe(){si.call(this,re)}return fe.prototype.getItem=function(){return ie},fe.prototype.withClientHints=function(){return Kt?Kt.getHighEntropyValues(ha).then(function(Ee){return ie.setCH(new _r(Ee,!1)).parseCH().get()}):ie.parseCH().get()},fe.prototype.withFeatureCheck=function(){return ie.detectFeature().get()},ce!=f&&(fe.prototype.is=function(Ee){var ve=!1;for(var Ie in this)if(this.hasOwnProperty(Ie)&&!vr(Ce,Ie)&&St(de?Zi(de,this[Ie]):this[Ie])==St(de?Zi(de,Ee):Ee)){if(ve=!0,Ee!=D)break}else if(Ee==D&&ve){ve=!ve;break}return ve},fe.prototype.toString=function(){var Ee=T;for(var ve in Le)typeof this[Le[ve]]!==D&&(Ee+=(Ee?" ":T)+this[Le[ve]]);return Ee||D}),Kt||(fe.prototype.then=function(Ee){var ve=this,Ie=function(){for(var li in ve)ve.hasOwnProperty(li)&&(this[li]=ve[li])};Ie.prototype={is:fe.prototype.is,toString:fe.prototype.toString};var oi=new Ie;return Ee(oi),oi}),new fe};function _r(ie,ce){if(ie=ie||{},si.call(this,ha),ce)si.call(this,[[te,st(ie[se])],[q,st(ie[Se])],[U,/\?1/.test(ie[Et])],[C,$i(ie[rr])],[W,$i(ie[Ln])],[ae,$i(ie[sr])],[b,$i(ie[me])],[le,st(ie[ke])],[ne,$i(ie[it])]]);else for(var re in ie)this.hasOwnProperty(re)&&typeof ie[re]!==D&&(this[re]=ie[re])}function _i(ie,ce,re,Ce){return this.get=function(de){return de?this.data.hasOwnProperty(de)?this.data[de]:s:this.data},this.set=function(de,Le){return this.data[de]=Le,this},this.setCH=function(de){return this.uaCH=de,this},this.detectFeature=function(){if(ht&&ht.userAgent==this.ua)switch(this.itemType){case k:ht.brave&&typeof ht.brave.isBrave==R&&this.set(u,"Brave");break;case g:!this.get(p)&&Kt&&Kt[U]&&this.set(p,U),this.get(C)=="Macintosh"&&ht&&typeof ht.standalone!==D&&ht.maxTouchPoints&&ht.maxTouchPoints>2&&this.set(C,"iPad").set(p,H);break;case l:!this.get(u)&&Kt&&Kt[W]&&this.set(u,Kt[W]);break;case f:var de=this.data,Le=function(fe){return de[fe].getItem().detectFeature().get()};this.set(k,Le(k)).set(A,Le(A)).set(g,Le(g)).set(h,Le(h)).set(l,Le(l))}return this},this.parseUA=function(){return this.itemType!=f&&Un.call(this.data,this.ua,this.rgxMap),this.itemType==k&&this.set(M,zn(this.get(S))),this},this.parseCH=function(){var de=this.uaCH,Le=this.rgxMap;switch(this.itemType){case k:case h:var fe=de[q]||de[te],Ee;if(fe)for(var ve in fe){var Ie=fe[ve].brand||fe[ve],oi=fe[ve].version;this.itemType==k&&!/not.a.brand/i.test(Ie)&&(!Ee||/chrom/i.test(Ee)&&Ie!=Pn)&&(Ie=Dt(Ie,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"}),this.set(u,Ie).set(S,oi).set(M,zn(oi)),Ee=Ie),this.itemType==h&&Ie==Pn&&this.set(S,oi)}break;case A:var li=de[b];li&&(li&&de[ne]=="64"&&(li+="64"),Un.call(this.data,li+";",Le));break;case g:if(de[U]&&this.set(p,U),de[C]&&(this.set(C,de[C]),!this.get(p)||!this.get(m))){var ot={};Un.call(ot,"droid 9; "+de[C]+")",Le),!this.get(p)&&ot.type&&this.set(p,ot.type),!this.get(m)&&ot.vendor&&this.set(m,ot.vendor)}if(de[le]){var qn;if(typeof de[le]!="string")for(var Xs=0;!qn&&Xs<de[le].length;)qn=Dt(de[le][Xs++],Ji);else qn=Dt(de[le],Ji);this.set(p,qn)}break;case l:var en=de[W];if(en){var ya=de[ae];en==hr&&(ya=parseInt(zn(ya),10)>=13?"11":"10"),this.set(u,en).set(S,ya)}this.get(u)==hr&&de[C]=="Xbox"&&this.set(u,"Xbox").set(S,s);break;case f:var ba=this.data,In=function(kt){return ba[kt].getItem().setCH(de).parseCH().get()};this.set(k,In(k)).set(A,In(A)).set(g,In(g)).set(h,In(h)).set(l,In(l))}return this},si.call(this,[["itemType",ie],["ua",ce],["uaCH",Ce],["rgxMap",re],["data",Ks(this,ie)]]),this}function ct(ie,ce,re){if(typeof ie===v?(qt(ie,!0)?(typeof ce===v&&(re=ce),ce=ie):(re=ie,ce=s),ie=s):typeof ie===L&&!qt(ce,!0)&&(re=ce,ce=s),re&&typeof re.append===R){var Ce={};re.forEach(function(ve,Ie){Ce[Ie]=ve}),re=Ce}if(!(this instanceof ct))return new ct(ie,ce,re).getResult();var de=typeof ie===L?ie:re&&re[_]?re[_]:ht&&ht.userAgent?ht.userAgent:T,Le=new _r(re,!0),fe=ce?gr(Mi,ce):Mi,Ee=function(ve){return ve==f?function(){return new _i(ve,de,fe,Le).set("ua",de).set(k,this.getBrowser()).set(A,this.getCPU()).set(g,this.getDevice()).set(h,this.getEngine()).set(l,this.getOS()).get()}:function(){return new _i(ve,de,fe[ve],Le).parseUA().get()}};return si.call(this,[["getBrowser",Ee(k)],["getCPU",Ee(A)],["getDevice",Ee(g)],["getEngine",Ee(h)],["getOS",Ee(l)],["getResult",Ee(f)],["getUA",function(){return de}],["setUA",function(ve){return Ge(ve)&&(de=ve.length>y?ci(ve,y):ve),this}]]).setUA(de),this}ct.VERSION=w,ct.BROWSER=jn([u,S,M,p]),ct.CPU=jn([b]),ct.DEVICE=jn([C,m,p,O,U,N,H,Y,j]),ct.ENGINE=ct.OS=jn([u,S]),r.exports&&(c=r.exports=ct),c.UAParser=ct;var Wi=mr&&(o.jQuery||o.Zepto);if(Wi&&!Wi.ua){var Bn=new ct;Wi.ua=Bn.getResult(),Wi.ua.get=function(){return Bn.getUA()},Wi.ua.set=function(ie){Bn.setUA(ie);var ce=Bn.getResult();for(var re in ce)Wi.ua[re]=ce[re]}}})(typeof window=="object"?window:Y0)}(Gs,Gs.exports)),Gs.exports}var hs={},Cm;function Je(){if(Cm)return hs;Cm=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.Logger=void 0;const r=No(),c="mediasoup-client";class o{constructor(w){z(this,"_debug");z(this,"_warn");z(this,"_error");w?(this._debug=(0,r.default)(`${c}:${w}`),this._warn=(0,r.default)(`${c}:WARN:${w}`),this._error=(0,r.default)(`${c}:ERROR:${w}`)):(this._debug=(0,r.default)(c),this._warn=(0,r.default)(`${c}:WARN`),this._error=(0,r.default)(`${c}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return hs.Logger=o,hs}var ms={},ro={exports:{}},Em;function F0(){if(Em)return ro.exports;Em=1;var r=typeof Reflect=="object"?Reflect:null,c=r&&typeof r.apply=="function"?r.apply:function(m,S,b){return Function.prototype.apply.call(m,S,b)},o;r&&typeof r.ownKeys=="function"?o=r.ownKeys:Object.getOwnPropertySymbols?o=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:o=function(m){return Object.getOwnPropertyNames(m)};function s(p){console&&console.warn&&console.warn(p)}var w=Number.isNaN||function(m){return m!==m};function y(){y.init.call(this)}ro.exports=y,ro.exports.once=l,y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var _=10;function T(p){if(typeof p!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof p)}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(p){if(typeof p!="number"||p<0||w(p))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+p+".");_=p}}),y.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||w(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function E(p){return p._maxListeners===void 0?y.defaultMaxListeners:p._maxListeners}y.prototype.getMaxListeners=function(){return E(this)},y.prototype.emit=function(m){for(var S=[],b=1;b<arguments.length;b++)S.push(arguments[b]);var M=m==="error",C=this._events;if(C!==void 0)M=M&&C.error===void 0;else if(!M)return!1;if(M){var O;if(S.length>0&&(O=S[0]),O instanceof Error)throw O;var U=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw U.context=O,U}var H=C[m];if(H===void 0)return!1;if(typeof H=="function")c(H,this,S);else for(var N=H.length,Y=A(H,N),b=0;b<N;++b)c(Y[b],this,S);return!0};function R(p,m,S,b){var M,C,O;if(T(S),C=p._events,C===void 0?(C=p._events=Object.create(null),p._eventsCount=0):(C.newListener!==void 0&&(p.emit("newListener",m,S.listener?S.listener:S),C=p._events),O=C[m]),O===void 0)O=C[m]=S,++p._eventsCount;else if(typeof O=="function"?O=C[m]=b?[S,O]:[O,S]:b?O.unshift(S):O.push(S),M=E(p),M>0&&O.length>M&&!O.warned){O.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=p,U.type=m,U.count=O.length,s(U)}return p}y.prototype.addListener=function(m,S){return R(this,m,S,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(m,S){return R(this,m,S,!0)};function D(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(p,m,S){var b={fired:!1,wrapFn:void 0,target:p,type:m,listener:S},M=D.bind(b);return M.listener=S,b.wrapFn=M,M}y.prototype.once=function(m,S){return T(S),this.on(m,v(this,m,S)),this},y.prototype.prependOnceListener=function(m,S){return T(S),this.prependListener(m,v(this,m,S)),this},y.prototype.removeListener=function(m,S){var b,M,C,O,U;if(T(S),M=this._events,M===void 0)return this;if(b=M[m],b===void 0)return this;if(b===S||b.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete M[m],M.removeListener&&this.emit("removeListener",m,b.listener||S));else if(typeof b!="function"){for(C=-1,O=b.length-1;O>=0;O--)if(b[O]===S||b[O].listener===S){U=b[O].listener,C=O;break}if(C<0)return this;C===0?b.shift():g(b,C),b.length===1&&(M[m]=b[0]),M.removeListener!==void 0&&this.emit("removeListener",m,U||S)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(m){var S,b,M;if(b=this._events,b===void 0)return this;if(b.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):b[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete b[m]),this;if(arguments.length===0){var C=Object.keys(b),O;for(M=0;M<C.length;++M)O=C[M],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=b[m],typeof S=="function")this.removeListener(m,S);else if(S!==void 0)for(M=S.length-1;M>=0;M--)this.removeListener(m,S[M]);return this};function L(p,m,S){var b=p._events;if(b===void 0)return[];var M=b[m];return M===void 0?[]:typeof M=="function"?S?[M.listener||M]:[M]:S?h(M):A(M,M.length)}y.prototype.listeners=function(m){return L(this,m,!0)},y.prototype.rawListeners=function(m){return L(this,m,!1)},y.listenerCount=function(p,m){return typeof p.listenerCount=="function"?p.listenerCount(m):k.call(p,m)},y.prototype.listenerCount=k;function k(p){var m=this._events;if(m!==void 0){var S=m[p];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}y.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function A(p,m){for(var S=new Array(m),b=0;b<m;++b)S[b]=p[b];return S}function g(p,m){for(;m+1<p.length;m++)p[m]=p[m+1];p.pop()}function h(p){for(var m=new Array(p.length),S=0;S<m.length;++S)m[S]=p[S].listener||p[S];return m}function l(p,m){return new Promise(function(S,b){function M(O){p.removeListener(m,C),b(O)}function C(){typeof p.removeListener=="function"&&p.removeListener("error",M),S([].slice.call(arguments))}u(p,m,C,{once:!0}),m!=="error"&&f(p,M,{once:!0})})}function f(p,m,S){typeof p.on=="function"&&u(p,"error",m,S)}function u(p,m,S,b){if(typeof p.on=="function")b.once?p.once(m,S):p.on(m,S);else if(typeof p.addEventListener=="function")p.addEventListener(m,function M(C){b.once&&p.removeEventListener(m,M),S(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof p)}return ro.exports}var Dm;function En(){if(Dm)return ms;Dm=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.EnhancedEventEmitter=void 0;const r=F0(),c=Je(),o=new c.Logger("EnhancedEventEmitter");class s extends r.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(y,..._){return super.emit(y,..._)}safeEmit(y,..._){try{return super.emit(y,..._)}catch(T){o.error("safeEmit() | event listener threw an error [eventName:%s]:%o",y,T);try{super.emit("listenererror",y,T)}catch{}return!!super.listenerCount(y)}}on(y,_){return super.on(y,_),this}off(y,_){return super.off(y,_),this}addListener(y,_){return super.on(y,_),this}prependListener(y,_){return super.prependListener(y,_),this}once(y,_){return super.once(y,_),this}prependOnceListener(y,_){return super.prependOnceListener(y,_),this}removeListener(y,_){return super.off(y,_),this}removeAllListeners(y){return super.removeAllListeners(y),this}listenerCount(y){return super.listenerCount(y)}listeners(y){return super.listeners(y)}rawListeners(y){return super.rawListeners(y)}}return ms.EnhancedEventEmitter=s,ms}var sa={},xm;function Tt(){if(xm)return sa;xm=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.InvalidStateError=sa.UnsupportedError=void 0;class r extends Error{constructor(s){super(s),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,r):this.stack=new Error(s).stack}}sa.UnsupportedError=r;class c extends Error{constructor(s){super(s),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,c):this.stack=new Error(s).stack}}return sa.InvalidStateError=c,sa}var er={},Mm;function rt(){if(Mm)return er;Mm=1,Object.defineProperty(er,"__esModule",{value:!0}),er.clone=r,er.generateRandomNumber=c,er.deepFreeze=o;function r(s){if(s!==void 0)return Number.isNaN(s)?NaN:typeof structuredClone=="function"?structuredClone(s):JSON.parse(JSON.stringify(s))}function c(){return Math.round(Math.random()*1e7)}function o(s){const w=Reflect.ownKeys(s);for(const y of w){const _=s[y];(_&&typeof _=="object"||typeof _=="function")&&o(_)}return Object.freeze(s)}return er}var Mt={},ft={},ca={},Lm;function K0(){if(Lm)return ca;Lm=1;var r=ca&&ca.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(ca,"__esModule",{value:!0}),ca.Logger=void 0;const c=r(No()),o="h264-profile-level-id";class s{constructor(y){y?(this._debug=(0,c.default)(`${o}:${y}`),this._warn=(0,c.default)(`${o}:WARN:${y}`),this._error=(0,c.default)(`${o}:ERROR:${y}`)):(this._debug=(0,c.default)(o),this._warn=(0,c.default)(`${o}:WARN`),this._error=(0,c.default)(`${o}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}return ca.Logger=s,ca}var Om;function X0(){if(Om)return ft;Om=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.ProfileLevelId=ft.Level=ft.Profile=void 0,ft.parseProfileLevelId=D,ft.profileLevelIdToString=v,ft.profileToString=L,ft.levelToString=k,ft.parseSdpProfileLevelId=A,ft.isSameProfile=g,ft.isSameProfileAndLevel=h,ft.generateProfileLevelIdStringForAnswer=l,ft.supportedLevel=f;const r=K0(),c=new r.Logger;var o;(function(b){b[b.ConstrainedBaseline=1]="ConstrainedBaseline",b[b.Baseline=2]="Baseline",b[b.Main=3]="Main",b[b.ConstrainedHigh=4]="ConstrainedHigh",b[b.High=5]="High",b[b.PredictiveHigh444=6]="PredictiveHigh444"})(o||(ft.Profile=o={}));var s;(function(b){b[b.L1_b=0]="L1_b",b[b.L1=10]="L1",b[b.L1_1=11]="L1_1",b[b.L1_2=12]="L1_2",b[b.L1_3=13]="L1_3",b[b.L2=20]="L2",b[b.L2_1=21]="L2_1",b[b.L2_2=22]="L2_2",b[b.L3=30]="L3",b[b.L3_1=31]="L3_1",b[b.L3_2=32]="L3_2",b[b.L4=40]="L4",b[b.L4_1=41]="L4_1",b[b.L4_2=42]="L4_2",b[b.L5=50]="L5",b[b.L5_1=51]="L5_1",b[b.L5_2=52]="L5_2"})(s||(ft.Level=s={}));class w{constructor(M,C){this.profile=M,this.level=C}}ft.ProfileLevelId=w;const y=new w(o.ConstrainedBaseline,s.L3_1);class _{constructor(M){this.mask=~u("x",M),this.masked_value=u("1",M)}isMatch(M){return this.masked_value===(M&this.mask)}}class T{constructor(M,C,O){this.profile_idc=M,this.profile_iop=C,this.profile=O}}const E=[new T(66,new _("x1xx0000"),o.ConstrainedBaseline),new T(77,new _("1xxx0000"),o.ConstrainedBaseline),new T(88,new _("11xx0000"),o.ConstrainedBaseline),new T(66,new _("x0xx0000"),o.Baseline),new T(88,new _("10xx0000"),o.Baseline),new T(77,new _("0x0x0000"),o.Main),new T(100,new _("00000000"),o.High),new T(100,new _("00001100"),o.ConstrainedHigh),new T(244,new _("00000000"),o.PredictiveHigh444)],R=[{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:s.L1},{max_macroblocks_per_second:1485,max_macroblock_frame_size:99,level:s.L1_b},{max_macroblocks_per_second:3e3,max_macroblock_frame_size:396,level:s.L1_1},{max_macroblocks_per_second:6e3,max_macroblock_frame_size:396,level:s.L1_2},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:s.L1_3},{max_macroblocks_per_second:11880,max_macroblock_frame_size:396,level:s.L2},{max_macroblocks_per_second:19800,max_macroblock_frame_size:792,level:s.L2_1},{max_macroblocks_per_second:20250,max_macroblock_frame_size:1620,level:s.L2_2},{max_macroblocks_per_second:40500,max_macroblock_frame_size:1620,level:s.L3},{max_macroblocks_per_second:108e3,max_macroblock_frame_size:3600,level:s.L3_1},{max_macroblocks_per_second:216e3,max_macroblock_frame_size:5120,level:s.L3_2},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:s.L4},{max_macroblocks_per_second:245760,max_macroblock_frame_size:8192,level:s.L4_1},{max_macroblocks_per_second:522240,max_macroblock_frame_size:8704,level:s.L4_2},{max_macroblocks_per_second:589824,max_macroblock_frame_size:22080,level:s.L5},{max_macroblocks_per_second:983040,max_macroblock_frame_size:36864,level:s.L5_1},{max_macroblocks_per_second:2073600,max_macroblock_frame_size:36864,level:s.L5_2}];function D(b){if(typeof b!="string"||b.length!==6)return;const C=parseInt(b,16);if(C===0)return;const O=C&255,U=C>>8&255,H=C>>16&255;let N;switch(O){case s.L1_1:{N=(U&16)!==0?s.L1_b:s.L1_1;break}case s.L1:case s.L1_2:case s.L1_3:case s.L2:case s.L2_1:case s.L2_2:case s.L3:case s.L3_1:case s.L3_2:case s.L4:case s.L4_1:case s.L4_2:case s.L5:case s.L5_1:case s.L5_2:{N=O;break}default:{c.warn(`parseProfileLevelId() | unrecognized level_idc [str:${b}, level_idc:${O}]`);return}}for(const Y of E)if(H===Y.profile_idc&&Y.profile_iop.isMatch(U))return c.debug(`parseProfileLevelId() | result [str:${b}, profile:${Y.profile}, level:${N}]`),new w(Y.profile,N);c.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${b}, profile_idc:${H}, profile_iop:${U}]`)}function v(b){if(b.level==s.L1_b)switch(b.profile){case o.ConstrainedBaseline:return"42f00b";case o.Baseline:return"42100b";case o.Main:return"4d100b";default:{c.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${b.profile}`);return}}let M;switch(b.profile){case o.ConstrainedBaseline:{M="42e0";break}case o.Baseline:{M="4200";break}case o.Main:{M="4d00";break}case o.ConstrainedHigh:{M="640c";break}case o.High:{M="6400";break}case o.PredictiveHigh444:{M="f400";break}default:{c.warn(`profileLevelIdToString() | unrecognized profile ${b.profile}`);return}}let C=b.level.toString(16);return C.length===1&&(C=`0${C}`),`${M}${C}`}function L(b){switch(b){case o.ConstrainedBaseline:return"ConstrainedBaseline";case o.Baseline:return"Baseline";case o.Main:return"Main";case o.ConstrainedHigh:return"ConstrainedHigh";case o.High:return"High";case o.PredictiveHigh444:return"PredictiveHigh444";default:{c.warn(`profileToString() | unrecognized profile ${b}`);return}}}function k(b){switch(b){case s.L1_b:return"1b";case s.L1:return"1";case s.L1_1:return"1.1";case s.L1_2:return"1.2";case s.L1_3:return"1.3";case s.L2:return"2";case s.L2_1:return"2.1";case s.L2_2:return"2.2";case s.L3:return"3";case s.L3_1:return"3.1";case s.L3_2:return"3.2";case s.L4:return"4";case s.L4_1:return"4.1";case s.L4_2:return"4.2";case s.L5:return"5";case s.L5_1:return"5.1";case s.L5_2:return"5.2";default:{c.warn(`levelToString() | unrecognized level ${b}`);return}}}function A(b={}){const M=b["profile-level-id"];return M?D(M):y}function g(b={},M={}){const C=A(b),O=A(M);return!!(C&&O&&C.profile===O.profile)}function h(b={},M={}){const C=A(b),O=A(M);return!!(C&&O&&C.profile===O.profile&&C.level==O.level)}function l(b={},M={}){if(!b["profile-level-id"]&&!M["profile-level-id"]){c.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");return}const C=A(b),O=A(M);if(!C)throw new TypeError("invalid local_profile_level_id");if(!O)throw new TypeError("invalid remote_profile_level_id");if(C.profile!==O.profile)throw new TypeError("H264 Profile mismatch");const U=S(b)&&S(M),H=C.level,N=O.level,Y=m(H,N),Z=U?H:Y;return c.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${C.profile}, level:${Z}]`),v(new w(C.profile,Z))}function f(b,M){for(let O=R.length-1;O>=0;--O){const U=R[O];if(U.max_macroblock_frame_size*256<=b&&U.max_macroblocks_per_second<=M*U.max_macroblock_frame_size)return c.debug(`supportedLevel() | result [max_frame_pixel_count:${b}, max_fps:${M}, level:${U.level}]`),U.level}c.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${b}, max_fps:${M}]`)}function u(b,M){return+(M[0]===b)<<7|+(M[1]===b)<<6|+(M[2]===b)<<5|+(M[3]===b)<<4|+(M[4]===b)<<3|+(M[5]===b)<<2|+(M[6]===b)<<1|+(M[7]===b)<<0}function p(b,M){return b===s.L1_b?M!==s.L1&&M!==s.L1_b:M===s.L1_b?b!==s.L1:b<M}function m(b,M){return p(b,M)?b:M}function S(b={}){const M=b["level-asymmetry-allowed"];return M===!0||M===1||M==="1"}return ft}var km;function Ct(){if(km)return Mt;km=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.validateRtpCapabilities=y,Mt.validateRtpParameters=_,Mt.validateSctpStreamParameters=T,Mt.validateSctpCapabilities=E,Mt.getExtendedRtpCapabilities=R,Mt.getRecvRtpCapabilities=D,Mt.getSendingRtpParameters=v,Mt.getSendingRemoteRtpParameters=L,Mt.reduceCodecs=k,Mt.generateProbatorRtpParameters=A,Mt.canSend=g,Mt.canReceive=h;const r=X0(),c=rt(),o="probator",s=1234,w=127;function y(N){if(typeof N!="object")throw new TypeError("caps is not an object");if(N.codecs&&!Array.isArray(N.codecs))throw new TypeError("caps.codecs is not an array");N.codecs||(N.codecs=[]);for(const Y of N.codecs)l(Y);if(N.headerExtensions&&!Array.isArray(N.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");N.headerExtensions||(N.headerExtensions=[]);for(const Y of N.headerExtensions)u(Y)}function _(N){if(typeof N!="object")throw new TypeError("params is not an object");if(N.mid&&typeof N.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(N.codecs))throw new TypeError("missing params.codecs");for(const Y of N.codecs)p(Y);if(N.headerExtensions&&!Array.isArray(N.headerExtensions))throw new TypeError("params.headerExtensions is not an array");N.headerExtensions||(N.headerExtensions=[]);for(const Y of N.headerExtensions)m(Y);if(N.encodings&&!Array.isArray(N.encodings))throw new TypeError("params.encodings is not an array");N.encodings||(N.encodings=[]);for(const Y of N.encodings)S(Y);if(N.rtcp&&typeof N.rtcp!="object")throw new TypeError("params.rtcp is not an object");N.rtcp||(N.rtcp={}),b(N.rtcp)}function T(N){if(typeof N!="object")throw new TypeError("params is not an object");if(typeof N.streamId!="number")throw new TypeError("missing params.streamId");let Y=!1;if(typeof N.ordered=="boolean"?Y=!0:N.ordered=!0,N.maxPacketLifeTime&&typeof N.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(N.maxRetransmits&&typeof N.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(N.maxPacketLifeTime&&N.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(Y&&N.ordered&&(N.maxPacketLifeTime||N.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!Y&&(N.maxPacketLifeTime||N.maxRetransmits)&&(N.ordered=!1),N.label&&typeof N.label!="string")throw new TypeError("invalid params.label");if(N.protocol&&typeof N.protocol!="string")throw new TypeError("invalid params.protocol")}function E(N){if(typeof N!="object")throw new TypeError("caps is not an object");if(!N.numStreams||typeof N.numStreams!="object")throw new TypeError("missing caps.numStreams");M(N.numStreams)}function R(N,Y,Z){const j={codecs:[],headerExtensions:[]};if(Z)for(const V of N.codecs??[]){if(C(V))continue;const te=(Y.codecs??[]).find(q=>O(q,V,{strict:!0,modify:!0}));if(!te)continue;const le={mimeType:V.mimeType,kind:V.kind,clockRate:V.clockRate,channels:V.channels,localPayloadType:V.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:te.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:V.parameters,remoteParameters:te.parameters,rtcpFeedback:H(V,te)};j.codecs.push(le)}else for(const V of Y.codecs??[]){if(C(V))continue;const te=(N.codecs??[]).find(q=>O(q,V,{strict:!0,modify:!0}));if(!te)continue;const le={mimeType:te.mimeType,kind:te.kind,clockRate:te.clockRate,channels:te.channels,localPayloadType:te.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:V.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:te.parameters,remoteParameters:V.parameters,rtcpFeedback:H(te,V)};j.codecs.push(le)}for(const V of j.codecs){const te=N.codecs.find(q=>C(q)&&q.parameters.apt===V.localPayloadType),le=Y.codecs.find(q=>C(q)&&q.parameters.apt===V.remotePayloadType);te&&le&&(V.localRtxPayloadType=te.preferredPayloadType,V.remoteRtxPayloadType=le.preferredPayloadType)}for(const V of Y.headerExtensions){const te=N.headerExtensions.find(q=>U(q,V));if(!te)continue;const le={kind:V.kind,uri:V.uri,sendId:te.preferredId,recvId:V.preferredId,encrypt:te.preferredEncrypt,direction:"sendrecv"};switch(V.direction){case"sendrecv":{le.direction="sendrecv";break}case"recvonly":{le.direction="sendonly";break}case"sendonly":{le.direction="recvonly";break}case"inactive":{le.direction="inactive";break}}j.headerExtensions.push(le)}return j}function D(N){const Y={codecs:[],headerExtensions:[]};for(const Z of N.codecs){const j={mimeType:Z.mimeType,kind:Z.kind,preferredPayloadType:Z.remotePayloadType,clockRate:Z.clockRate,channels:Z.channels,parameters:Z.localParameters,rtcpFeedback:Z.rtcpFeedback};if(Y.codecs.push(j),!Z.remoteRtxPayloadType)continue;const V={mimeType:`${Z.kind}/rtx`,kind:Z.kind,preferredPayloadType:Z.remoteRtxPayloadType,clockRate:Z.clockRate,parameters:{apt:Z.remotePayloadType},rtcpFeedback:[]};Y.codecs.push(V)}for(const Z of N.headerExtensions){if(Z.direction!=="sendrecv"&&Z.direction!=="recvonly")continue;const j={kind:Z.kind,uri:Z.uri,preferredId:Z.recvId,preferredEncrypt:Z.encrypt,direction:Z.direction};Y.headerExtensions.push(j)}return Y}function v(N,Y){const Z={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const j of Y.codecs){if(j.kind!==N)continue;const V={mimeType:j.mimeType,payloadType:j.localPayloadType,clockRate:j.clockRate,channels:j.channels,parameters:j.localParameters,rtcpFeedback:j.rtcpFeedback};if(Z.codecs.push(V),j.localRtxPayloadType){const te={mimeType:`${j.kind}/rtx`,payloadType:j.localRtxPayloadType,clockRate:j.clockRate,parameters:{apt:j.localPayloadType},rtcpFeedback:[]};Z.codecs.push(te)}}for(const j of Y.headerExtensions){if(j.kind&&j.kind!==N||j.direction!=="sendrecv"&&j.direction!=="sendonly")continue;const V={uri:j.uri,id:j.sendId,encrypt:j.encrypt,parameters:{}};Z.headerExtensions.push(V)}return Z}function L(N,Y){const Z={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const j of Y.codecs){if(j.kind!==N)continue;const V={mimeType:j.mimeType,payloadType:j.localPayloadType,clockRate:j.clockRate,channels:j.channels,parameters:j.remoteParameters,rtcpFeedback:j.rtcpFeedback};if(Z.codecs.push(V),j.localRtxPayloadType){const te={mimeType:`${j.kind}/rtx`,payloadType:j.localRtxPayloadType,clockRate:j.clockRate,parameters:{apt:j.localPayloadType},rtcpFeedback:[]};Z.codecs.push(te)}}for(const j of Y.headerExtensions){if(j.kind&&j.kind!==N||j.direction!=="sendrecv"&&j.direction!=="sendonly")continue;const V={uri:j.uri,id:j.sendId,encrypt:j.encrypt,parameters:{}};Z.headerExtensions.push(V)}if(Z.headerExtensions.some(j=>j.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const j of Z.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(V=>V.type!=="goog-remb");else if(Z.headerExtensions.some(j=>j.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const j of Z.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(V=>V.type!=="transport-cc");else for(const j of Z.codecs)j.rtcpFeedback=(j.rtcpFeedback??[]).filter(V=>V.type!=="transport-cc"&&V.type!=="goog-remb");return Z}function k(N,Y){const Z=[];if(!Y)Z.push(N[0]),C(N[1])&&Z.push(N[1]);else{for(let j=0;j<N.length;++j)if(O(N[j],Y,{strict:!0})){Z.push(N[j]),C(N[j+1])&&Z.push(N[j+1]);break}if(Z.length===0)throw new TypeError("no matching codec found")}return Z}function A(N){N=c.clone(N),_(N);const Y={mid:o,codecs:[],headerExtensions:[],encodings:[{ssrc:s}],rtcp:{cname:"probator"}};return Y.codecs.push(N.codecs[0]),Y.codecs[0].payloadType=w,Y.headerExtensions=N.headerExtensions,Y}function g(N,Y){return Y.codecs.some(Z=>Z.kind===N)}function h(N,Y){if(_(N),N.codecs.length===0)return!1;const Z=N.codecs[0];return Y.codecs.some(j=>j.remotePayloadType===Z.payloadType)}function l(N){const Y=new RegExp("^(audio|video)/(.+)","i");if(typeof N!="object")throw new TypeError("codec is not an object");if(!N.mimeType||typeof N.mimeType!="string")throw new TypeError("missing codec.mimeType");const Z=Y.exec(N.mimeType);if(!Z)throw new TypeError("invalid codec.mimeType");if(N.kind=Z[1].toLowerCase(),N.preferredPayloadType&&typeof N.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof N.clockRate!="number")throw new TypeError("missing codec.clockRate");N.kind==="audio"?typeof N.channels!="number"&&(N.channels=1):delete N.channels,(!N.parameters||typeof N.parameters!="object")&&(N.parameters={});for(const j of Object.keys(N.parameters)){let V=N.parameters[j];if(V===void 0&&(N.parameters[j]="",V=""),typeof V!="string"&&typeof V!="number")throw new TypeError(`invalid codec parameter [key:${j}s, value:${V}]`);if(j==="apt"&&typeof V!="number")throw new TypeError("invalid codec apt parameter")}(!N.rtcpFeedback||!Array.isArray(N.rtcpFeedback))&&(N.rtcpFeedback=[]);for(const j of N.rtcpFeedback)f(j)}function f(N){if(typeof N!="object")throw new TypeError("fb is not an object");if(!N.type||typeof N.type!="string")throw new TypeError("missing fb.type");(!N.parameter||typeof N.parameter!="string")&&(N.parameter="")}function u(N){if(typeof N!="object")throw new TypeError("ext is not an object");if(N.kind!=="audio"&&N.kind!=="video")throw new TypeError("invalid ext.kind");if(!N.uri||typeof N.uri!="string")throw new TypeError("missing ext.uri");if(typeof N.preferredId!="number")throw new TypeError("missing ext.preferredId");if(N.preferredEncrypt&&typeof N.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(N.preferredEncrypt||(N.preferredEncrypt=!1),N.direction&&typeof N.direction!="string")throw new TypeError("invalid ext.direction");N.direction||(N.direction="sendrecv")}function p(N){const Y=new RegExp("^(audio|video)/(.+)","i");if(typeof N!="object")throw new TypeError("codec is not an object");if(!N.mimeType||typeof N.mimeType!="string")throw new TypeError("missing codec.mimeType");const Z=Y.exec(N.mimeType);if(!Z)throw new TypeError("invalid codec.mimeType");if(typeof N.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof N.clockRate!="number")throw new TypeError("missing codec.clockRate");Z[1].toLowerCase()==="audio"?typeof N.channels!="number"&&(N.channels=1):delete N.channels,(!N.parameters||typeof N.parameters!="object")&&(N.parameters={});for(const V of Object.keys(N.parameters)){let te=N.parameters[V];if(te===void 0&&(N.parameters[V]="",te=""),typeof te!="string"&&typeof te!="number")throw new TypeError(`invalid codec parameter [key:${V}s, value:${te}]`);if(V==="apt"&&typeof te!="number")throw new TypeError("invalid codec apt parameter")}(!N.rtcpFeedback||!Array.isArray(N.rtcpFeedback))&&(N.rtcpFeedback=[]);for(const V of N.rtcpFeedback)f(V)}function m(N){if(typeof N!="object")throw new TypeError("ext is not an object");if(!N.uri||typeof N.uri!="string")throw new TypeError("missing ext.uri");if(typeof N.id!="number")throw new TypeError("missing ext.id");if(N.encrypt&&typeof N.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");N.encrypt||(N.encrypt=!1),(!N.parameters||typeof N.parameters!="object")&&(N.parameters={});for(const Y of Object.keys(N.parameters)){let Z=N.parameters[Y];if(Z===void 0&&(N.parameters[Y]="",Z=""),typeof Z!="string"&&typeof Z!="number")throw new TypeError("invalid header extension parameter")}}function S(N){if(typeof N!="object")throw new TypeError("encoding is not an object");if(N.ssrc&&typeof N.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(N.rid&&typeof N.rid!="string")throw new TypeError("invalid encoding.rid");if(N.rtx&&typeof N.rtx!="object")throw new TypeError("invalid encoding.rtx");if(N.rtx&&typeof N.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if((!N.dtx||typeof N.dtx!="boolean")&&(N.dtx=!1),N.scalabilityMode&&typeof N.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function b(N){if(typeof N!="object")throw new TypeError("rtcp is not an object");if(N.cname&&typeof N.cname!="string")throw new TypeError("invalid rtcp.cname");(!N.reducedSize||typeof N.reducedSize!="boolean")&&(N.reducedSize=!0)}function M(N){if(typeof N!="object")throw new TypeError("numStreams is not an object");if(typeof N.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof N.MIS!="number")throw new TypeError("missing numStreams.MIS")}function C(N){return N?/.+\/rtx$/i.test(N.mimeType):!1}function O(N,Y,{strict:Z=!1,modify:j=!1}={}){const V=N.mimeType.toLowerCase(),te=Y.mimeType.toLowerCase();if(V!==te||N.clockRate!==Y.clockRate||N.channels!==Y.channels)return!1;switch(V){case"video/h264":{if(Z){const le=N.parameters["packetization-mode"]??0,q=Y.parameters["packetization-mode"]??0;if(le!==q||!r.isSameProfile(N.parameters,Y.parameters))return!1;let W;try{W=r.generateProfileLevelIdStringForAnswer(N.parameters,Y.parameters)}catch{return!1}j&&(W?(N.parameters["profile-level-id"]=W,Y.parameters["profile-level-id"]=W):(delete N.parameters["profile-level-id"],delete Y.parameters["profile-level-id"]))}break}case"video/vp9":{if(Z){const le=N.parameters["profile-id"]??0,q=Y.parameters["profile-id"]??0;if(le!==q)return!1}break}}return!0}function U(N,Y){return!(N.kind&&Y.kind&&N.kind!==Y.kind||N.uri!==Y.uri)}function H(N,Y){const Z=[];for(const j of N.rtcpFeedback??[]){const V=(Y.rtcpFeedback??[]).find(te=>te.type===j.type&&(te.parameter===j.parameter||!te.parameter&&!j.parameter));V&&Z.push(V)}return Z}return Mt}var gs={},nu={},vs={},_s={},Am;function Z0(){if(Am)return _s;Am=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.Logger=void 0;const r=No(),c="awaitqueue";let o=class{constructor(w){z(this,"_debug");z(this,"_warn");z(this,"_error");w?(this._debug=r(`${c}:${w}`),this._warn=r(`${c}:WARN:${w}`),this._error=r(`${c}:ERROR:${w}`)):(this._debug=r(c),this._warn=r(`${c}:WARN`),this._error=r(`${c}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}};return _s.Logger=o,_s}var oa={},Pm;function sv(){if(Pm)return oa;Pm=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.AwaitQueueRemovedTaskError=oa.AwaitQueueStoppedError=void 0;class r extends Error{constructor(s){super(s??"queue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r)}}oa.AwaitQueueStoppedError=r;class c extends Error{constructor(s){super(s??"queue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,c)}}return oa.AwaitQueueRemovedTaskError=c,oa}var Nm;function $0(){if(Nm)return vs;Nm=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.AwaitQueue=void 0;const r=Z0(),c=sv(),o=new r.Logger("AwaitQueue");let s=class{constructor(){z(this,"pendingTasks",new Map);z(this,"nextTaskId",0);z(this,"stopping",!1);o.debug("constructor()")}get size(){return this.pendingTasks.size}async push(y,_){if(_=_??y.name,o.debug(`push() [name:${_}]`),typeof y!="function")throw new TypeError("given task is not a function");if(_)try{Object.defineProperty(y,"name",{value:_})}catch{}return new Promise((T,E)=>{const R={id:this.nextTaskId++,task:y,name:_,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:D=>{if(R.completed)return;R.completed=!0,this.pendingTasks.delete(R.id),o.debug(`resolving task [name:${R.name}]`),T(D);const[v]=this.pendingTasks.values();v&&!v.executedAt&&this.execute(v)},reject:D=>{if(!R.completed&&(R.completed=!0,this.pendingTasks.delete(R.id),o.debug(`rejecting task [name:${R.name}]: %s`,String(D)),E(D),!this.stopping)){const[v]=this.pendingTasks.values();v&&!v.executedAt&&this.execute(v)}}};this.pendingTasks.set(R.id,R),this.pendingTasks.size===1&&this.execute(R)})}stop(){o.debug("stop()"),this.stopping=!0;for(const y of this.pendingTasks.values())o.debug(`stop() | stopping task [name:${y.name}]`),y.reject(new c.AwaitQueueStoppedError);this.stopping=!1}remove(y){o.debug(`remove() [taskIdx:${y}]`);const _=Array.from(this.pendingTasks.values())[y];if(!_){o.debug(`stop() | no task with given idx [taskIdx:${y}]`);return}_.reject(new c.AwaitQueueRemovedTaskError)}dump(){const y=Date.now();let _=0;return Array.from(this.pendingTasks.values()).map(T=>({idx:_++,task:T.task,name:T.name,enqueuedTime:T.executedAt?T.executedAt-T.enqueuedAt:y-T.enqueuedAt,executionTime:T.executedAt?y-T.executedAt:0}))}async execute(y){if(o.debug(`execute() [name:${y.name}]`),y.executedAt)throw new Error("task already being executed");y.executedAt=Date.now();try{const _=await y.task();y.resolve(_)}catch(_){y.reject(_)}}};return vs.AwaitQueue=s,vs}var jm;function J0(){return jm||(jm=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.AwaitQueueRemovedTaskError=r.AwaitQueueStoppedError=r.AwaitQueue=void 0;var c=$0();Object.defineProperty(r,"AwaitQueue",{enumerable:!0,get:function(){return c.AwaitQueue}});var o=sv();Object.defineProperty(r,"AwaitQueueStoppedError",{enumerable:!0,get:function(){return o.AwaitQueueStoppedError}}),Object.defineProperty(r,"AwaitQueueRemovedTaskError",{enumerable:!0,get:function(){return o.AwaitQueueRemovedTaskError}})}(nu)),nu}var ys={},zm;function cv(){if(zm)return ys;zm=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.Producer=void 0;const r=Je(),c=En(),o=Tt(),s=new r.Logger("Producer");let w=class extends c.EnhancedEventEmitter{constructor({id:T,localId:E,rtpSender:R,track:D,rtpParameters:v,stopTracks:L,disableTrackOnPause:k,zeroRtpOnPause:A,appData:g}){super();z(this,"_id");z(this,"_localId");z(this,"_closed",!1);z(this,"_rtpSender");z(this,"_track");z(this,"_kind");z(this,"_rtpParameters");z(this,"_paused");z(this,"_maxSpatialLayer");z(this,"_stopTracks");z(this,"_disableTrackOnPause");z(this,"_zeroRtpOnPause");z(this,"_appData");z(this,"_observer",new c.EnhancedEventEmitter);s.debug("constructor()"),this._id=T,this._localId=E,this._rtpSender=R,this._track=D,this._kind=D.kind,this._rtpParameters=v,this._paused=k?!D.enabled:!1,this._maxSpatialLayer=void 0,this._stopTracks=L,this._disableTrackOnPause=k,this._zeroRtpOnPause=A,this._appData=g??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(T){this._appData=T}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new o.InvalidStateError("closed");return new Promise((T,E)=>{this.safeEmit("@getstats",T,E)})}pause(){if(s.debug("pause()"),this._closed){s.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((T,E)=>{this.safeEmit("@pause",T,E)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(s.debug("resume()"),this._closed){s.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((T,E)=>{this.safeEmit("@resume",T,E)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:T}){if(s.debug("replaceTrack() [track:%o]",T),this._closed){if(T&&this._stopTracks)try{T.stop()}catch{}throw new o.InvalidStateError("closed")}else if(T&&T.readyState==="ended")throw new o.InvalidStateError("track ended");if(T===this._track){s.debug("replaceTrack() | same track, ignored");return}await new Promise((E,R)=>{this.safeEmit("@replacetrack",T,E,R)}),this.destroyTrack(),this._track=T,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(T){if(this._closed)throw new o.InvalidStateError("closed");if(this._kind!=="video")throw new o.UnsupportedError("not a video Producer");if(typeof T!="number")throw new TypeError("invalid spatialLayer");T!==this._maxSpatialLayer&&(await new Promise((E,R)=>{this.safeEmit("@setmaxspatiallayer",T,E,R)}).catch(()=>{}),this._maxSpatialLayer=T)}async setRtpEncodingParameters(T){if(this._closed)throw new o.InvalidStateError("closed");if(typeof T!="object")throw new TypeError("invalid params");await new Promise((E,R)=>{this.safeEmit("@setrtpencodingparameters",T,E,R)})}onTrackEnded(){s.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}};return ys.Producer=w,ys}var bs={},Um;function ov(){if(Um)return bs;Um=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.Consumer=void 0;const r=Je(),c=En(),o=Tt(),s=new r.Logger("Consumer");let w=class extends c.EnhancedEventEmitter{constructor({id:T,localId:E,producerId:R,rtpReceiver:D,track:v,rtpParameters:L,appData:k}){super();z(this,"_id");z(this,"_localId");z(this,"_producerId");z(this,"_closed",!1);z(this,"_rtpReceiver");z(this,"_track");z(this,"_rtpParameters");z(this,"_paused");z(this,"_appData");z(this,"_observer",new c.EnhancedEventEmitter);s.debug("constructor()"),this._id=T,this._localId=E,this._producerId=R,this._rtpReceiver=D,this._track=v,this._rtpParameters=L,this._paused=!v.enabled,this._appData=k??{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(T){this._appData=T}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new o.InvalidStateError("closed");return new Promise((T,E)=>{this.safeEmit("@getstats",T,E)})}pause(){if(s.debug("pause()"),this._closed){s.error("pause() | Consumer closed");return}if(this._paused){s.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(s.debug("resume()"),this._closed){s.error("resume() | Consumer closed");return}if(!this._paused){s.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){s.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}};return bs.Consumer=w,bs}var Ss={},Bm;function lv(){if(Bm)return Ss;Bm=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.DataProducer=void 0;const r=Je(),c=En(),o=Tt(),s=new r.Logger("DataProducer");let w=class extends c.EnhancedEventEmitter{constructor({id:T,dataChannel:E,sctpStreamParameters:R,appData:D}){super();z(this,"_id");z(this,"_dataChannel");z(this,"_closed",!1);z(this,"_sctpStreamParameters");z(this,"_appData");z(this,"_observer",new c.EnhancedEventEmitter);s.debug("constructor()"),this._id=T,this._dataChannel=E,this._sctpStreamParameters=R,this._appData=D??{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(T){this._dataChannel.bufferedAmountLowThreshold=T}get appData(){return this._appData}set appData(T){this._appData=T}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(T){if(s.debug("send()"),this._closed)throw new o.InvalidStateError("closed");this._dataChannel.send(T)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(s.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",T=>{if(this._closed)return;let{error:E}=T;E||(E=new Error("unknown DataChannel error")),E.errorDetail==="sctp-failure"?s.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",E.sctpCauseCode,E.message):s.error('DataChannel "error" event: %o',E),this.safeEmit("error",E)}),this._dataChannel.addEventListener("close",()=>{this._closed||(s.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||s.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}};return Ss.DataProducer=w,Ss}var ws={},qm;function dv(){if(qm)return ws;qm=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.DataConsumer=void 0;const r=Je(),c=En(),o=new r.Logger("DataConsumer");let s=class extends c.EnhancedEventEmitter{constructor({id:_,dataProducerId:T,dataChannel:E,sctpStreamParameters:R,appData:D}){super();z(this,"_id");z(this,"_dataProducerId");z(this,"_dataChannel");z(this,"_closed",!1);z(this,"_sctpStreamParameters");z(this,"_appData");z(this,"_observer",new c.EnhancedEventEmitter);o.debug("constructor()"),this._id=_,this._dataProducerId=T,this._dataChannel=E,this._sctpStreamParameters=R,this._appData=D??{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(_){this._dataChannel.binaryType=_}get appData(){return this._appData}set appData(_){this._appData=_}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(o.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",_=>{if(this._closed)return;let{error:T}=_;T||(T=new Error("unknown DataChannel error")),T.errorDetail==="sctp-failure"?o.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",T.sctpCauseCode,T.message):o.error('DataChannel "error" event: %o',T),this.safeEmit("error",T)}),this._dataChannel.addEventListener("close",()=>{this._closed||(o.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",_=>{this._closed||this.safeEmit("message",_.data)})}};return ws.DataConsumer=s,ws}var Im;function uv(){if(Im)return gs;Im=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.Transport=void 0;const r=J0(),c=Je(),o=En(),s=Tt(),w=rt(),y=Ct(),_=cv(),T=ov(),E=lv(),R=dv(),D=new c.Logger("Transport");class v{constructor(A){z(this,"consumerOptions");z(this,"promise");z(this,"resolve");z(this,"reject");this.consumerOptions=A,this.promise=new Promise((g,h)=>{this.resolve=g,this.reject=h})}}let L=class extends o.EnhancedEventEmitter{constructor({direction:g,id:h,iceParameters:l,iceCandidates:f,dtlsParameters:u,sctpParameters:p,iceServers:m,iceTransportPolicy:S,additionalSettings:b,proprietaryConstraints:M,appData:C,handlerFactory:O,extendedRtpCapabilities:U,canProduceByKind:H}){super();z(this,"_id");z(this,"_closed",!1);z(this,"_direction");z(this,"_extendedRtpCapabilities");z(this,"_canProduceByKind");z(this,"_maxSctpMessageSize");z(this,"_handler");z(this,"_iceGatheringState","new");z(this,"_connectionState","new");z(this,"_appData");z(this,"_producers",new Map);z(this,"_consumers",new Map);z(this,"_dataProducers",new Map);z(this,"_dataConsumers",new Map);z(this,"_probatorConsumerCreated",!1);z(this,"_awaitQueue",new r.AwaitQueue);z(this,"_pendingConsumerTasks",[]);z(this,"_consumerCreationInProgress",!1);z(this,"_pendingPauseConsumers",new Map);z(this,"_consumerPauseInProgress",!1);z(this,"_pendingResumeConsumers",new Map);z(this,"_consumerResumeInProgress",!1);z(this,"_pendingCloseConsumers",new Map);z(this,"_consumerCloseInProgress",!1);z(this,"_observer",new o.EnhancedEventEmitter);D.debug("constructor() [id:%s, direction:%s]",h,g),this._id=h,this._direction=g,this._extendedRtpCapabilities=U,this._canProduceByKind=H,this._maxSctpMessageSize=p?p.maxMessageSize:null;const N=w.clone(b)??{};delete N.iceServers,delete N.iceTransportPolicy,delete N.bundlePolicy,delete N.rtcpMuxPolicy,delete N.sdpSemantics,this._handler=O(),this._handler.run({direction:g,iceParameters:l,iceCandidates:f,dtlsParameters:u,sctpParameters:p,iceServers:m,iceTransportPolicy:S,additionalSettings:N,proprietaryConstraints:M,extendedRtpCapabilities:U}),this._appData=C??{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){if(!this._closed){D.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const g of this._producers.values())g.transportClosed();this._producers.clear();for(const g of this._consumers.values())g.transportClosed();this._consumers.clear();for(const g of this._dataProducers.values())g.transportClosed();this._dataProducers.clear();for(const g of this._dataConsumers.values())g.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new s.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:g}){if(D.debug("restartIce()"),this._closed)throw new s.InvalidStateError("closed");if(!g)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(g),"transport.restartIce()")}async updateIceServers({iceServers:g}={}){if(D.debug("updateIceServers()"),this._closed)throw new s.InvalidStateError("closed");if(!Array.isArray(g))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(g),"transport.updateIceServers()")}async produce({track:g,encodings:h,codecOptions:l,codec:f,stopTracks:u=!0,disableTrackOnPause:p=!0,zeroRtpOnPause:m=!1,onRtpSender:S,appData:b={}}={}){if(D.debug("produce() [track:%o]",g),this._closed)throw new s.InvalidStateError("closed");if(g){if(this._direction!=="send")throw new s.UnsupportedError("not a sending Transport");if(this._canProduceByKind[g.kind]){if(g.readyState==="ended")throw new s.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(b&&typeof b!="object")throw new TypeError("if given, appData must be an object")}else throw new s.UnsupportedError(`cannot produce ${g.kind}`)}else throw new TypeError("missing track");return this._awaitQueue.push(async()=>{let M;if(h&&!Array.isArray(h))throw TypeError("encodings must be an array");h&&h.length===0?M=void 0:h&&(M=h.map(H=>{const N={active:!0};return H.active===!1&&(N.active=!1),typeof H.dtx=="boolean"&&(N.dtx=H.dtx),typeof H.scalabilityMode=="string"&&(N.scalabilityMode=H.scalabilityMode),typeof H.scaleResolutionDownBy=="number"&&(N.scaleResolutionDownBy=H.scaleResolutionDownBy),typeof H.maxBitrate=="number"&&(N.maxBitrate=H.maxBitrate),typeof H.maxFramerate=="number"&&(N.maxFramerate=H.maxFramerate),typeof H.adaptivePtime=="boolean"&&(N.adaptivePtime=H.adaptivePtime),typeof H.priority=="string"&&(N.priority=H.priority),typeof H.networkPriority=="string"&&(N.networkPriority=H.networkPriority),N}));const{localId:C,rtpParameters:O,rtpSender:U}=await this._handler.send({track:g,encodings:M,codecOptions:l,codec:f,onRtpSender:S});try{y.validateRtpParameters(O);const{id:H}=await new Promise((Y,Z)=>{this.safeEmit("produce",{kind:g.kind,rtpParameters:O,appData:b},Y,Z)}),N=new _.Producer({id:H,localId:C,rtpSender:U,track:g,rtpParameters:O,stopTracks:u,disableTrackOnPause:p,zeroRtpOnPause:m,appData:b});return this._producers.set(N.id,N),this.handleProducer(N),this._observer.safeEmit("newproducer",N),N}catch(H){throw this._handler.stopSending(C).catch(()=>{}),H}},"transport.produce()").catch(M=>{if(u)try{g.stop()}catch{}throw M})}async consume({id:g,producerId:h,kind:l,rtpParameters:f,streamId:u,onRtpReceiver:p,appData:m={}}){if(D.debug("consume()"),this._closed)throw new s.InvalidStateError("closed");if(this._direction!=="recv")throw new s.UnsupportedError("not a receiving Transport");if(typeof g!="string")throw new TypeError("missing id");if(typeof h!="string")throw new TypeError("missing producerId");if(l!=="audio"&&l!=="video")throw new TypeError(`invalid kind '${l}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(m&&typeof m!="object")throw new TypeError("if given, appData must be an object");const S=w.clone(f);if(!y.canReceive(S,this._extendedRtpCapabilities))throw new s.UnsupportedError("cannot consume this Producer");const M=new v({id:g,producerId:h,kind:l,rtpParameters:S,streamId:u,onRtpReceiver:p,appData:m});return this._pendingConsumerTasks.push(M),queueMicrotask(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),M.promise}async produceData({ordered:g=!0,maxPacketLifeTime:h,maxRetransmits:l,label:f="",protocol:u="",appData:p={}}={}){if(D.debug("produceData()"),this._closed)throw new s.InvalidStateError("closed");if(this._direction!=="send")throw new s.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(p&&typeof p!="object")throw new TypeError("if given, appData must be an object")}else throw new s.UnsupportedError("SCTP not enabled by remote Transport");return(h||l)&&(g=!1),this._awaitQueue.push(async()=>{const{dataChannel:m,sctpStreamParameters:S}=await this._handler.sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:l,label:f,protocol:u});y.validateSctpStreamParameters(S);const{id:b}=await new Promise((C,O)=>{this.safeEmit("producedata",{sctpStreamParameters:S,label:f,protocol:u,appData:p},C,O)}),M=new E.DataProducer({id:b,dataChannel:m,sctpStreamParameters:S,appData:p});return this._dataProducers.set(M.id,M),this.handleDataProducer(M),this._observer.safeEmit("newdataproducer",M),M},"transport.produceData()")}async consumeData({id:g,dataProducerId:h,sctpStreamParameters:l,label:f="",protocol:u="",appData:p={}}){if(D.debug("consumeData()"),this._closed)throw new s.InvalidStateError("closed");if(this._direction!=="recv")throw new s.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if(typeof g!="string")throw new TypeError("missing id");if(typeof h!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(p&&typeof p!="object")throw new TypeError("if given, appData must be an object")}else throw new s.UnsupportedError("SCTP not enabled by remote Transport");const m=w.clone(l);return y.validateSctpStreamParameters(m),this._awaitQueue.push(async()=>{const{dataChannel:S}=await this._handler.receiveDataChannel({sctpStreamParameters:m,label:f,protocol:u}),b=new R.DataConsumer({id:g,dataProducerId:h,dataChannel:S,sctpStreamParameters:m,appData:p});return this._dataConsumers.set(b.id,b),this.handleDataConsumer(b),this._observer.safeEmit("newdataconsumer",b),b},"transport.consumeData()")}createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0){D.debug("createPendingConsumers() | there is no Consumer to be created");return}const g=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let h;const l=[];for(const f of g){const{id:u,kind:p,rtpParameters:m,streamId:S,onRtpReceiver:b}=f.consumerOptions;l.push({trackId:u,kind:p,rtpParameters:m,streamId:S,onRtpReceiver:b})}try{const f=await this._handler.receive(l);for(let u=0;u<f.length;++u){const p=g[u],m=f[u],{id:S,producerId:b,kind:M,rtpParameters:C,appData:O}=p.consumerOptions,{localId:U,rtpReceiver:H,track:N}=m,Y=new T.Consumer({id:S,localId:U,producerId:b,rtpReceiver:H,track:N,rtpParameters:C,appData:O});this._consumers.set(Y.id,Y),this.handleConsumer(Y),!this._probatorConsumerCreated&&!h&&M==="video"&&(h=Y),this._observer.safeEmit("newconsumer",Y),p.resolve(Y)}}catch(f){for(const u of g)u.reject(f)}if(h)try{const f=y.generateProbatorRtpParameters(h.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:f}]),D.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(f){D.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",f)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0){D.debug("pausePendingConsumers() | there is no Consumer to be paused");return}const g=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const h=g.map(l=>l.localId);await this._handler.pauseReceiving(h)}catch(h){D.error("pausePendingConsumers() | failed to pause Consumers:",h)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0){D.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}const g=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const h=g.map(l=>l.localId);await this._handler.resumeReceiving(h)}catch(h){D.error("resumePendingConsumers() | failed to resume Consumers:",h)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0){D.debug("closePendingConsumers() | there is no Consumer to be closed");return}const g=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(g.map(h=>h.localId))}catch(h){D.error("closePendingConsumers() | failed to close Consumers:",h)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const g=this._handler;g.on("@connect",({dtlsParameters:h},l,f)=>{if(this._closed){f(new s.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:h},l,f)}),g.on("@icegatheringstatechange",h=>{h!==this._iceGatheringState&&(D.debug("ICE gathering state changed to %s",h),this._iceGatheringState=h,this._closed||this.safeEmit("icegatheringstatechange",h))}),g.on("@icecandidateerror",h=>{D.warn(`ICE candidate error [url:${h.url}, localAddress:${h.address}, localPort:${h.port}]: ${h.errorCode} "${h.errorText}"`),this.safeEmit("icecandidateerror",h)}),g.on("@connectionstatechange",h=>{h!==this._connectionState&&(D.debug("connection state changed to %s",h),this._connectionState=h,this._closed||this.safeEmit("connectionstatechange",h))})}handleProducer(g){g.on("@close",()=>{this._producers.delete(g.id),!this._closed&&this._awaitQueue.push(async()=>await this._handler.stopSending(g.localId),"producer @close event").catch(h=>D.warn("producer.close() failed:%o",h))}),g.on("@pause",(h,l)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(g.localId),"producer @pause event").then(h).catch(l)}),g.on("@resume",(h,l)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(g.localId),"producer @resume event").then(h).catch(l)}),g.on("@replacetrack",(h,l,f)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(g.localId,h),"producer @replacetrack event").then(l).catch(f)}),g.on("@setmaxspatiallayer",(h,l,f)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(g.localId,h),"producer @setmaxspatiallayer event").then(l).catch(f)}),g.on("@setrtpencodingparameters",(h,l,f)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(g.localId,h),"producer @setrtpencodingparameters event").then(l).catch(f)}),g.on("@getstats",(h,l)=>{if(this._closed)return l(new s.InvalidStateError("closed"));this._handler.getSenderStats(g.localId).then(h).catch(l)})}handleConsumer(g){g.on("@close",()=>{this._consumers.delete(g.id),this._pendingPauseConsumers.delete(g.id),this._pendingResumeConsumers.delete(g.id),!this._closed&&(this._pendingCloseConsumers.set(g.id,g),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),g.on("@pause",()=>{this._pendingResumeConsumers.has(g.id)&&this._pendingResumeConsumers.delete(g.id),this._pendingPauseConsumers.set(g.id,g),queueMicrotask(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),g.on("@resume",()=>{this._pendingPauseConsumers.has(g.id)&&this._pendingPauseConsumers.delete(g.id),this._pendingResumeConsumers.set(g.id,g),queueMicrotask(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),g.on("@getstats",(h,l)=>{if(this._closed)return l(new s.InvalidStateError("closed"));this._handler.getReceiverStats(g.localId).then(h).catch(l)})}handleDataProducer(g){g.on("@close",()=>{this._dataProducers.delete(g.id)})}handleDataConsumer(g){g.on("@close",()=>{this._dataConsumers.delete(g.id)})}};return gs.Transport=L,gs}var Rs={},pi={},au={},ru={exports:{}},Hm;function Eu(){if(Hm)return ru.exports;Hm=1;var r=ru.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(c){return c.encoding?"rtpmap:%d %s/%s/%s":c.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(c){return c.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(c){return c.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(c){return"extmap:%d"+(c.direction?"/%s":"%v")+(c["encrypt-uri"]?" %s":"%v")+" %s"+(c.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(c){return c.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(c){var o="candidate:%s %d %s %d %s %d typ %s";return o+=c.raddr!=null?" raddr %s rport %d":"%v%v",o+=c.tcptype!=null?" tcptype %s":"%v",c.generation!=null&&(o+=" generation %d"),o+=c["network-id"]!=null?" network-id %d":"%v",o+=c["network-cost"]!=null?" network-cost %d":"%v",o}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(c){var o="ssrc:%d";return c.attribute!=null&&(o+=" %s",c.value!=null&&(o+=":%s")),o}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(c){return c.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(c){return c.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(c){return"imageattr:%s %s %s"+(c.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(c){return"simulcast:%s %s"+(c.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(c){return"ts-refclk:%s"+(c.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(c){var o="mediaclk:";return o+=c.id!=null?"id=%s %s":"%v%s",o+=c.mediaClockValue!=null?"=%s":"",o+=c.rateNumerator!=null?" rate=%s":"",o+=c.rateDenominator!=null?"/%s":"",o}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(r).forEach(function(c){var o=r[c];o.forEach(function(s){s.reg||(s.reg=/(.*)/),s.format||(s.format="%s")})}),ru.exports}var Vm;function W0(){return Vm||(Vm=1,function(r){var c=function(T){return String(Number(T))===T?Number(T):T},o=function(T,E,R,D){if(D&&!R)E[D]=c(T[1]);else for(var v=0;v<R.length;v+=1)T[v+1]!=null&&(E[R[v]]=c(T[v+1]))},s=function(T,E,R){var D=T.name&&T.names;T.push&&!E[T.push]?E[T.push]=[]:D&&!E[T.name]&&(E[T.name]={});var v=T.push?{}:D?E[T.name]:E;o(R.match(T.reg),v,T.names,T.name),T.push&&E[T.push].push(v)},w=Eu(),y=RegExp.prototype.test.bind(/^([a-z])=(.*)/);r.parse=function(T){var E={},R=[],D=E;return T.split(/(\r\n|\r|\n)/).filter(y).forEach(function(v){var L=v[0],k=v.slice(2);L==="m"&&(R.push({rtp:[],fmtp:[]}),D=R[R.length-1]);for(var A=0;A<(w[L]||[]).length;A+=1){var g=w[L][A];if(g.reg.test(k))return s(g,D,k)}}),E.media=R,E};var _=function(T,E){var R=E.split(/=(.+)/,2);return R.length===2?T[R[0]]=c(R[1]):R.length===1&&E.length>1&&(T[R[0]]=void 0),T};r.parseParams=function(T){return T.split(/;\s?/).reduce(_,{})},r.parseFmtpConfig=r.parseParams,r.parsePayloads=function(T){return T.toString().split(" ").map(Number)},r.parseRemoteCandidates=function(T){for(var E=[],R=T.split(" ").map(c),D=0;D<R.length;D+=3)E.push({component:R[D],ip:R[D+1],port:R[D+2]});return E},r.parseImageAttributes=function(T){return T.split(" ").map(function(E){return E.substring(1,E.length-1).split(",").reduce(_,{})})},r.parseSimulcastStreamList=function(T){return T.split(";").map(function(E){return E.split(",").map(function(R){var D,v=!1;return R[0]!=="~"?D=c(R):(D=c(R.substring(1,R.length)),v=!0),{scid:D,paused:v}})})}}(au)),au}var su,Gm;function eb(){if(Gm)return su;Gm=1;var r=Eu(),c=/%[sdv%]/g,o=function(_){var T=1,E=arguments,R=E.length;return _.replace(c,function(D){if(T>=R)return D;var v=E[T];switch(T+=1,D){case"%%":return"%";case"%s":return String(v);case"%d":return Number(v);case"%v":return""}})},s=function(_,T,E){var R=T.format instanceof Function?T.format(T.push?E:E[T.name]):T.format,D=[_+"="+R];if(T.names)for(var v=0;v<T.names.length;v+=1){var L=T.names[v];T.name?D.push(E[T.name][L]):D.push(E[T.names[v]])}else D.push(E[T.name]);return o.apply(null,D)},w=["v","o","s","i","u","e","p","c","b","t","r","z","a"],y=["i","c","b","a"];return su=function(_,T){T=T||{},_.version==null&&(_.version=0),_.name==null&&(_.name=" "),_.media.forEach(function(v){v.payloads==null&&(v.payloads="")});var E=T.outerOrder||w,R=T.innerOrder||y,D=[];return E.forEach(function(v){r[v].forEach(function(L){L.name in _&&_[L.name]!=null?D.push(s(v,L,_)):L.push in _&&_[L.push]!=null&&_[L.push].forEach(function(k){D.push(s(v,L,k))})})}),_.media.forEach(function(v){D.push(s("m",r.m[0],v)),R.forEach(function(L){r[L].forEach(function(k){k.name in v&&v[k.name]!=null?D.push(s(L,k,v)):k.push in v&&v[k.push]!=null&&v[k.push].forEach(function(A){D.push(s(L,k,A))})})})}),D.join(`\r
`)+`\r
`},su}var Ym;function zt(){if(Ym)return pi;Ym=1;var r=W0(),c=eb(),o=Eu();return pi.grammar=o,pi.write=c,pi.parse=r.parse,pi.parseParams=r.parseParams,pi.parseFmtpConfig=r.parseFmtpConfig,pi.parsePayloads=r.parsePayloads,pi.parseRemoteCandidates=r.parseRemoteCandidates,pi.parseImageAttributes=r.parseImageAttributes,pi.parseSimulcastStreamList=r.parseSimulcastStreamList,pi}var la={},Qm;function mi(){if(Qm)return la;Qm=1,Object.defineProperty(la,"__esModule",{value:!0}),la.extractRtpCapabilities=c,la.extractDtlsParameters=o,la.getCname=s,la.applyCodecParameters=w;const r=zt();function c({sdpObject:y}){const _=new Map,T=[];let E=!1,R=!1;for(const v of y.media){const L=v.type;switch(L){case"audio":{if(E)continue;E=!0;break}case"video":{if(R)continue;R=!0;break}default:continue}for(const k of v.rtp){const A={kind:L,mimeType:`${L}/${k.codec}`,preferredPayloadType:k.payload,clockRate:k.rate,channels:k.encoding,parameters:{},rtcpFeedback:[]};_.set(A.preferredPayloadType,A)}for(const k of v.fmtp??[]){const A=r.parseParams(k.config),g=_.get(k.payload);g&&(A!=null&&A.hasOwnProperty("profile-level-id")&&(A["profile-level-id"]=String(A["profile-level-id"])),g.parameters=A)}for(const k of v.rtcpFb??[]){const A={type:k.type,parameter:k.subtype};if(A.parameter||delete A.parameter,k.payload!=="*"){const g=_.get(k.payload);if(!g)continue;g.rtcpFeedback.push(A)}else for(const g of _.values())g.kind===L&&!/.+\/rtx$/i.test(g.mimeType)&&g.rtcpFeedback.push(A)}for(const k of v.ext??[]){if(k["encrypt-uri"])continue;const A={kind:L,uri:k.uri,preferredId:k.value};T.push(A)}}return{codecs:Array.from(_.values()),headerExtensions:T}}function o({sdpObject:y}){let _=y.setup,T=y.fingerprint;if(!_||!T){const D=(y.media??[]).find(v=>v.port!==0);D&&(_??(_=D.setup),T??(T=D.fingerprint))}if(_){if(!T)throw new Error("no a=fingerprint found at SDP session or media level")}else throw new Error("no a=setup found at SDP session or media level");let E;switch(_){case"active":{E="client";break}case"passive":{E="server";break}case"actpass":{E="auto";break}}return{role:E,fingerprints:[{algorithm:T.type,value:T.hash}]}}function s({offerMediaObject:y}){const _=(y.ssrcs??[]).find(T=>T.attribute==="cname");return _?_.value:""}function w({offerRtpParameters:y,answerMediaObject:_}){for(const T of y.codecs){const E=T.mimeType.toLowerCase();if(E!=="audio/opus"||!(_.rtp??[]).find(L=>L.payload===T.payloadType))continue;_.fmtp=_.fmtp??[];let D=_.fmtp.find(L=>L.payload===T.payloadType);D||(D={payload:T.payloadType,config:""},_.fmtp.push(D));const v=r.parseParams(D.config);switch(E){case"audio/opus":{const L=T.parameters["sprop-stereo"];L!==void 0&&(v.stereo=Number(L)?1:0);break}}D.config="";for(const L of Object.keys(v))D.config&&(D.config+=";"),D.config+=`${L}=${v[L]}`}}return la}var Ts={},Fm;function fa(){if(Fm)return Ts;Fm=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.getRtpEncodings=r,Ts.addLegacySimulcast=c;function r({offerMediaObject:o}){const s=new Set;for(const _ of o.ssrcs??[]){const T=_.id;s.add(T)}if(s.size===0)throw new Error("no a=ssrc lines found");const w=new Map;for(const _ of o.ssrcGroups??[]){if(_.semantics!=="FID")continue;let[T,E]=_.ssrcs.split(/\s+/);T=Number(T),E=Number(E),s.has(T)&&(s.delete(T),s.delete(E),w.set(T,E))}for(const _ of s)w.set(_,null);const y=[];for(const[_,T]of w){const E={ssrc:_};T&&(E.rtx={ssrc:T}),y.push(E)}return y}function c({offerMediaObject:o,numStreams:s}){if(s<=1)throw new TypeError("numStreams must be greater than 1");const w=(o.ssrcs??[]).find(k=>k.attribute==="msid");if(!w)throw new Error("a=ssrc line with msid information not found");const[y,_]=w.value.split(" "),T=Number(w.id);let E;(o.ssrcGroups??[]).some(k=>{if(k.semantics!=="FID")return!1;const A=k.ssrcs.split(/\s+/);return Number(A[0])===T?(E=Number(A[1]),!0):!1});const R=o.ssrcs.find(k=>k.attribute==="cname");if(!R)throw new Error("a=ssrc line with cname information not found");const D=R.value,v=[],L=[];for(let k=0;k<s;++k)v.push(T+k),E&&L.push(E+k);o.ssrcGroups=[],o.ssrcs=[],o.ssrcGroups.push({semantics:"SIM",ssrcs:v.join(" ")});for(const k of v)o.ssrcs.push({id:k,attribute:"cname",value:D}),o.ssrcs.push({id:k,attribute:"msid",value:`${y} ${_}`});for(let k=0;k<L.length;++k){const A=v[k],g=L[k];o.ssrcs.push({id:g,attribute:"cname",value:D}),o.ssrcs.push({id:g,attribute:"msid",value:`${y} ${_}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${A} ${g}`})}}return Ts}var so={},Km;function jo(){if(Km)return so;Km=1,Object.defineProperty(so,"__esModule",{value:!0}),so.addNackSupportForOpus=r;function r(c){var o;for(const s of c.codecs??[])(s.mimeType.toLowerCase()==="audio/opus"||s.mimeType.toLowerCase()==="audio/multiopus")&&!((o=s.rtcpFeedback)!=null&&o.some(w=>w.type==="nack"&&!w.parameter))&&(s.rtcpFeedback||(s.rtcpFeedback=[]),s.rtcpFeedback.push({type:"nack"}))}return so}var Cs={},Xm;function Ut(){if(Xm)return Cs;Xm=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.HandlerInterface=void 0;const r=En();let c=class extends r.EnhancedEventEmitter{constructor(){super()}};return Cs.HandlerInterface=c,Cs}var Es={},Gi={},Zm;function tb(){if(Zm)return Gi;Zm=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.OfferMediaSection=Gi.AnswerMediaSection=Gi.MediaSection=void 0;const r=zt(),c=rt();let o=class{constructor({iceParameters:T,iceCandidates:E,dtlsParameters:R,planB:D=!1}){z(this,"_mediaObject");z(this,"_planB");if(this._mediaObject={},this._planB=D,T&&this.setIceParameters(T),E){this._mediaObject.candidates=[];for(const v of E){const L={};L.component=1,L.foundation=v.foundation,L.ip=v.address??v.ip,L.port=v.port,L.priority=v.priority,L.transport=v.protocol,L.type=v.type,v.tcpType&&(L.tcptype=v.tcpType),this._mediaObject.candidates.push(L)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}R&&this.setDtlsRole(R.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(T){this._mediaObject.iceUfrag=T.usernameFragment,this._mediaObject.icePwd=T.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}};Gi.MediaSection=o;class s extends o{constructor({iceParameters:T,iceCandidates:E,dtlsParameters:R,sctpParameters:D,plainRtpParameters:v,planB:L=!1,offerMediaObject:k,offerRtpParameters:A,answerRtpParameters:g,codecOptions:h}){switch(super({iceParameters:T,iceCandidates:E,dtlsParameters:R,planB:L}),this._mediaObject.mid=String(k.mid),this._mediaObject.type=k.type,this._mediaObject.protocol=k.protocol,v?(this._mediaObject.connection={ip:v.ip,version:v.ipVersion},this._mediaObject.port=v.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),k.type){case"audio":case"video":{this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const l of g.codecs){const f={payload:l.payloadType,codec:y(l),rate:l.clockRate};l.channels>1&&(f.encoding=l.channels),this._mediaObject.rtp.push(f);const u=c.clone(l.parameters)??{};let p=c.clone(l.rtcpFeedback)??[];if(h){const{opusStereo:S,opusFec:b,opusDtx:M,opusMaxPlaybackRate:C,opusMaxAverageBitrate:O,opusPtime:U,opusNack:H,videoGoogleStartBitrate:N,videoGoogleMaxBitrate:Y,videoGoogleMinBitrate:Z}=h,j=A.codecs.find(V=>V.payloadType===l.payloadType);switch(l.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":{S!==void 0&&(j.parameters["sprop-stereo"]=S?1:0,u.stereo=S?1:0),b!==void 0&&(j.parameters.useinbandfec=b?1:0,u.useinbandfec=b?1:0),M!==void 0&&(j.parameters.usedtx=M?1:0,u.usedtx=M?1:0),C!==void 0&&(u.maxplaybackrate=C),O!==void 0&&(u.maxaveragebitrate=O),U!==void 0&&(j.parameters.ptime=U,u.ptime=U),H||(j.rtcpFeedback=j.rtcpFeedback.filter(V=>V.type!=="nack"||V.parameter),p=p.filter(V=>V.type!=="nack"||V.parameter));break}case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":{N!==void 0&&(u["x-google-start-bitrate"]=N),Y!==void 0&&(u["x-google-max-bitrate"]=Y),Z!==void 0&&(u["x-google-min-bitrate"]=Z);break}}}const m={payload:l.payloadType,config:""};for(const S of Object.keys(u))m.config&&(m.config+=";"),m.config+=`${S}=${u[S]}`;m.config&&this._mediaObject.fmtp.push(m);for(const S of p)this._mediaObject.rtcpFb.push({payload:l.payloadType,type:S.type,subtype:S.parameter})}this._mediaObject.payloads=g.codecs.map(l=>l.payloadType).join(" "),this._mediaObject.ext=[];for(const l of g.headerExtensions)(k.ext??[]).some(u=>u.uri===l.uri)&&this._mediaObject.ext.push({uri:l.uri,value:l.id});if(k.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),k.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:k.simulcast.list1},this._mediaObject.rids=[];for(const l of k.rids??[])l.direction==="send"&&this._mediaObject.rids.push({id:l.id,direction:"recv"})}else if(k.simulcast_03){this._mediaObject.simulcast_03={value:k.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const l of k.rids??[])l.direction==="send"&&this._mediaObject.rids.push({id:l.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break}case"application":{typeof k.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=D.port,this._mediaObject.maxMessageSize=D.maxMessageSize):k.sctpmap&&(this._mediaObject.payloads=D.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:D.port,maxMessageSize:D.maxMessageSize});break}}}setDtlsRole(T){switch(T){case"client":{this._mediaObject.setup="active";break}case"server":{this._mediaObject.setup="passive";break}case"auto":{this._mediaObject.setup="actpass";break}}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(T){var v,L;if(!((v=this._mediaObject.simulcast)!=null&&v.list1))return;const E={};for(const k of T)k.rid&&(E[k.rid]=k);const R=this._mediaObject.simulcast.list1,D=r.parseSimulcastStreamList(R);for(const k of D)for(const A of k)A.paused=!((L=E[A.scid])!=null&&L.active);this._mediaObject.simulcast.list1=D.map(k=>k.map(A=>`${A.paused?"~":""}${A.scid}`).join(",")).join(";")}}Gi.AnswerMediaSection=s;class w extends o{constructor({iceParameters:T,iceCandidates:E,dtlsParameters:R,sctpParameters:D,plainRtpParameters:v,planB:L=!1,mid:k,kind:A,offerRtpParameters:g,streamId:h,trackId:l,oldDataChannelSpec:f=!1}){var u;switch(super({iceParameters:T,iceCandidates:E,dtlsParameters:R,planB:L}),this._mediaObject.mid=String(k),this._mediaObject.type=A,v?(this._mediaObject.connection={ip:v.ip,version:v.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=v.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},D?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),this._mediaObject.extmapAllowMixed="extmap-allow-mixed",A){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${h??"-"} ${l}`);for(const b of g.codecs){const M={payload:b.payloadType,codec:y(b),rate:b.clockRate};b.channels>1&&(M.encoding=b.channels),this._mediaObject.rtp.push(M);const C={payload:b.payloadType,config:""};for(const O of Object.keys(b.parameters))C.config&&(C.config+=";"),C.config+=`${O}=${b.parameters[O]}`;C.config&&this._mediaObject.fmtp.push(C);for(const O of b.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:b.payloadType,type:O.type,subtype:O.parameter})}this._mediaObject.payloads=g.codecs.map(b=>b.payloadType).join(" "),this._mediaObject.ext=[];for(const b of g.headerExtensions)this._mediaObject.ext.push({uri:b.uri,value:b.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const p=g.encodings[0],m=p.ssrc,S=(u=p.rtx)==null?void 0:u.ssrc;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],g.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:g.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:m,attribute:"msid",value:`${h??"-"} ${l}`}),S&&(g.rtcp.cname&&this._mediaObject.ssrcs.push({id:S,attribute:"cname",value:g.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:S,attribute:"msid",value:`${h??"-"} ${l}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${m} ${S}`}));break}case"application":{f?(this._mediaObject.payloads=D.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:D.port,maxMessageSize:D.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=D.port,this._mediaObject.maxMessageSize=D.maxMessageSize);break}}}setDtlsRole(T){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:T,streamId:E,trackId:R}){var A;const D=T.encodings[0],v=D.ssrc,L=(A=D.rtx)==null?void 0:A.ssrc,k=this._mediaObject.payloads.split(" ");for(const g of T.codecs){if(k.includes(String(g.payloadType)))continue;const h={payload:g.payloadType,codec:y(g),rate:g.clockRate};g.channels>1&&(h.encoding=g.channels),this._mediaObject.rtp.push(h);const l={payload:g.payloadType,config:""};for(const f of Object.keys(g.parameters))l.config&&(l.config+=";"),l.config+=`${f}=${g.parameters[f]}`;l.config&&this._mediaObject.fmtp.push(l);for(const f of g.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:g.payloadType,type:f.type,subtype:f.parameter})}this._mediaObject.payloads+=` ${T.codecs.filter(g=>!this._mediaObject.payloads.includes(g.payloadType)).map(g=>g.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),T.rtcp.cname&&this._mediaObject.ssrcs.push({id:v,attribute:"cname",value:T.rtcp.cname}),this._mediaObject.ssrcs.push({id:v,attribute:"msid",value:`${E??"-"} ${R}`}),L&&(T.rtcp.cname&&this._mediaObject.ssrcs.push({id:L,attribute:"cname",value:T.rtcp.cname}),this._mediaObject.ssrcs.push({id:L,attribute:"msid",value:`${E??"-"} ${R}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${v} ${L}`}))}planBStopReceiving({offerRtpParameters:T}){var v;const E=T.encodings[0],R=E.ssrc,D=(v=E.rtx)==null?void 0:v.ssrc;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(L=>L.id!==R&&L.id!==D),D&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(L=>L.ssrcs!==`${R} ${D}`))}}Gi.OfferMediaSection=w;function y(_){const E=new RegExp("^(audio|video)/(.+)","i").exec(_.mimeType);if(!E)throw new TypeError("invalid codec.mimeType");return E[2]}return Gi}var $m;function gi(){if($m)return Es;$m=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.RemoteSdp=void 0;const r=zt(),c=Je(),o=tb(),s=new c.Logger("RemoteSdp");let w=class{constructor({iceParameters:_,iceCandidates:T,dtlsParameters:E,sctpParameters:R,plainRtpParameters:D,planB:v=!1}){z(this,"_iceParameters");z(this,"_iceCandidates");z(this,"_dtlsParameters");z(this,"_sctpParameters");z(this,"_plainRtpParameters");z(this,"_planB");z(this,"_mediaSections",[]);z(this,"_midToIndex",new Map);z(this,"_firstMid");z(this,"_sdpObject");if(this._iceParameters=_,this._iceCandidates=T,this._dtlsParameters=E,this._sctpParameters=R,this._plainRtpParameters=D,this._planB=v,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},_!=null&&_.iceLite&&(this._sdpObject.icelite="ice-lite"),E){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const L=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:E.fingerprints[L-1].algorithm,hash:E.fingerprints[L-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}D&&(this._sdpObject.origin.address=D.ip,this._sdpObject.origin.ipVer=D.ipVersion)}updateIceParameters(_){s.debug("updateIceParameters() [iceParameters:%o]",_),this._iceParameters=_,this._sdpObject.icelite=_.iceLite?"ice-lite":void 0;for(const T of this._mediaSections)T.setIceParameters(_)}updateDtlsRole(_){s.debug("updateDtlsRole() [role:%s]",_),this._dtlsParameters.role=_;for(const T of this._mediaSections)T.setDtlsRole(_)}setSessionExtmapAllowMixed(){s.debug("setSessionExtmapAllowMixed()"),this._sdpObject.extmapAllowMixed="extmap-allow-mixed"}getNextMediaSectionIdx(){for(let _=0;_<this._mediaSections.length;++_){const T=this._mediaSections[_];if(T.closed)return{idx:_,reuseMid:T.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:_,reuseMid:T,offerRtpParameters:E,answerRtpParameters:R,codecOptions:D}){const v=new o.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:_,offerRtpParameters:E,answerRtpParameters:R,codecOptions:D});T?this._replaceMediaSection(v,T):this._midToIndex.has(v.mid)?this._replaceMediaSection(v):this._addMediaSection(v)}receive({mid:_,kind:T,offerRtpParameters:E,streamId:R,trackId:D}){const v=this._midToIndex.get(_);let L;if(v!==void 0&&(L=this._mediaSections[v]),this.setSessionExtmapAllowMixed(),L)L.planBReceive({offerRtpParameters:E,streamId:R,trackId:D}),this._replaceMediaSection(L);else{L=new o.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:_,kind:T,offerRtpParameters:E,streamId:R,trackId:D});const k=this._mediaSections.find(A=>A.closed);k?this._replaceMediaSection(L,k.mid):this._addMediaSection(L)}}pauseMediaSection(_){this._findMediaSection(_).pause()}resumeSendingMediaSection(_){this._findMediaSection(_).resume()}resumeReceivingMediaSection(_){this._findMediaSection(_).resume()}disableMediaSection(_){this._findMediaSection(_).disable()}closeMediaSection(_){const T=this._findMediaSection(_);return _===this._firstMid?(s.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",_),this.disableMediaSection(_),!1):(T.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(_,T){const E=this._findMediaSection(_);E.muxSimulcastStreams(T),this._replaceMediaSection(E)}planBStopReceiving({mid:_,offerRtpParameters:T}){const E=this._findMediaSection(_);E.planBStopReceiving({offerRtpParameters:T}),this._replaceMediaSection(E)}sendSctpAssociation({offerMediaObject:_}){const T=new o.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:_});this._addMediaSection(T)}receiveSctpAssociation({oldDataChannelSpec:_=!1}={}){const T=new o.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:_});this._addMediaSection(T)}getSdp(){return this._sdpObject.origin.sessionVersion++,r.write(this._sdpObject)}_addMediaSection(_){this._firstMid||(this._firstMid=_.mid),this._mediaSections.push(_),this._midToIndex.set(_.mid,this._mediaSections.length-1),this._sdpObject.media.push(_.getObject()),this._regenerateBundleMids()}_replaceMediaSection(_,T){if(typeof T=="string"){const E=this._midToIndex.get(T);if(E===void 0)throw new Error(`no media section found for reuseMid '${T}'`);const R=this._mediaSections[E];this._mediaSections[E]=_,this._midToIndex.delete(R.mid),this._midToIndex.set(_.mid,E),this._sdpObject.media[E]=_.getObject(),this._regenerateBundleMids()}else{const E=this._midToIndex.get(_.mid);if(E===void 0)throw new Error(`no media section found with mid '${_.mid}'`);this._mediaSections[E]=_,this._sdpObject.media[E]=_.getObject()}}_findMediaSection(_){const T=this._midToIndex.get(_);if(T===void 0)throw new Error(`no media section found with mid '${_}'`);return this._mediaSections[T]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(_=>!_.closed).map(_=>_.mid).join(" "))}};return Es.RemoteSdp=w,Es}var co={},Jm;function Dn(){if(Jm)return co;Jm=1,Object.defineProperty(co,"__esModule",{value:!0}),co.parse=c;const r=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function c(o){const s=r.exec(o??"");return s?{spatialLayers:Number(s[1]),temporalLayers:Number(s[2])}:{spatialLayers:1,temporalLayers:1}}return co}var Wm;function ib(){if(Wm)return Rs;Wm=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.Chrome111=void 0;const r=zt(),c=Je(),o=rt(),s=Ct(),w=mi(),y=fa(),_=jo(),T=Tt(),E=Ut(),R=gi(),D=Dn(),v=new c.Logger("Chrome111"),L="Chrome111",k={OS:1024,MIS:1024};let A=class fv extends E.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new fv}get name(){return L}close(){if(v.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const l=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{l.addTransceiver("audio"),l.addTransceiver("video");const f=await l.createOffer();try{l.close()}catch{}const u=r.parse(f.sdp),p=w.extractRtpCapabilities({sdpObject:u});return _.addNackSupportForOpus(p),p}catch(f){try{l.close()}catch{}throw f}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:l,iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m,iceServers:S,iceTransportPolicy:b,additionalSettings:M,proprietaryConstraints:C,extendedRtpCapabilities:O}){this.assertNotClosed(),v.debug("run()"),this._direction=l,this._remoteSdp=new R.RemoteSdp({iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",O),video:s.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",O),video:s.getSendingRemoteRtpParameters("video",O)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:S??[],iceTransportPolicy:b??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...M},C),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",U=>{this.emit("@icecandidateerror",U)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(l){this.assertNotClosed(),v.debug("updateIceServers()");const f=this._pc.getConfiguration();f.iceServers=l,this._pc.setConfiguration(f)}async restartIce(l){if(this.assertNotClosed(),v.debug("restartIce()"),this._remoteSdp.updateIceParameters(l),!!this._transportReady)if(this._direction==="send"){const f=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:l,encodings:f,codecOptions:u,codec:p,onRtpSender:m}){if(this.assertNotClosed(),this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",l.kind,l.id),f&&f.length>1){let Z=1;for(const j of f){const V=j.scalabilityMode?(0,D.parse)(j.scalabilityMode).temporalLayers:3;V>Z&&(Z=V)}f.forEach((j,V)=>{j.rid=`r${V}`,j.scalabilityMode=`L1T${Z}`})}const S=o.clone(this._sendingRtpParametersByKind[l.kind]);S.codecs=s.reduceCodecs(S.codecs,p);const b=o.clone(this._sendingRemoteRtpParametersByKind[l.kind]);b.codecs=s.reduceCodecs(b.codecs,p);const M=this._remoteSdp.getNextMediaSectionIdx(),C=this._pc.addTransceiver(l,{direction:"sendonly",streams:[this._sendStream],sendEncodings:f});m&&m(C.sender);const O=await this._pc.createOffer();let U=r.parse(O.sdp);U.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const H=C.mid;S.mid=H,U=r.parse(this._pc.localDescription.sdp);const N=U.media[M.idx];if(S.rtcp.cname=w.getCname({offerMediaObject:N}),!f)S.encodings=y.getRtpEncodings({offerMediaObject:N});else if(f.length===1){const Z=y.getRtpEncodings({offerMediaObject:N});Object.assign(Z[0],f[0]),S.encodings=Z}else S.encodings=f;this._remoteSdp.send({offerMediaObject:N,reuseMid:M.reuseMid,offerRtpParameters:S,answerRtpParameters:b,codecOptions:u});const Y={type:"answer",sdp:this._remoteSdp.getSdp()};return v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Y),await this._pc.setRemoteDescription(Y),this._mapMidTransceiver.set(H,C),{localId:H,rtpParameters:S,rtpSender:C.sender}}async stopSending(l){if(this.assertSendDirection(),v.debug("stopSending() [localId:%s]",l),this._closed)return;const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");if(f.sender.replaceTrack(null),this._pc.removeTrack(f.sender),this._remoteSdp.closeMediaSection(f.mid))try{f.stop()}catch{}const p=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(l)}async pauseSending(l){this.assertNotClosed(),this.assertSendDirection(),v.debug("pauseSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(l);const u=await this._pc.createOffer();v.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(l){this.assertNotClosed(),this.assertSendDirection(),v.debug("resumeSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(this._remoteSdp.resumeSendingMediaSection(l),!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="sendonly";const u=await this._pc.createOffer();v.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(l,f){this.assertNotClosed(),this.assertSendDirection(),f?v.debug("replaceTrack() [localId:%s, track.id:%s]",l,f.id):v.debug("replaceTrack() [localId:%s, no track]",l);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(f)}async setMaxSpatialLayer(l,f){this.assertNotClosed(),this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",l,f);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((b,M)=>{M<=f?b.active=!0:b.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(l,p.encodings);const m=await this._pc.createOffer();v.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const S={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async setRtpEncodingParameters(l,f){this.assertNotClosed(),this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",l,f);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((b,M)=>{p.encodings[M]={...b,...f}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(l,p.encodings);const m=await this._pc.createOffer();v.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const S={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async getSenderStats(l){this.assertNotClosed(),this.assertSendDirection();const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.sender.getStats()}async sendDataChannel({ordered:l,maxPacketLifeTime:f,maxRetransmits:u,label:p,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const S={negotiated:!0,id:this._nextSendSctpStreamId,ordered:l,maxPacketLifeTime:f,maxRetransmits:u,protocol:m};v.debug("sendDataChannel() [options:%o]",S);const b=this._pc.createDataChannel(p,S);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const C=await this._pc.createOffer(),O=r.parse(C.sdp),U=O.media.find(N=>N.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const H={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._hasDataChannelMediaSection=!0}const M={streamId:S.id,ordered:S.ordered,maxPacketLifeTime:S.maxPacketLifeTime,maxRetransmits:S.maxRetransmits};return{dataChannel:b,sctpStreamParameters:M}}async receive(l){this.assertNotClosed(),this.assertRecvDirection();const f=[],u=new Map;for(const b of l){const{trackId:M,kind:C,rtpParameters:O,streamId:U}=b;v.debug("receive() [trackId:%s, kind:%s]",M,C);const H=O.mid??String(this._mapMidTransceiver.size);u.set(M,H),this._remoteSdp.receive({mid:H,kind:C,offerRtpParameters:O,streamId:U??O.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const b of l){const{trackId:M,onRtpReceiver:C}=b;if(C){const O=u.get(M),U=this._pc.getTransceivers().find(H=>H.mid===O);if(!U)throw new Error("transceiver not found");C(U.receiver)}}let m=await this._pc.createAnswer();const S=r.parse(m.sdp);for(const b of l){const{trackId:M,rtpParameters:C}=b,O=u.get(M),U=S.media.find(H=>String(H.mid)===O);w.applyCodecParameters({offerRtpParameters:C,answerMediaObject:U})}m={type:"answer",sdp:r.write(S)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:S}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const b of l){const{trackId:M}=b,C=u.get(M),O=this._pc.getTransceivers().find(U=>U.mid===C);if(O)this._mapMidTransceiver.set(C,O),f.push({localId:C,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return f}async stopReceiving(l){if(this.assertRecvDirection(),this._closed)return;for(const p of l){v.debug("stopReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of l)this._mapMidTransceiver.delete(p)}async pauseReceiving(l){this.assertNotClosed(),this.assertRecvDirection();for(const p of l){v.debug("pauseReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(l){this.assertNotClosed(),this.assertRecvDirection();for(const p of l){v.debug("resumeReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(l){this.assertNotClosed(),this.assertRecvDirection();const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:l,label:f,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:m,maxPacketLifeTime:S,maxRetransmits:b}=l,M={negotiated:!0,id:p,ordered:m,maxPacketLifeTime:S,maxRetransmits:b,protocol:u};v.debug("receiveDataChannel() [options:%o]",M);const C=this._pc.createDataChannel(f,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const U=await this._pc.createAnswer();if(!this._transportReady){const H=r.parse(U.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setLocalDescription(U),this._hasDataChannelMediaSection=!0}return{dataChannel:C}}async setupTransport({localDtlsRole:l,localSdpObject:f}){f||(f=r.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:f});u.role=l,this._remoteSdp.updateDtlsRole(l==="client"?"server":"client"),await new Promise((p,m)=>{this.safeEmit("@connect",{dtlsParameters:u},p,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Rs.Chrome111=A,Rs}var Ds={},eg;function nb(){if(eg)return Ds;eg=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.Chrome74=void 0;const r=zt(),c=Je(),o=rt(),s=Ct(),w=mi(),y=fa(),_=jo(),T=Tt(),E=Ut(),R=gi(),D=Dn(),v=new c.Logger("Chrome74"),L="Chrome74",k={OS:1024,MIS:1024};let A=class pv extends E.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new pv}get name(){return L}close(){if(v.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const l=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{l.addTransceiver("audio"),l.addTransceiver("video");const f=await l.createOffer();try{l.close()}catch{}const u=r.parse(f.sdp),p=w.extractRtpCapabilities({sdpObject:u});return _.addNackSupportForOpus(p),p}catch(f){try{l.close()}catch{}throw f}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:l,iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m,iceServers:S,iceTransportPolicy:b,additionalSettings:M,proprietaryConstraints:C,extendedRtpCapabilities:O}){v.debug("run()"),this._direction=l,this._remoteSdp=new R.RemoteSdp({iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",O),video:s.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",O),video:s.getSendingRemoteRtpParameters("video",O)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:S??[],iceTransportPolicy:b??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...M},C),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",U=>{this.emit("@icecandidateerror",U)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}))}async updateIceServers(l){this.assertNotClosed(),v.debug("updateIceServers()");const f=this._pc.getConfiguration();f.iceServers=l,this._pc.setConfiguration(f)}async restartIce(l){if(this.assertNotClosed(),v.debug("restartIce()"),this._remoteSdp.updateIceParameters(l),!!this._transportReady)if(this._direction==="send"){const f=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:l,encodings:f,codecOptions:u,codec:p}){this.assertNotClosed(),this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",l.kind,l.id),f&&f.length>1&&f.forEach((j,V)=>{j.rid=`r${V}`});const m=o.clone(this._sendingRtpParametersByKind[l.kind]);m.codecs=s.reduceCodecs(m.codecs,p);const S=o.clone(this._sendingRemoteRtpParametersByKind[l.kind]);S.codecs=s.reduceCodecs(S.codecs,p);const b=this._remoteSdp.getNextMediaSectionIdx(),M=this._pc.addTransceiver(l,{direction:"sendonly",streams:[this._sendStream],sendEncodings:f});let C=await this._pc.createOffer(),O=r.parse(C.sdp);O.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let U;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O});let H=!1;const N=(0,D.parse)((f??[{}])[0].scalabilityMode);f&&f.length===1&&N.spatialLayers>1&&m.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(v.debug("send() | enabling legacy simulcast for VP9 SVC"),H=!0,O=r.parse(C.sdp),U=O.media[b.idx],y.addLegacySimulcast({offerMediaObject:U,numStreams:N.spatialLayers}),C={type:"offer",sdp:r.write(O)}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C);const Y=M.mid;if(m.mid=Y,O=r.parse(this._pc.localDescription.sdp),U=O.media[b.idx],m.rtcp.cname=w.getCname({offerMediaObject:U}),!f)m.encodings=y.getRtpEncodings({offerMediaObject:U});else if(f.length===1){let j=y.getRtpEncodings({offerMediaObject:U});Object.assign(j[0],f[0]),H&&(j=[j[0]]),m.encodings=j}else m.encodings=f;if(m.encodings.length>1&&(m.codecs[0].mimeType.toLowerCase()==="video/vp8"||m.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const j of m.encodings)j.scalabilityMode?j.scalabilityMode=`L1T${N.temporalLayers}`:j.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:U,reuseMid:b.reuseMid,offerRtpParameters:m,answerRtpParameters:S,codecOptions:u});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};return v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._mapMidTransceiver.set(Y,M),{localId:Y,rtpParameters:m,rtpSender:M.sender}}async stopSending(l){if(this.assertSendDirection(),v.debug("stopSending() [localId:%s]",l),this._closed)return;const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");if(f.sender.replaceTrack(null),this._pc.removeTrack(f.sender),this._remoteSdp.closeMediaSection(f.mid))try{f.stop()}catch{}const p=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(l)}async pauseSending(l){this.assertNotClosed(),this.assertSendDirection(),v.debug("pauseSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(l);const u=await this._pc.createOffer();v.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(l){this.assertNotClosed(),this.assertSendDirection(),v.debug("resumeSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(this._remoteSdp.resumeSendingMediaSection(l),!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="sendonly";const u=await this._pc.createOffer();v.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(l,f){this.assertNotClosed(),this.assertSendDirection(),f?v.debug("replaceTrack() [localId:%s, track.id:%s]",l,f.id):v.debug("replaceTrack() [localId:%s, no track]",l);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(f)}async setMaxSpatialLayer(l,f){this.assertNotClosed(),this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",l,f);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((b,M)=>{M<=f?b.active=!0:b.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(l,p.encodings);const m=await this._pc.createOffer();v.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const S={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async setRtpEncodingParameters(l,f){this.assertNotClosed(),this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",l,f);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((b,M)=>{p.encodings[M]={...b,...f}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(l,p.encodings);const m=await this._pc.createOffer();v.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const S={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async getSenderStats(l){this.assertNotClosed(),this.assertSendDirection();const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.sender.getStats()}async sendDataChannel({ordered:l,maxPacketLifeTime:f,maxRetransmits:u,label:p,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const S={negotiated:!0,id:this._nextSendSctpStreamId,ordered:l,maxPacketLifeTime:f,maxRetransmits:u,protocol:m};v.debug("sendDataChannel() [options:%o]",S);const b=this._pc.createDataChannel(p,S);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const C=await this._pc.createOffer(),O=r.parse(C.sdp),U=O.media.find(N=>N.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const H={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._hasDataChannelMediaSection=!0}const M={streamId:S.id,ordered:S.ordered,maxPacketLifeTime:S.maxPacketLifeTime,maxRetransmits:S.maxRetransmits};return{dataChannel:b,sctpStreamParameters:M}}async receive(l){this.assertNotClosed(),this.assertRecvDirection();const f=[],u=new Map;for(const b of l){const{trackId:M,kind:C,rtpParameters:O,streamId:U}=b;v.debug("receive() [trackId:%s, kind:%s]",M,C);const H=O.mid??String(this._mapMidTransceiver.size);u.set(M,H),this._remoteSdp.receive({mid:H,kind:C,offerRtpParameters:O,streamId:U??O.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let m=await this._pc.createAnswer();const S=r.parse(m.sdp);for(const b of l){const{trackId:M,rtpParameters:C}=b,O=u.get(M),U=S.media.find(H=>String(H.mid)===O);w.applyCodecParameters({offerRtpParameters:C,answerMediaObject:U})}m={type:"answer",sdp:r.write(S)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:S}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const b of l){const{trackId:M}=b,C=u.get(M),O=this._pc.getTransceivers().find(U=>U.mid===C);if(O)this._mapMidTransceiver.set(C,O),f.push({localId:C,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return f}async stopReceiving(l){if(this.assertRecvDirection(),this._closed)return;for(const p of l){v.debug("stopReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of l)this._mapMidTransceiver.delete(p)}async pauseReceiving(l){this.assertNotClosed(),this.assertRecvDirection();for(const p of l){v.debug("pauseReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(l){this.assertNotClosed(),this.assertRecvDirection();for(const p of l){v.debug("resumeReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(l){this.assertNotClosed(),this.assertRecvDirection();const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:l,label:f,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:m,maxPacketLifeTime:S,maxRetransmits:b}=l,M={negotiated:!0,id:p,ordered:m,maxPacketLifeTime:S,maxRetransmits:b,protocol:u};v.debug("receiveDataChannel() [options:%o]",M);const C=this._pc.createDataChannel(f,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const U=await this._pc.createAnswer();if(!this._transportReady){const H=r.parse(U.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setLocalDescription(U),this._hasDataChannelMediaSection=!0}return{dataChannel:C}}async setupTransport({localDtlsRole:l,localSdpObject:f}){f||(f=r.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:f});u.role=l,this._remoteSdp.updateDtlsRole(l==="client"?"server":"client"),await new Promise((p,m)=>{this.safeEmit("@connect",{dtlsParameters:u},p,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ds.Chrome74=A,Ds}var xs={},tg;function ab(){if(tg)return xs;tg=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.Chrome70=void 0;const r=zt(),c=Je(),o=rt(),s=Ct(),w=mi(),y=fa(),_=Ut(),T=gi(),E=Dn(),R=new c.Logger("Chrome70"),D="Chrome70",v={OS:1024,MIS:1024};let L=class hv extends _.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new hv}get name(){return D}close(){if(R.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{g.addTransceiver("audio"),g.addTransceiver("video");const h=await g.createOffer();try{g.close()}catch{}const l=r.parse(h.sdp);return w.extractRtpCapabilities({sdpObject:l})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:g,iceParameters:h,iceCandidates:l,dtlsParameters:f,sctpParameters:u,iceServers:p,iceTransportPolicy:m,additionalSettings:S,proprietaryConstraints:b,extendedRtpCapabilities:M}){R.debug("run()"),this._direction=g,this._remoteSdp=new T.RemoteSdp({iceParameters:h,iceCandidates:l,dtlsParameters:f,sctpParameters:u}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",M),video:s.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",M),video:s.getSendingRemoteRtpParameters("video",M)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:m??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...S},b),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",C=>{this.emit("@icecandidateerror",C)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){R.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(R.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:l,codec:f}){this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",g.kind,g.id);const u=o.clone(this._sendingRtpParametersByKind[g.kind]);u.codecs=s.reduceCodecs(u.codecs,f);const p=o.clone(this._sendingRemoteRtpParametersByKind[g.kind]);p.codecs=s.reduceCodecs(p.codecs,f);const m=this._remoteSdp.getNextMediaSectionIdx(),S=this._pc.addTransceiver(g,{direction:"sendonly",streams:[this._sendStream]});let b=await this._pc.createOffer(),M=r.parse(b.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let C;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),h&&h.length>1&&(R.debug("send() | enabling legacy simulcast"),M=r.parse(b.sdp),C=M.media[m.idx],y.addLegacySimulcast({offerMediaObject:C,numStreams:h.length}),b={type:"offer",sdp:r.write(M)});let O=!1;const U=(0,E.parse)((h??[{}])[0].scalabilityMode);if(h&&h.length===1&&U.spatialLayers>1&&u.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(R.debug("send() | enabling legacy simulcast for VP9 SVC"),O=!0,M=r.parse(b.sdp),C=M.media[m.idx],y.addLegacySimulcast({offerMediaObject:C,numStreams:U.spatialLayers}),b={type:"offer",sdp:r.write(M)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b),h){R.debug("send() | applying given encodings");const Y=S.sender.getParameters();for(let Z=0;Z<(Y.encodings??[]).length;++Z){const j=Y.encodings[Z],V=h[Z];if(!V)break;Y.encodings[Z]=Object.assign(j,V)}await S.sender.setParameters(Y)}const H=S.mid;if(u.mid=H,M=r.parse(this._pc.localDescription.sdp),C=M.media[m.idx],u.rtcp.cname=w.getCname({offerMediaObject:C}),u.encodings=y.getRtpEncodings({offerMediaObject:C}),h)for(let Y=0;Y<u.encodings.length;++Y)h[Y]&&Object.assign(u.encodings[Y],h[Y]);if(O&&(u.encodings=[u.encodings[0]]),u.encodings.length>1&&(u.codecs[0].mimeType.toLowerCase()==="video/vp8"||u.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Y of u.encodings)Y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:C,reuseMid:m.reuseMid,offerRtpParameters:u,answerRtpParameters:p,codecOptions:l});const N={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N),this._mapMidTransceiver.set(H,S),{localId:H,rtpParameters:u,rtpSender:S.sender}}async stopSending(g){this.assertSendDirection(),R.debug("stopSending() [localId:%s]",g);const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");if(h.sender.replaceTrack(null),this._pc.removeTrack(h.sender),this._remoteSdp.closeMediaSection(h.mid))try{h.stop()}catch{}const f=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(g)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){this.assertSendDirection(),h?R.debug("replaceTrack() [localId:%s, track.id:%s]",g,h.id):R.debug("replaceTrack() [localId:%s, no track]",g);const l=this._mapMidTransceiver.get(g);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(h)}async setMaxSpatialLayer(g,h){this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",g,h);const l=this._mapMidTransceiver.get(g);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((m,S)=>{S<=h?m.active=!0:m.active=!1}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(g,f.encodings);const u=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async setRtpEncodingParameters(g,h){this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",g,h);const l=this._mapMidTransceiver.get(g);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((m,S)=>{f.encodings[S]={...m,...h}}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(g,f.encodings);const u=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async getSenderStats(g){this.assertSendDirection();const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.sender.getStats()}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:l,label:f,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:l,protocol:u};R.debug("sendDataChannel() [options:%o]",p);const m=this._pc.createDataChannel(f,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const b=await this._pc.createOffer(),M=r.parse(b.sdp),C=M.media.find(U=>U.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b),this._remoteSdp.sendSctpAssociation({offerMediaObject:C});const O={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const S={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:m,sctpStreamParameters:S}}async receive(g){this.assertRecvDirection();const h=[],l=new Map;for(const m of g){const{trackId:S,kind:b,rtpParameters:M,streamId:C}=m;R.debug("receive() [trackId:%s, kind:%s]",S,b);const O=M.mid??String(this._mapMidTransceiver.size);l.set(S,O),this._remoteSdp.receive({mid:O,kind:b,offerRtpParameters:M,streamId:C??M.rtcp.cname,trackId:S})}const f={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);let u=await this._pc.createAnswer();const p=r.parse(u.sdp);for(const m of g){const{trackId:S,rtpParameters:b}=m,M=l.get(S),C=p.media.find(O=>String(O.mid)===M);w.applyCodecParameters({offerRtpParameters:b,answerMediaObject:C})}u={type:"answer",sdp:r.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const m of g){const{trackId:S}=m,b=l.get(S),M=this._pc.getTransceivers().find(C=>C.mid===b);if(!M)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(b,M),h.push({localId:b,track:M.receiver.track,rtpReceiver:M.receiver})}return h}async stopReceiving(g){this.assertRecvDirection();for(const f of g){R.debug("stopReceiving() [localId:%s]",f);const u=this._mapMidTransceiver.get(f);if(!u)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(u.mid)}const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const f of g)this._mapMidTransceiver.delete(f)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){this.assertRecvDirection();const h=this._mapMidTransceiver.get(g);if(!h)throw new Error("associated RTCRtpTransceiver not found");return h.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:l}){this.assertRecvDirection();const{streamId:f,ordered:u,maxPacketLifeTime:p,maxRetransmits:m}=g,S={negotiated:!0,id:f,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:m,protocol:l};R.debug("receiveDataChannel() [options:%o]",S);const b=this._pc.createDataChannel(h,S);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const M={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const C=await this._pc.createAnswer();if(!this._transportReady){const O=r.parse(C.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setLocalDescription(C),this._hasDataChannelMediaSection=!0}return{dataChannel:b}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=r.parse(this._pc.localDescription.sdp));const l=w.extractDtlsParameters({sdpObject:h});l.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((f,u)=>{this.safeEmit("@connect",{dtlsParameters:l},f,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return xs.Chrome70=L,xs}var Ms={},Ls={},ig;function zo(){if(ig)return Ls;ig=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.getRtpEncodings=r,Ls.addLegacySimulcast=c;function r({offerMediaObject:o,track:s}){const w=new Set;for(const T of o.ssrcs??[]){if(T.attribute!=="msid")continue;if(T.value.split(" ")[1]===s.id){const R=T.id;w.add(R)}}if(w.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${s.id}]`);const y=new Map;for(const T of o.ssrcGroups??[]){if(T.semantics!=="FID")continue;let[E,R]=T.ssrcs.split(/\s+/);E=Number(E),R=Number(R),w.has(E)&&(w.delete(E),w.delete(R),y.set(E,R))}for(const T of w)y.set(T,null);const _=[];for(const[T,E]of y){const R={ssrc:T};E&&(R.rtx={ssrc:E}),_.push(R)}return _}function c({offerMediaObject:o,track:s,numStreams:w}){if(w<=1)throw new TypeError("numStreams must be greater than 1");let y,_,T;if(!(o.ssrcs??[]).find(k=>k.attribute!=="msid"?!1:k.value.split(" ")[1]===s.id?(y=k.id,T=k.value.split(" ")[0],!0):!1))throw new Error(`a=ssrc line with msid information not found [track.id:${s.id}]`);(o.ssrcGroups??[]).some(k=>{if(k.semantics!=="FID")return!1;const A=k.ssrcs.split(/\s+/);return Number(A[0])===y?(_=Number(A[1]),!0):!1});const R=o.ssrcs.find(k=>k.attribute==="cname"&&k.id===y);if(!R)throw new Error(`a=ssrc line with cname information not found [track.id:${s.id}]`);const D=R.value,v=[],L=[];for(let k=0;k<w;++k)v.push(y+k),_&&L.push(_+k);o.ssrcGroups=o.ssrcGroups??[],o.ssrcs=o.ssrcs??[],o.ssrcGroups.push({semantics:"SIM",ssrcs:v.join(" ")});for(const k of v)o.ssrcs.push({id:k,attribute:"cname",value:D}),o.ssrcs.push({id:k,attribute:"msid",value:`${T} ${s.id}`});for(let k=0;k<L.length;++k){const A=v[k],g=L[k];o.ssrcs.push({id:g,attribute:"cname",value:D}),o.ssrcs.push({id:g,attribute:"msid",value:`${T} ${s.id}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${A} ${g}`})}}return Ls}var ng;function rb(){if(ng)return Ms;ng=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.Chrome67=void 0;const r=zt(),c=Je(),o=rt(),s=Ct(),w=mi(),y=zo(),_=Ut(),T=gi(),E=new c.Logger("Chrome67"),R="Chrome67",D={OS:1024,MIS:1024};let v=class mv extends _.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_sendStream",new MediaStream);z(this,"_mapSendLocalIdRtpSender",new Map);z(this,"_nextSendLocalId",0);z(this,"_mapRecvLocalIdInfo",new Map);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new mv}get name(){return R}close(){if(E.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const A=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const g=await A.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{A.close()}catch{}const h=r.parse(g.sdp);return w.extractRtpCapabilities({sdpObject:h})}catch(g){try{A.close()}catch{}throw g}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:D}}run({direction:A,iceParameters:g,iceCandidates:h,dtlsParameters:l,sctpParameters:f,iceServers:u,iceTransportPolicy:p,additionalSettings:m,proprietaryConstraints:S,extendedRtpCapabilities:b}){E.debug("run()"),this._direction=A,this._remoteSdp=new T.RemoteSdp({iceParameters:g,iceCandidates:h,dtlsParameters:l,sctpParameters:f,planB:!0}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",b),video:s.getSendingRtpParameters("video",b)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",b),video:s.getSendingRemoteRtpParameters("video",b)},l.role&&l.role!=="auto"&&(this._forcedLocalDtlsRole=l.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:u??[],iceTransportPolicy:p??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...m},S),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",M=>{this.emit("@icecandidateerror",M)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(A){E.debug("updateIceServers()");const g=this._pc.getConfiguration();g.iceServers=A,this._pc.setConfiguration(g)}async restartIce(A){if(E.debug("restartIce()"),this._remoteSdp.updateIceParameters(A),!!this._transportReady)if(this._direction==="send"){const g=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const h={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const g={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:A,encodings:g,codecOptions:h,codec:l}){this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",A.kind,A.id),l&&E.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(A),this._pc.addTrack(A,this._sendStream);let f=await this._pc.createOffer(),u=r.parse(f.sdp);u.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let p;const m=o.clone(this._sendingRtpParametersByKind[A.kind]);m.codecs=s.reduceCodecs(m.codecs);const S=o.clone(this._sendingRemoteRtpParametersByKind[A.kind]);if(S.codecs=s.reduceCodecs(S.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),A.kind==="video"&&g&&g.length>1&&(E.debug("send() | enabling simulcast"),u=r.parse(f.sdp),p=u.media.find(O=>O.type==="video"),y.addLegacySimulcast({offerMediaObject:p,track:A,numStreams:g.length}),f={type:"offer",sdp:r.write(u)}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),u=r.parse(this._pc.localDescription.sdp),p=u.media.find(O=>O.type===A.kind),m.rtcp.cname=w.getCname({offerMediaObject:p}),m.encodings=y.getRtpEncodings({offerMediaObject:p,track:A}),g)for(let O=0;O<m.encodings.length;++O)g[O]&&Object.assign(m.encodings[O],g[O]);if(m.encodings.length>1&&m.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of m.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:m,answerRtpParameters:S,codecOptions:h});const b={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b);const M=String(this._nextSendLocalId);this._nextSendLocalId++;const C=this._pc.getSenders().find(O=>O.track===A);return this._mapSendLocalIdRtpSender.set(M,C),{localId:M,rtpParameters:m,rtpSender:C}}async stopSending(A){this.assertSendDirection(),E.debug("stopSending() [localId:%s]",A);const g=this._mapSendLocalIdRtpSender.get(A);if(!g)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(g),g.track&&this._sendStream.removeTrack(g.track),this._mapSendLocalIdRtpSender.delete(A);const h=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(f){if(this._sendStream.getTracks().length===0){E.warn("stopSending() | ignoring expected error due no sending tracks: %s",f.toString());return}throw f}if(this._pc.signalingState==="stable")return;const l={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async pauseSending(A){}async resumeSending(A){}async replaceTrack(A,g){this.assertSendDirection(),g?E.debug("replaceTrack() [localId:%s, track.id:%s]",A,g.id):E.debug("replaceTrack() [localId:%s, no track]",A);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const l=h.track;await h.replaceTrack(g),l&&this._sendStream.removeTrack(l),g&&this._sendStream.addTrack(g)}async setMaxSpatialLayer(A,g){this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",A,g);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const l=h.getParameters();l.encodings.forEach((f,u)=>{u<=g?f.active=!0:f.active=!1}),await h.setParameters(l)}async setRtpEncodingParameters(A,g){this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",A,g);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const l=h.getParameters();l.encodings.forEach((f,u)=>{l.encodings[u]={...f,...g}}),await h.setParameters(l)}async getSenderStats(A){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(A);if(!g)throw new Error("associated RTCRtpSender not found");return g.getStats()}async sendDataChannel({ordered:A,maxPacketLifeTime:g,maxRetransmits:h,label:l,protocol:f}){this.assertSendDirection();const u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:A,maxPacketLifeTime:g,maxRetransmitTime:g,maxRetransmits:h,protocol:f};E.debug("sendDataChannel() [options:%o]",u);const p=this._pc.createDataChannel(l,u);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%D.MIS,!this._hasDataChannelMediaSection){const S=await this._pc.createOffer(),b=r.parse(S.sdp),M=b.media.find(O=>O.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:b}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const C={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C),this._hasDataChannelMediaSection=!0}const m={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits};return{dataChannel:p,sctpStreamParameters:m}}async receive(A){this.assertRecvDirection();const g=[];for(const u of A){const{trackId:p,kind:m,rtpParameters:S,streamId:b}=u;E.debug("receive() [trackId:%s, kind:%s]",p,m);const M=m;this._remoteSdp.receive({mid:M,kind:m,offerRtpParameters:S,streamId:b??S.rtcp.cname,trackId:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);let l=await this._pc.createAnswer();const f=r.parse(l.sdp);for(const u of A){const{kind:p,rtpParameters:m}=u,S=p,b=f.media.find(M=>String(M.mid)===S);w.applyCodecParameters({offerRtpParameters:m,answerMediaObject:b})}l={type:"answer",sdp:r.write(f)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const u of A){const{kind:p,trackId:m,rtpParameters:S}=u,b=m,M=p,C=this._pc.getReceivers().find(O=>O.track&&O.track.id===b);if(!C)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(b,{mid:M,rtpParameters:S,rtpReceiver:C}),g.push({localId:b,track:C.track,rtpReceiver:C})}return g}async stopReceiving(A){this.assertRecvDirection();for(const l of A){E.debug("stopReceiving() [localId:%s]",l);const{mid:f,rtpParameters:u}=this._mapRecvLocalIdInfo.get(l)??{};this._mapRecvLocalIdInfo.delete(l),this._remoteSdp.planBStopReceiving({mid:f,offerRtpParameters:u})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async pauseReceiving(A){}async resumeReceiving(A){}async getReceiverStats(A){this.assertRecvDirection();const{rtpReceiver:g}=this._mapRecvLocalIdInfo.get(A)??{};if(!g)throw new Error("associated RTCRtpReceiver not found");return g.getStats()}async receiveDataChannel({sctpStreamParameters:A,label:g,protocol:h}){this.assertRecvDirection();const{streamId:l,ordered:f,maxPacketLifeTime:u,maxRetransmits:p}=A,m={negotiated:!0,id:l,ordered:f,maxPacketLifeTime:u,maxRetransmitTime:u,maxRetransmits:p,protocol:h};E.debug("receiveDataChannel() [options:%o]",m);const S=this._pc.createDataChannel(g,m);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const b={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const M=await this._pc.createAnswer();if(!this._transportReady){const C=r.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:C})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:S}}async setupTransport({localDtlsRole:A,localSdpObject:g}){g||(g=r.parse(this._pc.localDescription.sdp));const h=w.extractDtlsParameters({sdpObject:g});h.role=A,this._remoteSdp.updateDtlsRole(A==="client"?"server":"client"),await new Promise((l,f)=>{this.safeEmit("@connect",{dtlsParameters:h},l,f)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ms.Chrome67=v,Ms}var Os={},ag;function sb(){if(ag)return Os;ag=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.Chrome55=void 0;const r=zt(),c=Je(),o=Tt(),s=rt(),w=Ct(),y=mi(),_=zo(),T=Ut(),E=gi(),R=new c.Logger("Chrome55"),D="Chrome55",v={OS:1024,MIS:1024};let L=class gv extends T.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_sendStream",new MediaStream);z(this,"_mapSendLocalIdTrack",new Map);z(this,"_nextSendLocalId",0);z(this,"_mapRecvLocalIdInfo",new Map);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new gv}get name(){return D}close(){if(R.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const h=await g.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{g.close()}catch{}const l=r.parse(h.sdp);return y.extractRtpCapabilities({sdpObject:l})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:g,iceParameters:h,iceCandidates:l,dtlsParameters:f,sctpParameters:u,iceServers:p,iceTransportPolicy:m,additionalSettings:S,proprietaryConstraints:b,extendedRtpCapabilities:M}){R.debug("run()"),this._direction=g,this._remoteSdp=new E.RemoteSdp({iceParameters:h,iceCandidates:l,dtlsParameters:f,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",M),video:w.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",M),video:w.getSendingRemoteRtpParameters("video",M)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:m??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...S},b),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",C=>{this.emit("@icecandidateerror",C)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){R.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(R.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:l,codec:f}){this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",g.kind,g.id),f&&R.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(g),this._pc.addStream(this._sendStream);let u=await this._pc.createOffer(),p=r.parse(u.sdp);p.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let m;const S=s.clone(this._sendingRtpParametersByKind[g.kind]);S.codecs=w.reduceCodecs(S.codecs);const b=s.clone(this._sendingRemoteRtpParametersByKind[g.kind]);if(b.codecs=w.reduceCodecs(b.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),g.kind==="video"&&h&&h.length>1&&(R.debug("send() | enabling simulcast"),p=r.parse(u.sdp),m=p.media.find(O=>O.type==="video"),_.addLegacySimulcast({offerMediaObject:m,track:g,numStreams:h.length}),u={type:"offer",sdp:r.write(p)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),p=r.parse(this._pc.localDescription.sdp),m=p.media.find(O=>O.type===g.kind),S.rtcp.cname=y.getCname({offerMediaObject:m}),S.encodings=_.getRtpEncodings({offerMediaObject:m,track:g}),h)for(let O=0;O<S.encodings.length;++O)h[O]&&Object.assign(S.encodings[O],h[O]);if(S.encodings.length>1&&S.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of S.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,offerRtpParameters:S,answerRtpParameters:b,codecOptions:l});const M={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M);const C=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(C,g),{localId:C,rtpParameters:S}}async stopSending(g){this.assertSendDirection(),R.debug("stopSending() [localId:%s]",g);const h=this._mapSendLocalIdTrack.get(g);if(!h)throw new Error("track not found");this._mapSendLocalIdTrack.delete(g),this._sendStream.removeTrack(h),this._pc.addStream(this._sendStream);const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l);try{await this._pc.setLocalDescription(l)}catch(u){if(this._sendStream.getTracks().length===0){R.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());return}throw u}if(this._pc.signalingState==="stable")return;const f={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){throw new o.UnsupportedError("not implemented")}async setMaxSpatialLayer(g,h){throw new o.UnsupportedError(" not implemented")}async setRtpEncodingParameters(g,h){throw new o.UnsupportedError("not supported")}async getSenderStats(g){throw new o.UnsupportedError("not implemented")}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:l,label:f,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:l,protocol:u};R.debug("sendDataChannel() [options:%o]",p);const m=this._pc.createDataChannel(f,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const b=await this._pc.createOffer(),M=r.parse(b.sdp),C=M.media.find(U=>U.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b),this._remoteSdp.sendSctpAssociation({offerMediaObject:C});const O={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const S={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:m,sctpStreamParameters:S}}async receive(g){this.assertRecvDirection();const h=[];for(const p of g){const{trackId:m,kind:S,rtpParameters:b,streamId:M}=p;R.debug("receive() [trackId:%s, kind:%s]",m,S);const C=S;this._remoteSdp.receive({mid:C,kind:S,offerRtpParameters:b,streamId:M??b.rtcp.cname,trackId:m})}const l={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let f=await this._pc.createAnswer();const u=r.parse(f.sdp);for(const p of g){const{kind:m,rtpParameters:S}=p,b=m,M=u.media.find(C=>String(C.mid)===b);y.applyCodecParameters({offerRtpParameters:S,answerMediaObject:M})}f={type:"answer",sdp:r.write(u)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f);for(const p of g){const{kind:m,trackId:S,rtpParameters:b}=p,M=m,C=S,O=p.streamId??b.rtcp.cname,H=this._pc.getRemoteStreams().find(N=>N.id===O).getTrackById(C);if(!H)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(C,{mid:M,rtpParameters:b}),h.push({localId:C,track:H})}return h}async stopReceiving(g){this.assertRecvDirection();for(const f of g){R.debug("stopReceiving() [localId:%s]",f);const{mid:u,rtpParameters:p}=this._mapRecvLocalIdInfo.get(f)??{};this._mapRecvLocalIdInfo.delete(f),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){throw new o.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:l}){this.assertRecvDirection();const{streamId:f,ordered:u,maxPacketLifeTime:p,maxRetransmits:m}=g,S={negotiated:!0,id:f,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:m,protocol:l};R.debug("receiveDataChannel() [options:%o]",S);const b=this._pc.createDataChannel(h,S);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const M={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const C=await this._pc.createAnswer();if(!this._transportReady){const O=r.parse(C.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setLocalDescription(C),this._hasDataChannelMediaSection=!0}return{dataChannel:b}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=r.parse(this._pc.localDescription.sdp));const l=y.extractDtlsParameters({sdpObject:h});l.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((f,u)=>{this.safeEmit("@connect",{dtlsParameters:l},f,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Os.Chrome55=L,Os}var ks={},rg;function cb(){if(rg)return ks;rg=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.Firefox120=void 0;const r=zt(),c=Je(),o=Tt(),s=rt(),w=Ct(),y=mi(),_=fa(),T=Ut(),E=gi(),R=Dn(),D=new c.Logger("Firefox120"),v="Firefox120",L={OS:16,MIS:2048};let k=class vv extends T.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new vv}get name(){return v}close(){if(D.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){D.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),l=document.createElement("canvas");l.getContext("2d");const u=l.captureStream().getVideoTracks()[0];try{h.addTransceiver("audio",{direction:"sendrecv"}),h.addTransceiver(u,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const p=await h.createOffer();try{l.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}const m=r.parse(p.sdp);return y.extractRtpCapabilities({sdpObject:m})}catch(p){try{l.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}throw p}}async getNativeSctpCapabilities(){return D.debug("getNativeSctpCapabilities()"),{numStreams:L}}run({direction:h,iceParameters:l,iceCandidates:f,dtlsParameters:u,sctpParameters:p,iceServers:m,iceTransportPolicy:S,additionalSettings:b,proprietaryConstraints:M,extendedRtpCapabilities:C}){this.assertNotClosed(),D.debug("run()"),this._direction=h,this._remoteSdp=new E.RemoteSdp({iceParameters:l,iceCandidates:f,dtlsParameters:u,sctpParameters:p}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",C),video:w.getSendingRtpParameters("video",C)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",C),video:w.getSendingRemoteRtpParameters("video",C)},this._pc=new RTCPeerConnection({iceServers:m??[],iceTransportPolicy:S??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...b},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",O=>{this.emit("@icecandidateerror",O)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(D.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(h){throw this.assertNotClosed(),new o.UnsupportedError("not supported")}async restartIce(h){if(this.assertNotClosed(),D.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),!!this._transportReady)if(this._direction==="send"){const l=await this._pc.createOffer({iceRestart:!0});D.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}else{const l={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const f=await this._pc.createAnswer();D.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:l,codecOptions:f,codec:u,onRtpSender:p}){this.assertNotClosed(),this.assertSendDirection(),D.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),l&&l.length>1&&l.forEach((Y,Z)=>{Y.rid=`r${Z}`});const m=s.clone(this._sendingRtpParametersByKind[h.kind]);m.codecs=w.reduceCodecs(m.codecs,u);const S=s.clone(this._sendingRemoteRtpParametersByKind[h.kind]);S.codecs=w.reduceCodecs(S.codecs,u);const b=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream],sendEncodings:l});p&&p(b.sender);const M=await this._pc.createOffer();let C=r.parse(M.sdp);C.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:C});const O=(0,R.parse)((l??[{}])[0].scalabilityMode);D.debug("send() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M);const U=b.mid;m.mid=U,C=r.parse(this._pc.localDescription.sdp);const H=C.media[C.media.length-1];if(m.rtcp.cname=y.getCname({offerMediaObject:H}),!l)m.encodings=_.getRtpEncodings({offerMediaObject:H});else if(l.length===1){const Y=_.getRtpEncodings({offerMediaObject:H});Object.assign(Y[0],l[0]),m.encodings=Y}else m.encodings=l;if(m.encodings.length>1&&(m.codecs[0].mimeType.toLowerCase()==="video/vp8"||m.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Y of m.encodings)Y.scalabilityMode?Y.scalabilityMode=`L1T${O.temporalLayers}`:Y.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:H,offerRtpParameters:m,answerRtpParameters:S,codecOptions:f});const N={type:"answer",sdp:this._remoteSdp.getSdp()};return D.debug("send() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N),this._mapMidTransceiver.set(U,b),{localId:U,rtpParameters:m,rtpSender:b.sender}}async stopSending(h){if(this.assertSendDirection(),D.debug("stopSending() [localId:%s]",h),this._closed)return;const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated transceiver not found");l.sender.replaceTrack(null),this._pc.removeTrack(l.sender),this._remoteSdp.disableMediaSection(l.mid);const f=await this._pc.createOffer();D.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),D.debug("pauseSending() [localId:%s]",h);const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="inactive",this._remoteSdp.pauseMediaSection(h);const f=await this._pc.createOffer();D.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),D.debug("resumeSending() [localId:%s]",h);const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(h);const f=await this._pc.createOffer();D.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async replaceTrack(h,l){this.assertNotClosed(),this.assertSendDirection(),l?D.debug("replaceTrack() [localId:%s, track.id:%s]",h,l.id):D.debug("replaceTrack() [localId:%s, no track]",h);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated RTCRtpTransceiver not found");await f.sender.replaceTrack(l)}async setMaxSpatialLayer(h,l){this.assertNotClosed(),this.assertSendDirection(),D.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,l);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated transceiver not found");const u=f.sender.getParameters();u.encodings.forEach((S,b)=>{b<=l?S.active=!0:S.active=!1}),await f.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();D.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async setRtpEncodingParameters(h,l){this.assertNotClosed(),this.assertSendDirection(),D.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,l);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated RTCRtpTransceiver not found");const u=f.sender.getParameters();u.encodings.forEach((S,b)=>{u.encodings[b]={...S,...l}}),await f.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();D.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:l,maxRetransmits:f,label:u,protocol:p}){this.assertNotClosed(),this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:l,maxRetransmits:f,protocol:p};D.debug("sendDataChannel() [options:%o]",m);const S=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%L.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),C=r.parse(M.sdp),O=C.media.find(H=>H.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:C}),D.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const U={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setRemoteDescription(U),this._hasDataChannelMediaSection=!0}const b={streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits};return{dataChannel:S,sctpStreamParameters:b}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const l=[],f=new Map;for(const S of h){const{trackId:b,kind:M,rtpParameters:C,streamId:O}=S;D.debug("receive() [trackId:%s, kind:%s]",b,M);const U=C.mid??String(this._mapMidTransceiver.size);f.set(b,U),this._remoteSdp.receive({mid:U,kind:M,offerRtpParameters:C,streamId:O??C.rtcp.cname,trackId:b})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);for(const S of h){const{trackId:b,onRtpReceiver:M}=S;if(M){const C=f.get(b),O=this._pc.getTransceivers().find(U=>U.mid===C);if(!O)throw new Error("transceiver not found");M(O.receiver)}}let p=await this._pc.createAnswer();const m=r.parse(p.sdp);for(const S of h){const{trackId:b,rtpParameters:M}=S,C=f.get(b),O=m.media.find(U=>String(U.mid)===C);y.applyCodecParameters({offerRtpParameters:M,answerMediaObject:O}),p={type:"answer",sdp:r.write(m)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:m}),D.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const S of h){const{trackId:b}=S,M=f.get(b),C=this._pc.getTransceivers().find(O=>O.mid===M);if(!C)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,C),l.push({localId:M,track:C.receiver.track,rtpReceiver:C.receiver})}return l}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const u of h){D.debug("stopReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(p.mid)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const f=await this._pc.createAnswer();D.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f);for(const u of h)this._mapMidTransceiver.delete(u)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){D.debug("pauseReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(u)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const f=await this._pc.createAnswer();D.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){D.debug("resumeReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(u)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const f=await this._pc.createAnswer();D.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}async getReceiverStats(h){this.assertRecvDirection();const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:l,protocol:f}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:u,ordered:p,maxPacketLifeTime:m,maxRetransmits:S}=h,b={negotiated:!0,id:u,ordered:p,maxPacketLifeTime:m,maxRetransmits:S,protocol:f};D.debug("receiveDataChannel() [options:%o]",b);const M=this._pc.createDataChannel(l,b);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const C={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const O=await this._pc.createAnswer();if(!this._transportReady){const U=r.parse(O.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:U})}D.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:l}){l||(l=r.parse(this._pc.localDescription.sdp));const f=y.extractDtlsParameters({sdpObject:l});f.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((u,p)=>{this.safeEmit("@connect",{dtlsParameters:f},u,p)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new o.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return ks.Firefox120=k,ks}var As={},sg;function ob(){if(sg)return As;sg=1,Object.defineProperty(As,"__esModule",{value:!0}),As.Firefox60=void 0;const r=zt(),c=Je(),o=Tt(),s=rt(),w=Ct(),y=mi(),_=fa(),T=Ut(),E=gi(),R=Dn(),D=new c.Logger("Firefox60"),v="Firefox60",L={OS:16,MIS:2048};let k=class _v extends T.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new _v}get name(){return v}close(){if(D.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){D.debug("getNativeRtpCapabilities()");const h=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),l=document.createElement("canvas");l.getContext("2d");const u=l.captureStream().getVideoTracks()[0];try{h.addTransceiver("audio",{direction:"sendrecv"});const p=h.addTransceiver(u,{direction:"sendrecv"}),m=p.sender.getParameters(),S=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];m.encodings=S,await p.sender.setParameters(m);const b=await h.createOffer();try{l.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}const M=r.parse(b.sdp);return y.extractRtpCapabilities({sdpObject:M})}catch(p){try{l.remove()}catch{}try{u.stop()}catch{}try{h.close()}catch{}throw p}}async getNativeSctpCapabilities(){return D.debug("getNativeSctpCapabilities()"),{numStreams:L}}run({direction:h,iceParameters:l,iceCandidates:f,dtlsParameters:u,sctpParameters:p,iceServers:m,iceTransportPolicy:S,additionalSettings:b,proprietaryConstraints:M,extendedRtpCapabilities:C}){this.assertNotClosed(),D.debug("run()"),this._direction=h,this._remoteSdp=new E.RemoteSdp({iceParameters:l,iceCandidates:f,dtlsParameters:u,sctpParameters:p}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",C),video:w.getSendingRtpParameters("video",C)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",C),video:w.getSendingRemoteRtpParameters("video",C)},this._pc=new RTCPeerConnection({iceServers:m??[],iceTransportPolicy:S??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...b},M),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",O=>{this.emit("@icecandidateerror",O)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(D.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(h){throw this.assertNotClosed(),new o.UnsupportedError("not supported")}async restartIce(h){if(this.assertNotClosed(),D.debug("restartIce()"),this._remoteSdp.updateIceParameters(h),!!this._transportReady)if(this._direction==="send"){const l=await this._pc.createOffer({iceRestart:!0});D.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}else{const l={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const f=await this._pc.createAnswer();D.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:h,encodings:l,codecOptions:f,codec:u}){this.assertNotClosed(),this.assertSendDirection(),D.debug("send() [kind:%s, track.id:%s]",h.kind,h.id),l&&(l=s.clone(l),l.forEach((N,Y)=>{N.rid=`r${Y}`}),l.reverse());const p=s.clone(this._sendingRtpParametersByKind[h.kind]);p.codecs=w.reduceCodecs(p.codecs,u);const m=s.clone(this._sendingRemoteRtpParametersByKind[h.kind]);m.codecs=w.reduceCodecs(m.codecs,u);const S=this._pc.addTransceiver(h,{direction:"sendonly",streams:[this._sendStream]});if(l){const N=S.sender.getParameters();N.encodings=l,await S.sender.setParameters(N)}const b=await this._pc.createOffer();let M=r.parse(b.sdp);M.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed(),this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:M});const C=(0,R.parse)((l??[{}])[0].scalabilityMode);D.debug("send() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b);const O=S.mid;p.mid=O,M=r.parse(this._pc.localDescription.sdp);const U=M.media[M.media.length-1];if(p.rtcp.cname=y.getCname({offerMediaObject:U}),!l)p.encodings=_.getRtpEncodings({offerMediaObject:U});else if(l.length===1){const N=_.getRtpEncodings({offerMediaObject:U});Object.assign(N[0],l[0]),p.encodings=N}else p.encodings=l.reverse();if(p.encodings.length>1&&(p.codecs[0].mimeType.toLowerCase()==="video/vp8"||p.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const N of p.encodings)N.scalabilityMode?N.scalabilityMode=`L1T${C.temporalLayers}`:N.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:U,offerRtpParameters:p,answerRtpParameters:m,codecOptions:f});const H={type:"answer",sdp:this._remoteSdp.getSdp()};return D.debug("send() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._mapMidTransceiver.set(O,S),{localId:O,rtpParameters:p,rtpSender:S.sender}}async stopSending(h){if(this.assertSendDirection(),D.debug("stopSending() [localId:%s]",h),this._closed)return;const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated transceiver not found");l.sender.replaceTrack(null),this._pc.removeTrack(l.sender),this._remoteSdp.disableMediaSection(l.mid);const f=await this._pc.createOffer();D.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(h)}async pauseSending(h){this.assertNotClosed(),this.assertSendDirection(),D.debug("pauseSending() [localId:%s]",h);const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="inactive",this._remoteSdp.pauseMediaSection(h);const f=await this._pc.createOffer();D.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async resumeSending(h){this.assertNotClosed(),this.assertSendDirection(),D.debug("resumeSending() [localId:%s]",h);const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated RTCRtpTransceiver not found");l.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(h);const f=await this._pc.createOffer();D.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async replaceTrack(h,l){this.assertNotClosed(),this.assertSendDirection(),l?D.debug("replaceTrack() [localId:%s, track.id:%s]",h,l.id):D.debug("replaceTrack() [localId:%s, no track]",h);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated RTCRtpTransceiver not found");await f.sender.replaceTrack(l)}async setMaxSpatialLayer(h,l){this.assertNotClosed(),this.assertSendDirection(),D.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",h,l);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated transceiver not found");const u=f.sender.getParameters();l=u.encodings.length-1-l,u.encodings.forEach((S,b)=>{b>=l?S.active=!0:S.active=!1}),await f.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();D.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async setRtpEncodingParameters(h,l){this.assertNotClosed(),this.assertSendDirection(),D.debug("setRtpEncodingParameters() [localId:%s, params:%o]",h,l);const f=this._mapMidTransceiver.get(h);if(!f)throw new Error("associated RTCRtpTransceiver not found");const u=f.sender.getParameters();u.encodings.forEach((S,b)=>{u.encodings[b]={...S,...l}}),await f.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(h,u.encodings);const p=await this._pc.createOffer();D.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async getSenderStats(h){this.assertNotClosed(),this.assertSendDirection();const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.sender.getStats()}async sendDataChannel({ordered:h,maxPacketLifeTime:l,maxRetransmits:f,label:u,protocol:p}){this.assertNotClosed(),this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:h,maxPacketLifeTime:l,maxRetransmits:f,protocol:p};D.debug("sendDataChannel() [options:%o]",m);const S=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%L.MIS,!this._hasDataChannelMediaSection){const M=await this._pc.createOffer(),C=r.parse(M.sdp),O=C.media.find(H=>H.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:C}),D.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",M),await this._pc.setLocalDescription(M),this._remoteSdp.sendSctpAssociation({offerMediaObject:O});const U={type:"answer",sdp:this._remoteSdp.getSdp()};D.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setRemoteDescription(U),this._hasDataChannelMediaSection=!0}const b={streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits};return{dataChannel:S,sctpStreamParameters:b}}async receive(h){this.assertNotClosed(),this.assertRecvDirection();const l=[],f=new Map;for(const S of h){const{trackId:b,kind:M,rtpParameters:C,streamId:O}=S;D.debug("receive() [trackId:%s, kind:%s]",b,M);const U=C.mid??String(this._mapMidTransceiver.size);f.set(b,U),this._remoteSdp.receive({mid:U,kind:M,offerRtpParameters:C,streamId:O??C.rtcp.cname,trackId:b})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let p=await this._pc.createAnswer();const m=r.parse(p.sdp);for(const S of h){const{trackId:b,rtpParameters:M}=S,C=f.get(b),O=m.media.find(U=>String(U.mid)===C);y.applyCodecParameters({offerRtpParameters:M,answerMediaObject:O}),p={type:"answer",sdp:r.write(m)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:m}),D.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p);for(const S of h){const{trackId:b}=S,M=f.get(b),C=this._pc.getTransceivers().find(O=>O.mid===M);if(!C)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(M,C),l.push({localId:M,track:C.receiver.track,rtpReceiver:C.receiver})}return l}async stopReceiving(h){if(this.assertRecvDirection(),this._closed)return;for(const u of h){D.debug("stopReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(p.mid)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const f=await this._pc.createAnswer();D.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f);for(const u of h)this._mapMidTransceiver.delete(u)}async pauseReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){D.debug("pauseReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="inactive",this._remoteSdp.pauseMediaSection(u)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const f=await this._pc.createAnswer();D.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}async resumeReceiving(h){this.assertNotClosed(),this.assertRecvDirection();for(const u of h){D.debug("resumeReceiving() [localId:%s]",u);const p=this._mapMidTransceiver.get(u);if(!p)throw new Error("associated RTCRtpTransceiver not found");p.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(u)}const l={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);const f=await this._pc.createAnswer();D.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f)}async getReceiverStats(h){this.assertRecvDirection();const l=this._mapMidTransceiver.get(h);if(!l)throw new Error("associated RTCRtpTransceiver not found");return l.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:h,label:l,protocol:f}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:u,ordered:p,maxPacketLifeTime:m,maxRetransmits:S}=h,b={negotiated:!0,id:u,ordered:p,maxPacketLifeTime:m,maxRetransmits:S,protocol:f};D.debug("receiveDataChannel() [options:%o]",b);const M=this._pc.createDataChannel(l,b);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const C={type:"offer",sdp:this._remoteSdp.getSdp()};D.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",C),await this._pc.setRemoteDescription(C);const O=await this._pc.createAnswer();if(!this._transportReady){const U=r.parse(O.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:U})}D.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setLocalDescription(O),this._hasDataChannelMediaSection=!0}return{dataChannel:M}}async setupTransport({localDtlsRole:h,localSdpObject:l}){l||(l=r.parse(this._pc.localDescription.sdp));const f=y.extractDtlsParameters({sdpObject:l});f.role=h,this._remoteSdp.updateDtlsRole(h==="client"?"server":"client"),await new Promise((u,p)=>{this.safeEmit("@connect",{dtlsParameters:f},u,p)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new o.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return As.Firefox60=k,As}var Ps={},cg;function lb(){if(cg)return Ps;cg=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.Safari12=void 0;const r=zt(),c=Je(),o=rt(),s=Ct(),w=mi(),y=fa(),_=jo(),T=Tt(),E=Ut(),R=gi(),D=Dn(),v=new c.Logger("Safari12"),L="Safari12",k={OS:1024,MIS:1024};let A=class yv extends E.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new yv}get name(){return L}close(){if(v.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const l=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{l.addTransceiver("audio"),l.addTransceiver("video");const f=await l.createOffer();try{l.close()}catch{}const u=r.parse(f.sdp),p=w.extractRtpCapabilities({sdpObject:u});return _.addNackSupportForOpus(p),p}catch(f){try{l.close()}catch{}throw f}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:l,iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m,iceServers:S,iceTransportPolicy:b,additionalSettings:M,proprietaryConstraints:C,extendedRtpCapabilities:O}){this.assertNotClosed(),v.debug("run()"),this._direction=l,this._remoteSdp=new R.RemoteSdp({iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",O),video:s.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",O),video:s.getSendingRemoteRtpParameters("video",O)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:S??[],iceTransportPolicy:b??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...M},C),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",U=>{this.emit("@icecandidateerror",U)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(l){this.assertNotClosed(),v.debug("updateIceServers()");const f=this._pc.getConfiguration();f.iceServers=l,this._pc.setConfiguration(f)}async restartIce(l){if(this.assertNotClosed(),v.debug("restartIce()"),this._remoteSdp.updateIceParameters(l),!!this._transportReady)if(this._direction==="send"){const f=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:l,encodings:f,codecOptions:u,codec:p,onRtpSender:m}){this.assertNotClosed(),this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",l.kind,l.id);const S=o.clone(this._sendingRtpParametersByKind[l.kind]);S.codecs=s.reduceCodecs(S.codecs,p);const b=o.clone(this._sendingRemoteRtpParametersByKind[l.kind]);b.codecs=s.reduceCodecs(b.codecs,p);const M=this._remoteSdp.getNextMediaSectionIdx(),C=this._pc.addTransceiver(l,{direction:"sendonly",streams:[this._sendStream]});m&&m(C.sender);let O=await this._pc.createOffer(),U=r.parse(O.sdp);U.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let H;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U});const N=(0,D.parse)((f??[{}])[0].scalabilityMode);f&&f.length>1&&(v.debug("send() | enabling legacy simulcast"),U=r.parse(O.sdp),H=U.media[M.idx],y.addLegacySimulcast({offerMediaObject:H,numStreams:f.length}),O={type:"offer",sdp:r.write(U)}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const Y=C.mid;if(S.mid=Y,U=r.parse(this._pc.localDescription.sdp),H=U.media[M.idx],S.rtcp.cname=w.getCname({offerMediaObject:H}),S.encodings=y.getRtpEncodings({offerMediaObject:H}),f)for(let j=0;j<S.encodings.length;++j)f[j]&&Object.assign(S.encodings[j],f[j]);if(S.encodings.length>1&&(S.codecs[0].mimeType.toLowerCase()==="video/vp8"||S.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const j of S.encodings)j.scalabilityMode?j.scalabilityMode=`L1T${N.temporalLayers}`:j.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:H,reuseMid:M.reuseMid,offerRtpParameters:S,answerRtpParameters:b,codecOptions:u});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};return v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._mapMidTransceiver.set(Y,C),{localId:Y,rtpParameters:S,rtpSender:C.sender}}async stopSending(l){if(this.assertSendDirection(),this._closed)return;v.debug("stopSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");if(f.sender.replaceTrack(null),this._pc.removeTrack(f.sender),this._remoteSdp.closeMediaSection(f.mid))try{f.stop()}catch{}const p=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(l)}async pauseSending(l){this.assertNotClosed(),this.assertSendDirection(),v.debug("pauseSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(l);const u=await this._pc.createOffer();v.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(l){this.assertNotClosed(),this.assertSendDirection(),v.debug("resumeSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(l);const u=await this._pc.createOffer();v.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(l,f){this.assertNotClosed(),this.assertSendDirection(),f?v.debug("replaceTrack() [localId:%s, track.id:%s]",l,f.id):v.debug("replaceTrack() [localId:%s, no track]",l);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(f)}async setMaxSpatialLayer(l,f){this.assertNotClosed(),this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",l,f);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((b,M)=>{M<=f?b.active=!0:b.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(l,p.encodings);const m=await this._pc.createOffer();v.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const S={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async setRtpEncodingParameters(l,f){this.assertNotClosed(),this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",l,f);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((b,M)=>{p.encodings[M]={...b,...f}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(l,p.encodings);const m=await this._pc.createOffer();v.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const S={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async getSenderStats(l){this.assertNotClosed(),this.assertSendDirection();const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.sender.getStats()}async sendDataChannel({ordered:l,maxPacketLifeTime:f,maxRetransmits:u,label:p,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const S={negotiated:!0,id:this._nextSendSctpStreamId,ordered:l,maxPacketLifeTime:f,maxRetransmits:u,protocol:m};v.debug("sendDataChannel() [options:%o]",S);const b=this._pc.createDataChannel(p,S);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const C=await this._pc.createOffer(),O=r.parse(C.sdp),U=O.media.find(N=>N.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const H={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._hasDataChannelMediaSection=!0}const M={streamId:S.id,ordered:S.ordered,maxPacketLifeTime:S.maxPacketLifeTime,maxRetransmits:S.maxRetransmits};return{dataChannel:b,sctpStreamParameters:M}}async receive(l){this.assertNotClosed(),this.assertRecvDirection();const f=[],u=new Map;for(const b of l){const{trackId:M,kind:C,rtpParameters:O,streamId:U}=b;v.debug("receive() [trackId:%s, kind:%s]",M,C);const H=O.mid??String(this._mapMidTransceiver.size);u.set(M,H),this._remoteSdp.receive({mid:H,kind:C,offerRtpParameters:O,streamId:U??O.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const b of l){const{trackId:M,onRtpReceiver:C}=b;if(C){const O=u.get(M),U=this._pc.getTransceivers().find(H=>H.mid===O);if(!U)throw new Error("transceiver not found");C(U.receiver)}}let m=await this._pc.createAnswer();const S=r.parse(m.sdp);for(const b of l){const{trackId:M,rtpParameters:C}=b,O=u.get(M),U=S.media.find(H=>String(H.mid)===O);w.applyCodecParameters({offerRtpParameters:C,answerMediaObject:U})}m={type:"answer",sdp:r.write(S)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:S}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const b of l){const{trackId:M}=b,C=u.get(M),O=this._pc.getTransceivers().find(U=>U.mid===C);if(!O)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(C,O),f.push({localId:C,track:O.receiver.track,rtpReceiver:O.receiver})}return f}async stopReceiving(l){if(this.assertRecvDirection(),this._closed)return;for(const p of l){v.debug("stopReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of l)this._mapMidTransceiver.delete(p)}async pauseReceiving(l){this.assertNotClosed(),this.assertRecvDirection();for(const p of l){v.debug("pauseReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(l){this.assertNotClosed(),this.assertRecvDirection();for(const p of l){v.debug("resumeReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(l){this.assertNotClosed(),this.assertRecvDirection();const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:l,label:f,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:m,maxPacketLifeTime:S,maxRetransmits:b}=l,M={negotiated:!0,id:p,ordered:m,maxPacketLifeTime:S,maxRetransmits:b,protocol:u};v.debug("receiveDataChannel() [options:%o]",M);const C=this._pc.createDataChannel(f,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const U=await this._pc.createAnswer();if(!this._transportReady){const H=r.parse(U.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setLocalDescription(U),this._hasDataChannelMediaSection=!0}return{dataChannel:C}}async setupTransport({localDtlsRole:l,localSdpObject:f}){f||(f=r.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:f});u.role=l,this._remoteSdp.updateDtlsRole(l==="client"?"server":"client"),await new Promise((p,m)=>{this.safeEmit("@connect",{dtlsParameters:u},p,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ps.Safari12=A,Ps}var Ns={},og;function db(){if(og)return Ns;og=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.Safari11=void 0;const r=zt(),c=Je(),o=rt(),s=Ct(),w=mi(),y=zo(),_=Ut(),T=gi(),E=new c.Logger("Safari11"),R="Safari11",D={OS:1024,MIS:1024};let v=class bv extends _.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_sendStream",new MediaStream);z(this,"_mapSendLocalIdRtpSender",new Map);z(this,"_nextSendLocalId",0);z(this,"_mapRecvLocalIdInfo",new Map);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new bv}get name(){return R}close(){if(E.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){E.debug("getNativeRtpCapabilities()");const A=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const g=await A.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{A.close()}catch{}const h=r.parse(g.sdp);return w.extractRtpCapabilities({sdpObject:h})}catch(g){try{A.close()}catch{}throw g}}async getNativeSctpCapabilities(){return E.debug("getNativeSctpCapabilities()"),{numStreams:D}}run({direction:A,iceParameters:g,iceCandidates:h,dtlsParameters:l,sctpParameters:f,iceServers:u,iceTransportPolicy:p,additionalSettings:m,proprietaryConstraints:S,extendedRtpCapabilities:b}){E.debug("run()"),this._direction=A,this._remoteSdp=new T.RemoteSdp({iceParameters:g,iceCandidates:h,dtlsParameters:l,sctpParameters:f,planB:!0}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",b),video:s.getSendingRtpParameters("video",b)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",b),video:s.getSendingRemoteRtpParameters("video",b)},l.role&&l.role!=="auto"&&(this._forcedLocalDtlsRole=l.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:u??[],iceTransportPolicy:p??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...m},S),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",M=>{this.emit("@icecandidateerror",M)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(E.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(A){E.debug("updateIceServers()");const g=this._pc.getConfiguration();g.iceServers=A,this._pc.setConfiguration(g)}async restartIce(A){if(E.debug("restartIce()"),this._remoteSdp.updateIceParameters(A),!!this._transportReady)if(this._direction==="send"){const g=await this._pc.createOffer({iceRestart:!0});E.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const h={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h)}else{const g={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();E.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}}async getTransportStats(){return this._pc.getStats()}async send({track:A,encodings:g,codecOptions:h,codec:l}){this.assertSendDirection(),E.debug("send() [kind:%s, track.id:%s]",A.kind,A.id),l&&E.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(A),this._pc.addTrack(A,this._sendStream);let f=await this._pc.createOffer(),u=r.parse(f.sdp);u.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let p;const m=o.clone(this._sendingRtpParametersByKind[A.kind]);m.codecs=s.reduceCodecs(m.codecs);const S=o.clone(this._sendingRemoteRtpParametersByKind[A.kind]);if(S.codecs=s.reduceCodecs(S.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),A.kind==="video"&&g&&g.length>1&&(E.debug("send() | enabling simulcast"),u=r.parse(f.sdp),p=u.media.find(O=>O.type==="video"),y.addLegacySimulcast({offerMediaObject:p,track:A,numStreams:g.length}),f={type:"offer",sdp:r.write(u)}),E.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),u=r.parse(this._pc.localDescription.sdp),p=u.media.find(O=>O.type===A.kind),m.rtcp.cname=w.getCname({offerMediaObject:p}),m.encodings=y.getRtpEncodings({offerMediaObject:p,track:A}),g)for(let O=0;O<m.encodings.length;++O)g[O]&&Object.assign(m.encodings[O],g[O]);if(m.encodings.length>1&&m.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const O of m.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:p,offerRtpParameters:m,answerRtpParameters:S,codecOptions:h});const b={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("send() | calling pc.setRemoteDescription() [answer:%o]",b),await this._pc.setRemoteDescription(b);const M=String(this._nextSendLocalId);this._nextSendLocalId++;const C=this._pc.getSenders().find(O=>O.track===A);return this._mapSendLocalIdRtpSender.set(M,C),{localId:M,rtpParameters:m,rtpSender:C}}async stopSending(A){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(A);if(!g)throw new Error("associated RTCRtpSender not found");g.track&&this._sendStream.removeTrack(g.track),this._mapSendLocalIdRtpSender.delete(A);const h=await this._pc.createOffer();E.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",h);try{await this._pc.setLocalDescription(h)}catch(f){if(this._sendStream.getTracks().length===0){E.warn("stopSending() | ignoring expected error due no sending tracks: %s",f.toString());return}throw f}if(this._pc.signalingState==="stable")return;const l={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async pauseSending(A){}async resumeSending(A){}async replaceTrack(A,g){this.assertSendDirection(),g?E.debug("replaceTrack() [localId:%s, track.id:%s]",A,g.id):E.debug("replaceTrack() [localId:%s, no track]",A);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const l=h.track;await h.replaceTrack(g),l&&this._sendStream.removeTrack(l),g&&this._sendStream.addTrack(g)}async setMaxSpatialLayer(A,g){this.assertSendDirection(),E.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",A,g);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const l=h.getParameters();l.encodings.forEach((f,u)=>{u<=g?f.active=!0:f.active=!1}),await h.setParameters(l)}async setRtpEncodingParameters(A,g){this.assertSendDirection(),E.debug("setRtpEncodingParameters() [localId:%s, params:%o]",A,g);const h=this._mapSendLocalIdRtpSender.get(A);if(!h)throw new Error("associated RTCRtpSender not found");const l=h.getParameters();l.encodings.forEach((f,u)=>{l.encodings[u]={...f,...g}}),await h.setParameters(l)}async getSenderStats(A){this.assertSendDirection();const g=this._mapSendLocalIdRtpSender.get(A);if(!g)throw new Error("associated RTCRtpSender not found");return g.getStats()}async sendDataChannel({ordered:A,maxPacketLifeTime:g,maxRetransmits:h,label:l,protocol:f}){this.assertSendDirection();const u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:A,maxPacketLifeTime:g,maxRetransmits:h,protocol:f};E.debug("sendDataChannel() [options:%o]",u);const p=this._pc.createDataChannel(l,u);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%D.MIS,!this._hasDataChannelMediaSection){const S=await this._pc.createOffer(),b=r.parse(S.sdp),M=b.media.find(O=>O.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:b}),E.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",S),await this._pc.setLocalDescription(S),this._remoteSdp.sendSctpAssociation({offerMediaObject:M});const C={type:"answer",sdp:this._remoteSdp.getSdp()};E.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setRemoteDescription(C),this._hasDataChannelMediaSection=!0}const m={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits};return{dataChannel:p,sctpStreamParameters:m}}async receive(A){this.assertRecvDirection();const g=[];for(const u of A){const{trackId:p,kind:m,rtpParameters:S,streamId:b}=u;E.debug("receive() [trackId:%s, kind:%s]",p,m);const M=m;this._remoteSdp.receive({mid:M,kind:m,offerRtpParameters:S,streamId:b??S.rtcp.cname,trackId:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);let l=await this._pc.createAnswer();const f=r.parse(l.sdp);for(const u of A){const{kind:p,rtpParameters:m}=u,S=p,b=f.media.find(M=>String(M.mid)===S);w.applyCodecParameters({offerRtpParameters:m,answerMediaObject:b})}l={type:"answer",sdp:r.write(f)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),E.debug("receive() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const u of A){const{kind:p,trackId:m,rtpParameters:S}=u,b=p,M=m,C=this._pc.getReceivers().find(O=>O.track&&O.track.id===M);if(!C)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(M,{mid:b,rtpParameters:S,rtpReceiver:C}),g.push({localId:M,track:C.track,rtpReceiver:C})}return g}async stopReceiving(A){this.assertRecvDirection();for(const l of A){E.debug("stopReceiving() [localId:%s]",l);const{mid:f,rtpParameters:u}=this._mapRecvLocalIdInfo.get(l)??{};this._mapRecvLocalIdInfo.delete(l),this._remoteSdp.planBStopReceiving({mid:f,offerRtpParameters:u})}const g={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",g),await this._pc.setRemoteDescription(g);const h=await this._pc.createAnswer();E.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",h),await this._pc.setLocalDescription(h)}async getReceiverStats(A){this.assertRecvDirection();const{rtpReceiver:g}=this._mapRecvLocalIdInfo.get(A)??{};if(!g)throw new Error("associated RTCRtpReceiver not found");return g.getStats()}async pauseReceiving(A){}async resumeReceiving(A){}async receiveDataChannel({sctpStreamParameters:A,label:g,protocol:h}){this.assertRecvDirection();const{streamId:l,ordered:f,maxPacketLifeTime:u,maxRetransmits:p}=A,m={negotiated:!0,id:l,ordered:f,maxPacketLifeTime:u,maxRetransmits:p,protocol:h};E.debug("receiveDataChannel() [options:%o]",m);const S=this._pc.createDataChannel(g,m);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const b={type:"offer",sdp:this._remoteSdp.getSdp()};E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",b),await this._pc.setRemoteDescription(b);const M=await this._pc.createAnswer();if(!this._transportReady){const C=r.parse(M.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:C})}E.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setLocalDescription(M),this._hasDataChannelMediaSection=!0}return{dataChannel:S}}async setupTransport({localDtlsRole:A,localSdpObject:g}){g||(g=r.parse(this._pc.localDescription.sdp));const h=w.extractDtlsParameters({sdpObject:g});h.role=A,this._remoteSdp.updateDtlsRole(A==="client"?"server":"client"),await new Promise((l,f)=>{this.safeEmit("@connect",{dtlsParameters:h},l,f)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Ns.Safari11=v,Ns}var js={},zs={},lg;function ub(){if(lg)return zs;lg=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.getCapabilities=c,zs.mangleRtpParameters=o;const r=rt();function c(){const s=RTCRtpReceiver.getCapabilities(),w=r.clone(s);for(const y of w.codecs??[]){if(y.channels=y.numChannels,delete y.numChannels,y.mimeType=y.mimeType??`${y.kind}/${y.name}`,y.parameters){const _=y.parameters;_.apt&&(_.apt=Number(_.apt)),_["packetization-mode"]&&(_["packetization-mode"]=Number(_["packetization-mode"]))}for(const _ of y.rtcpFeedback??[])_.parameter||(_.parameter="")}return w}function o(s){const w=r.clone(s);w.mid&&(w.muxId=w.mid,delete w.mid);for(const y of w.codecs)y.channels&&(y.numChannels=y.channels,delete y.channels),y.mimeType&&!y.name&&(y.name=y.mimeType.split("/")[1]),delete y.mimeType;return w}return zs}var dg;function fb(){if(dg)return js;dg=1,Object.defineProperty(js,"__esModule",{value:!0}),js.Edge11=void 0;const r=Je(),c=Tt(),o=rt(),s=Ct(),w=ub(),y=Ut(),_=new r.Logger("Edge11"),T="Edge11";let E=class Sv extends y.HandlerInterface{constructor(){super();z(this,"_sendingRtpParametersByKind");z(this,"_remoteIceParameters");z(this,"_remoteIceCandidates");z(this,"_remoteDtlsParameters");z(this,"_iceGatherer");z(this,"_iceTransport");z(this,"_dtlsTransport");z(this,"_rtpSenders",new Map);z(this,"_rtpReceivers",new Map);z(this,"_nextSendLocalId",0);z(this,"_cname");z(this,"_transportReady",!1)}static createFactory(){return()=>new Sv}get name(){return T}close(){_.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const v of this._rtpSenders.values())try{v.stop()}catch{}for(const v of this._rtpReceivers.values())try{v.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return _.debug("getNativeRtpCapabilities()"),w.getCapabilities()}async getNativeSctpCapabilities(){return _.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:v,iceParameters:L,iceCandidates:k,dtlsParameters:A,sctpParameters:g,iceServers:h,iceTransportPolicy:l,additionalSettings:f,proprietaryConstraints:u,extendedRtpCapabilities:p}){_.debug("run()"),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",p),video:s.getSendingRtpParameters("video",p)},this._remoteIceParameters=L,this._remoteIceCandidates=k,this._remoteDtlsParameters=A,this._cname=`CNAME-${o.generateRandomNumber()}`,this.setIceGatherer({iceServers:h,iceTransportPolicy:l}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(v){throw new c.UnsupportedError("not supported")}async restartIce(v){if(_.debug("restartIce()"),this._remoteIceParameters=v,!!this._transportReady){_.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,v,"controlling");for(const L of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(L);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:v,encodings:L,codecOptions:k,codec:A}){_.debug("send() [kind:%s, track.id:%s]",v.kind,v.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),_.debug("send() | calling new RTCRtpSender()");const g=new RTCRtpSender(v,this._dtlsTransport),h=o.clone(this._sendingRtpParametersByKind[v.kind]);h.codecs=s.reduceCodecs(h.codecs,A);const l=h.codecs.some(p=>/.+\/rtx$/i.test(p.mimeType));L||(L=[{}]);for(const p of L)p.ssrc=o.generateRandomNumber(),l&&(p.rtx={ssrc:o.generateRandomNumber()});h.encodings=L,h.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const f=w.mangleRtpParameters(h);_.debug("send() | calling rtpSender.send() [params:%o]",f),await g.send(f);const u=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(u,g),{localId:u,rtpParameters:h,rtpSender:g}}async stopSending(v){_.debug("stopSending() [localId:%s]",v);const L=this._rtpSenders.get(v);if(!L)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(v);try{_.debug("stopSending() | calling rtpSender.stop()"),L.stop()}catch(k){throw _.warn("stopSending() | rtpSender.stop() failed:%o",k),k}}async pauseSending(v){}async resumeSending(v){}async replaceTrack(v,L){L?_.debug("replaceTrack() [localId:%s, track.id:%s]",v,L.id):_.debug("replaceTrack() [localId:%s, no track]",v);const k=this._rtpSenders.get(v);if(!k)throw new Error("RTCRtpSender not found");k.setTrack(L)}async setMaxSpatialLayer(v,L){_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",v,L);const k=this._rtpSenders.get(v);if(!k)throw new Error("RTCRtpSender not found");const A=k.getParameters();A.encodings.forEach((g,h)=>{h<=L?g.active=!0:g.active=!1}),await k.setParameters(A)}async setRtpEncodingParameters(v,L){_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",v,L);const k=this._rtpSenders.get(v);if(!k)throw new Error("RTCRtpSender not found");const A=k.getParameters();A.encodings.forEach((g,h)=>{A.encodings[h]={...g,...L}}),await k.setParameters(A)}async getSenderStats(v){const L=this._rtpSenders.get(v);if(!L)throw new Error("RTCRtpSender not found");return L.getStats()}async sendDataChannel(v){throw new c.UnsupportedError("not implemented")}async receive(v){const L=[];for(const k of v){const{trackId:A,kind:g}=k;_.debug("receive() [trackId:%s, kind:%s]",A,g)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const k of v){const{trackId:A,kind:g,rtpParameters:h}=k;_.debug("receive() | calling new RTCRtpReceiver()");const l=new RTCRtpReceiver(this._dtlsTransport,g);l.addEventListener("error",p=>{_.error('rtpReceiver "error" event [event:%o]',p)});const f=w.mangleRtpParameters(h);_.debug("receive() | calling rtpReceiver.receive() [params:%o]",f),await l.receive(f);const u=A;this._rtpReceivers.set(u,l),L.push({localId:u,track:l.track,rtpReceiver:l})}return L}async stopReceiving(v){for(const L of v){_.debug("stopReceiving() [localId:%s]",L);const k=this._rtpReceivers.get(L);if(!k)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(L);try{_.debug("stopReceiving() | calling rtpReceiver.stop()"),k.stop()}catch(A){_.warn("stopReceiving() | rtpReceiver.stop() failed:%o",A)}}}async pauseReceiving(v){}async resumeReceiving(v){}async getReceiverStats(v){const L=this._rtpReceivers.get(v);if(!L)throw new Error("RTCRtpReceiver not found");return L.getStats()}async receiveDataChannel(v){throw new c.UnsupportedError("not implemented")}setIceGatherer({iceServers:v,iceTransportPolicy:L}){const k=new RTCIceGatherer({iceServers:v??[],gatherPolicy:L??"all"});k.addEventListener("error",A=>{_.error('iceGatherer "error" event [event:%o]',A)});try{k.gather()}catch(A){_.debug("setIceGatherer() | iceGatherer.gather() failed: %s",A.toString())}this._iceGatherer=k}setIceTransport(){const v=new RTCIceTransport(this._iceGatherer);v.addEventListener("statechange",()=>{switch(v.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),v.addEventListener("icestatechange",()=>{switch(v.state){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}}),v.addEventListener("candidatepairchange",L=>{_.debug('iceTransport "candidatepairchange" event [pair:%o]',L.pair)}),this._iceTransport=v}setDtlsTransport(){const v=new RTCDtlsTransport(this._iceTransport);v.addEventListener("statechange",()=>{_.debug('dtlsTransport "statechange" event [state:%s]',v.state)}),v.addEventListener("dtlsstatechange",()=>{_.debug('dtlsTransport "dtlsstatechange" event [state:%s]',v.state),v.state==="closed"&&this.emit("@connectionstatechange","closed")}),v.addEventListener("error",L=>{_.error('dtlsTransport "error" event [event:%o]',L)}),this._dtlsTransport=v}async setupTransport({localDtlsRole:v}){_.debug("setupTransport()");const L=this._dtlsTransport.getLocalParameters();L.role=v,await new Promise((k,A)=>{this.safeEmit("@connect",{dtlsParameters:L},k,A)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const k of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(k);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(k=>k.algorithm==="sha-256"||k.algorithm==="sha-384"||k.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}};return js.Edge11=E,js}var Us={},ug;function pb(){if(ug)return Us;ug=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.ReactNativeUnifiedPlan=void 0;const r=zt(),c=Je(),o=rt(),s=Ct(),w=mi(),y=fa(),_=jo(),T=Tt(),E=Ut(),R=gi(),D=Dn(),v=new c.Logger("ReactNativeUnifiedPlan"),L="ReactNativeUnifiedPlan",k={OS:1024,MIS:1024};let A=class wv extends E.HandlerInterface{constructor(){super();z(this,"_closed",!1);z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_mapMidTransceiver",new Map);z(this,"_sendStream",new MediaStream);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new wv}get name(){return L}close(){if(v.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){v.debug("getNativeRtpCapabilities()");const l=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{l.addTransceiver("audio"),l.addTransceiver("video");const f=await l.createOffer();try{l.close()}catch{}const u=r.parse(f.sdp),p=w.extractRtpCapabilities({sdpObject:u});return _.addNackSupportForOpus(p),p}catch(f){try{l.close()}catch{}throw f}}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:k}}run({direction:l,iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m,iceServers:S,iceTransportPolicy:b,additionalSettings:M,proprietaryConstraints:C,extendedRtpCapabilities:O}){this.assertNotClosed(),v.debug("run()"),this._direction=l,this._remoteSdp=new R.RemoteSdp({iceParameters:f,iceCandidates:u,dtlsParameters:p,sctpParameters:m}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",O),video:s.getSendingRtpParameters("video",O)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",O),video:s.getSendingRemoteRtpParameters("video",O)},p.role&&p.role!=="auto"&&(this._forcedLocalDtlsRole=p.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:S??[],iceTransportPolicy:b??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...M},C),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",U=>{this.emit("@icecandidateerror",U)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(v.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(l){this.assertNotClosed(),v.debug("updateIceServers()");const f=this._pc.getConfiguration();f.iceServers=l,this._pc.setConfiguration(f)}async restartIce(l){if(this.assertNotClosed(),v.debug("restartIce()"),this._remoteSdp.updateIceParameters(l),!!this._transportReady)if(this._direction==="send"){const f=await this._pc.createOffer({iceRestart:!0});v.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const u={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:l,encodings:f,codecOptions:u,codec:p,onRtpSender:m}){this.assertNotClosed(),this.assertSendDirection(),v.debug("send() [kind:%s, track.id:%s]",l.kind,l.id),f&&f.length>1&&f.forEach((V,te)=>{V.rid=`r${te}`});const S=o.clone(this._sendingRtpParametersByKind[l.kind]);S.codecs=s.reduceCodecs(S.codecs,p);const b=o.clone(this._sendingRemoteRtpParametersByKind[l.kind]);b.codecs=s.reduceCodecs(b.codecs,p);const M=this._remoteSdp.getNextMediaSectionIdx(),C=this._pc.addTransceiver(l,{direction:"sendonly",streams:[this._sendStream],sendEncodings:f});m&&m(C.sender);let O=await this._pc.createOffer(),U=r.parse(O.sdp);U.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let H;this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:U});let N=!1;const Y=(0,D.parse)((f??[{}])[0].scalabilityMode);f&&f.length===1&&Y.spatialLayers>1&&S.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(v.debug("send() | enabling legacy simulcast for VP9 SVC"),N=!0,U=r.parse(O.sdp),H=U.media[M.idx],y.addLegacySimulcast({offerMediaObject:H,numStreams:Y.spatialLayers}),O={type:"offer",sdp:r.write(U)}),v.debug("send() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);let Z=C.mid??void 0;if(Z||v.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),S.mid=Z,U=r.parse(this._pc.localDescription.sdp),H=U.media[M.idx],S.rtcp.cname=w.getCname({offerMediaObject:H}),!f)S.encodings=y.getRtpEncodings({offerMediaObject:H});else if(f.length===1){let V=y.getRtpEncodings({offerMediaObject:H});Object.assign(V[0],f[0]),N&&(V=[V[0]]),S.encodings=V}else S.encodings=f;if(S.encodings.length>1&&(S.codecs[0].mimeType.toLowerCase()==="video/vp8"||S.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const V of S.encodings)V.scalabilityMode?V.scalabilityMode=`L1T${Y.temporalLayers}`:V.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:H,reuseMid:M.reuseMid,offerRtpParameters:S,answerRtpParameters:b,codecOptions:u});const j={type:"answer",sdp:this._remoteSdp.getSdp()};return v.debug("send() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j),Z||(Z=C.mid,S.mid=Z),this._mapMidTransceiver.set(Z,C),{localId:Z,rtpParameters:S,rtpSender:C.sender}}async stopSending(l){if(this.assertSendDirection(),this._closed)return;v.debug("stopSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");if(f.sender.replaceTrack(null),this._pc.removeTrack(f.sender),this._remoteSdp.closeMediaSection(f.mid))try{f.stop()}catch{}const p=await this._pc.createOffer();v.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const m={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(l)}async pauseSending(l){this.assertNotClosed(),this.assertSendDirection(),v.debug("pauseSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(l);const u=await this._pc.createOffer();v.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async resumeSending(l){this.assertNotClosed(),this.assertSendDirection(),v.debug("resumeSending() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(this._remoteSdp.resumeSendingMediaSection(l),!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="sendonly";const u=await this._pc.createOffer();v.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const p={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}async replaceTrack(l,f){this.assertNotClosed(),this.assertSendDirection(),f?v.debug("replaceTrack() [localId:%s, track.id:%s]",l,f.id):v.debug("replaceTrack() [localId:%s, no track]",l);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(f)}async setMaxSpatialLayer(l,f){this.assertNotClosed(),this.assertSendDirection(),v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",l,f);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((b,M)=>{M<=f?b.active=!0:b.active=!1}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(l,p.encodings);const m=await this._pc.createOffer();v.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const S={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async setRtpEncodingParameters(l,f){this.assertNotClosed(),this.assertSendDirection(),v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",l,f);const u=this._mapMidTransceiver.get(l);if(!u)throw new Error("associated RTCRtpTransceiver not found");const p=u.sender.getParameters();p.encodings.forEach((b,M)=>{p.encodings[M]={...b,...f}}),await u.sender.setParameters(p),this._remoteSdp.muxMediaSectionSimulcast(l,p.encodings);const m=await this._pc.createOffer();v.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const S={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S)}async getSenderStats(l){this.assertNotClosed(),this.assertSendDirection();const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.sender.getStats()}async sendDataChannel({ordered:l,maxPacketLifeTime:f,maxRetransmits:u,label:p,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const S={negotiated:!0,id:this._nextSendSctpStreamId,ordered:l,maxPacketLifeTime:f,maxRetransmits:u,protocol:m};v.debug("sendDataChannel() [options:%o]",S);const b=this._pc.createDataChannel(p,S);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%k.MIS,!this._hasDataChannelMediaSection){const C=await this._pc.createOffer(),O=r.parse(C.sdp),U=O.media.find(N=>N.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),v.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",C),await this._pc.setLocalDescription(C),this._remoteSdp.sendSctpAssociation({offerMediaObject:U});const H={type:"answer",sdp:this._remoteSdp.getSdp()};v.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",H),await this._pc.setRemoteDescription(H),this._hasDataChannelMediaSection=!0}const M={streamId:S.id,ordered:S.ordered,maxPacketLifeTime:S.maxPacketLifeTime,maxRetransmits:S.maxRetransmits};return{dataChannel:b,sctpStreamParameters:M}}async receive(l){this.assertNotClosed(),this.assertRecvDirection();const f=[],u=new Map;for(const b of l){const{trackId:M,kind:C,rtpParameters:O,streamId:U}=b;v.debug("receive() [trackId:%s, kind:%s]",M,C);const H=O.mid??String(this._mapMidTransceiver.size);u.set(M,H),this._remoteSdp.receive({mid:H,kind:C,offerRtpParameters:O,streamId:U??O.rtcp.cname,trackId:M})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);for(const b of l){const{trackId:M,onRtpReceiver:C}=b;if(C){const O=u.get(M),U=this._pc.getTransceivers().find(H=>H.mid===O);if(!U)throw new Error("transceiver not found");C(U.receiver)}}let m=await this._pc.createAnswer();const S=r.parse(m.sdp);for(const b of l){const{trackId:M,rtpParameters:C}=b,O=u.get(M),U=S.media.find(H=>String(H.mid)===O);w.applyCodecParameters({offerRtpParameters:C,answerMediaObject:U})}m={type:"answer",sdp:r.write(S)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:S}),v.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const b of l){const{trackId:M}=b,C=u.get(M),O=this._pc.getTransceivers().find(U=>U.mid===C);if(O)this._mapMidTransceiver.set(C,O),f.push({localId:C,track:O.receiver.track,rtpReceiver:O.receiver});else throw new Error("new RTCRtpTransceiver not found")}return f}async stopReceiving(l){if(this.assertRecvDirection(),this._closed)return;for(const p of l){v.debug("stopReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const p of l)this._mapMidTransceiver.delete(p)}async pauseReceiving(l){this.assertNotClosed(),this.assertRecvDirection();for(const p of l){v.debug("pauseReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(l){this.assertNotClosed(),this.assertRecvDirection();for(const p of l){v.debug("resumeReceiving() [localId:%s]",p);const m=this._mapMidTransceiver.get(p);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(p)}const f={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);const u=await this._pc.createAnswer();v.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(l){this.assertNotClosed(),this.assertRecvDirection();const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");return f.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:l,label:f,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:p,ordered:m,maxPacketLifeTime:S,maxRetransmits:b}=l,M={negotiated:!0,id:p,ordered:m,maxPacketLifeTime:S,maxRetransmits:b,protocol:u};v.debug("receiveDataChannel() [options:%o]",M);const C=this._pc.createDataChannel(f,M);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const O={type:"offer",sdp:this._remoteSdp.getSdp()};v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",O),await this._pc.setRemoteDescription(O);const U=await this._pc.createAnswer();if(!this._transportReady){const H=r.parse(U.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:H})}v.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",U),await this._pc.setLocalDescription(U),this._hasDataChannelMediaSection=!0}return{dataChannel:C}}async setupTransport({localDtlsRole:l,localSdpObject:f}){f||(f=r.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:f});u.role=l,this._remoteSdp.updateDtlsRole(l==="client"?"server":"client"),await new Promise((p,m)=>{this.safeEmit("@connect",{dtlsParameters:u},p,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Us.ReactNativeUnifiedPlan=A,Us}var Bs={},fg;function hb(){if(fg)return Bs;fg=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.ReactNative=void 0;const r=zt(),c=Je(),o=Tt(),s=rt(),w=Ct(),y=mi(),_=zo(),T=Ut(),E=gi(),R=new c.Logger("ReactNative"),D="ReactNative",v={OS:1024,MIS:1024};let L=class Rv extends T.HandlerInterface{constructor(){super();z(this,"_direction");z(this,"_remoteSdp");z(this,"_sendingRtpParametersByKind");z(this,"_sendingRemoteRtpParametersByKind");z(this,"_forcedLocalDtlsRole");z(this,"_pc");z(this,"_sendStream",new MediaStream);z(this,"_mapSendLocalIdTrack",new Map);z(this,"_nextSendLocalId",0);z(this,"_mapRecvLocalIdInfo",new Map);z(this,"_hasDataChannelMediaSection",!1);z(this,"_nextSendSctpStreamId",0);z(this,"_transportReady",!1)}static createFactory(){return()=>new Rv}get name(){return D}close(){if(R.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const g=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const h=await g.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{g.close()}catch{}const l=r.parse(h.sdp);return y.extractRtpCapabilities({sdpObject:l})}catch(h){try{g.close()}catch{}throw h}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:g,iceParameters:h,iceCandidates:l,dtlsParameters:f,sctpParameters:u,iceServers:p,iceTransportPolicy:m,additionalSettings:S,proprietaryConstraints:b,extendedRtpCapabilities:M}){R.debug("run()"),this._direction=g,this._remoteSdp=new E.RemoteSdp({iceParameters:h,iceCandidates:l,dtlsParameters:f,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:w.getSendingRtpParameters("audio",M),video:w.getSendingRtpParameters("video",M)},this._sendingRemoteRtpParametersByKind={audio:w.getSendingRemoteRtpParameters("audio",M),video:w.getSendingRemoteRtpParameters("video",M)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:p??[],iceTransportPolicy:m??"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...S},b),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.addEventListener("icecandidateerror",C=>{this.emit("@icecandidateerror",C)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":{this.emit("@connectionstatechange","connecting");break}case"connected":case"completed":{this.emit("@connectionstatechange","connected");break}case"failed":{this.emit("@connectionstatechange","failed");break}case"disconnected":{this.emit("@connectionstatechange","disconnected");break}case"closed":{this.emit("@connectionstatechange","closed");break}}})}async updateIceServers(g){R.debug("updateIceServers()");const h=this._pc.getConfiguration();h.iceServers=g,this._pc.setConfiguration(h)}async restartIce(g){if(R.debug("restartIce()"),this._remoteSdp.updateIceParameters(g),!!this._transportReady)if(this._direction==="send"){const h=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this._pc.getStats()}async send({track:g,encodings:h,codecOptions:l,codec:f}){this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",g.kind,g.id),f&&R.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(g),this._pc.addStream(this._sendStream);let u=await this._pc.createOffer(),p=r.parse(u.sdp);p.extmapAllowMixed&&this._remoteSdp.setSessionExtmapAllowMixed();let m;const S=s.clone(this._sendingRtpParametersByKind[g.kind]);S.codecs=w.reduceCodecs(S.codecs);const b=s.clone(this._sendingRemoteRtpParametersByKind[g.kind]);if(b.codecs=w.reduceCodecs(b.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),g.kind==="video"&&h&&h.length>1&&(R.debug("send() | enabling simulcast"),p=r.parse(u.sdp),m=p.media.find(O=>O.type==="video"),_.addLegacySimulcast({offerMediaObject:m,track:g,numStreams:h.length}),u={type:"offer",sdp:r.write(p)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u),p=r.parse(this._pc.localDescription.sdp),m=p.media.find(O=>O.type===g.kind),S.rtcp.cname=y.getCname({offerMediaObject:m}),S.encodings=_.getRtpEncodings({offerMediaObject:m,track:g}),h)for(let O=0;O<S.encodings.length;++O)h[O]&&Object.assign(S.encodings[O],h[O]);if(S.encodings.length>1&&(S.codecs[0].mimeType.toLowerCase()==="video/vp8"||S.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const O of S.encodings)O.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:m,offerRtpParameters:S,answerRtpParameters:b,codecOptions:l});const M={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),await this._pc.setRemoteDescription(M);const C=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(C,g),{localId:C,rtpParameters:S}}async stopSending(g){this.assertSendDirection(),R.debug("stopSending() [localId:%s]",g);const h=this._mapSendLocalIdTrack.get(g);if(!h)throw new Error("track not found");this._mapSendLocalIdTrack.delete(g),this._sendStream.removeTrack(h),this._pc.addStream(this._sendStream);const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l);try{await this._pc.setLocalDescription(l)}catch(u){if(this._sendStream.getTracks().length===0){R.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());return}throw u}if(this._pc.signalingState==="stable")return;const f={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async pauseSending(g){}async resumeSending(g){}async replaceTrack(g,h){throw new o.UnsupportedError("not implemented")}async setMaxSpatialLayer(g,h){throw new o.UnsupportedError("not implemented")}async setRtpEncodingParameters(g,h){throw new o.UnsupportedError("not implemented")}async getSenderStats(g){throw new o.UnsupportedError("not implemented")}async sendDataChannel({ordered:g,maxPacketLifeTime:h,maxRetransmits:l,label:f,protocol:u}){this.assertSendDirection();const p={negotiated:!0,id:this._nextSendSctpStreamId,ordered:g,maxPacketLifeTime:h,maxRetransmitTime:h,maxRetransmits:l,protocol:u};R.debug("sendDataChannel() [options:%o]",p);const m=this._pc.createDataChannel(f,p);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){const b=await this._pc.createOffer(),M=r.parse(b.sdp),C=M.media.find(U=>U.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:M}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",b),await this._pc.setLocalDescription(b),this._remoteSdp.sendSctpAssociation({offerMediaObject:C});const O={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O),this._hasDataChannelMediaSection=!0}const S={streamId:p.id,ordered:p.ordered,maxPacketLifeTime:p.maxPacketLifeTime,maxRetransmits:p.maxRetransmits};return{dataChannel:m,sctpStreamParameters:S}}async receive(g){this.assertRecvDirection();const h=[],l=new Map;for(const m of g){const{trackId:S,kind:b,rtpParameters:M}=m;R.debug("receive() [trackId:%s, kind:%s]",S,b);const C=b;let O=m.streamId??M.rtcp.cname;R.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),O+=`-hack-${s.generateRandomNumber()}`,l.set(S,O),this._remoteSdp.receive({mid:C,kind:b,offerRtpParameters:M,streamId:O,trackId:S})}const f={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);let u=await this._pc.createAnswer();const p=r.parse(u.sdp);for(const m of g){const{kind:S,rtpParameters:b}=m,M=S,C=p.media.find(O=>String(O.mid)===M);y.applyCodecParameters({offerRtpParameters:b,answerMediaObject:C})}u={type:"answer",sdp:r.write(p)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const m of g){const{kind:S,trackId:b,rtpParameters:M}=m,C=b,O=S,U=l.get(b),N=this._pc.getRemoteStreams().find(Y=>Y.id===U).getTrackById(C);if(!N)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(C,{mid:O,rtpParameters:M}),h.push({localId:C,track:N})}return h}async stopReceiving(g){this.assertRecvDirection();for(const f of g){R.debug("stopReceiving() [localId:%s]",f);const{mid:u,rtpParameters:p}=this._mapRecvLocalIdInfo.get(f)??{};this._mapRecvLocalIdInfo.delete(f),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:p})}const h={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",h),await this._pc.setRemoteDescription(h);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async pauseReceiving(g){}async resumeReceiving(g){}async getReceiverStats(g){throw new o.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:g,label:h,protocol:l}){this.assertRecvDirection();const{streamId:f,ordered:u,maxPacketLifeTime:p,maxRetransmits:m}=g,S={negotiated:!0,id:f,ordered:u,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:m,protocol:l};R.debug("receiveDataChannel() [options:%o]",S);const b=this._pc.createDataChannel(h,S);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const M={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",M),await this._pc.setRemoteDescription(M);const C=await this._pc.createAnswer();if(!this._transportReady){const O=r.parse(C.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",C),await this._pc.setLocalDescription(C),this._hasDataChannelMediaSection=!0}return{dataChannel:b}}async setupTransport({localDtlsRole:g,localSdpObject:h}){h||(h=r.parse(this._pc.localDescription.sdp));const l=y.extractDtlsParameters({sdpObject:h});l.role=g,this._remoteSdp.updateDtlsRole(g==="client"?"server":"client"),await new Promise((f,u)=>{this.safeEmit("@connect",{dtlsParameters:l},f,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}};return Bs.ReactNative=L,Bs}var pg;function Cv(){if(pg)return ra;pg=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.Device=void 0,ra.detectDeviceAsync=p,ra.detectDevice=m;const r=Q0(),c=Je(),o=En(),s=Tt(),w=rt(),y=Ct(),_=uv(),T=ib(),E=nb(),R=ab(),D=rb(),v=sb(),L=cb(),k=ob(),A=lb(),g=db(),h=fb(),l=pb(),f=hb(),u=new c.Logger("Device");async function p(M){u.debug("detectDeviceAsync() [userAgent:%s]",M),!M&&typeof navigator=="object"&&(M=navigator.userAgent);const C=await(0,r.UAParser)(M).withFeatureCheck();return b(C)}function m(M){u.debug("detectDevice() [userAgent:%s]",M),!M&&typeof navigator=="object"&&(M=navigator.userAgent);const C=(0,r.UAParser)(M);return b(C)}let S=class Tv{constructor({handlerName:C,handlerFactory:O}={}){z(this,"_handlerFactory");z(this,"_handlerName");z(this,"_loaded",!1);z(this,"_extendedRtpCapabilities");z(this,"_recvRtpCapabilities");z(this,"_canProduceByKind");z(this,"_sctpCapabilities");z(this,"_observer",new o.EnhancedEventEmitter);if(u.debug("constructor()"),C&&O)throw new TypeError("just one of handlerName or handlerInterface can be given");if(O)this._handlerFactory=O;else{if(C)u.debug("constructor() | handler given: %s",C);else if(C=m(),C)u.debug("constructor() | detected handler: %s",C);else throw new s.UnsupportedError("device not supported");switch(C){case"Chrome111":{this._handlerFactory=T.Chrome111.createFactory();break}case"Chrome74":{this._handlerFactory=E.Chrome74.createFactory();break}case"Chrome70":{this._handlerFactory=R.Chrome70.createFactory();break}case"Chrome67":{this._handlerFactory=D.Chrome67.createFactory();break}case"Chrome55":{this._handlerFactory=v.Chrome55.createFactory();break}case"Firefox120":{this._handlerFactory=L.Firefox120.createFactory();break}case"Firefox60":{this._handlerFactory=k.Firefox60.createFactory();break}case"Safari12":{this._handlerFactory=A.Safari12.createFactory();break}case"Safari11":{this._handlerFactory=g.Safari11.createFactory();break}case"Edge11":{this._handlerFactory=h.Edge11.createFactory();break}case"ReactNativeUnifiedPlan":{this._handlerFactory=l.ReactNativeUnifiedPlan.createFactory();break}case"ReactNative":{this._handlerFactory=f.ReactNative.createFactory();break}default:throw new TypeError(`unknown handlerName "${C}"`)}}const U=this._handlerFactory();this._handlerName=U.name,U.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}static async factory({handlerName:C,handlerFactory:O}={}){if(u.debug("factory()"),C&&O)throw new TypeError("just one of handlerName or handlerInterface can be given");if(!C&&!O&&(C=await p(),!C))throw new s.UnsupportedError("device not supported");return new Tv({handlerName:C,handlerFactory:O})}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new s.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new s.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:C,preferLocalCodecsOrder:O=!1}){u.debug("load() [routerRtpCapabilities:%o]",C);let U;try{if(this._loaded)throw new s.InvalidStateError("already loaded");const H=w.clone(C);y.validateRtpCapabilities(H),U=this._handlerFactory();const N=await U.getNativeRtpCapabilities();u.debug("load() | got native RTP capabilities:%o",N);const Y=w.clone(N);y.validateRtpCapabilities(Y),this._extendedRtpCapabilities=y.getExtendedRtpCapabilities(Y,H,O),u.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=y.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=y.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=y.getRecvRtpCapabilities(this._extendedRtpCapabilities),y.validateRtpCapabilities(this._recvRtpCapabilities),u.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await U.getNativeSctpCapabilities(),u.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),y.validateSctpCapabilities(this._sctpCapabilities),u.debug("load() succeeded"),this._loaded=!0,U.close()}catch(H){throw U&&U.close(),H}}canProduce(C){if(this._loaded){if(C!=="audio"&&C!=="video")throw new TypeError(`invalid kind "${C}"`)}else throw new s.InvalidStateError("not loaded");return this._canProduceByKind[C]}createSendTransport({id:C,iceParameters:O,iceCandidates:U,dtlsParameters:H,sctpParameters:N,iceServers:Y,iceTransportPolicy:Z,additionalSettings:j,proprietaryConstraints:V,appData:te}){return u.debug("createSendTransport()"),this.createTransport({direction:"send",id:C,iceParameters:O,iceCandidates:U,dtlsParameters:H,sctpParameters:N,iceServers:Y,iceTransportPolicy:Z,additionalSettings:j,proprietaryConstraints:V,appData:te})}createRecvTransport({id:C,iceParameters:O,iceCandidates:U,dtlsParameters:H,sctpParameters:N,iceServers:Y,iceTransportPolicy:Z,additionalSettings:j,proprietaryConstraints:V,appData:te}){return u.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:C,iceParameters:O,iceCandidates:U,dtlsParameters:H,sctpParameters:N,iceServers:Y,iceTransportPolicy:Z,additionalSettings:j,proprietaryConstraints:V,appData:te})}createTransport({direction:C,id:O,iceParameters:U,iceCandidates:H,dtlsParameters:N,sctpParameters:Y,iceServers:Z,iceTransportPolicy:j,additionalSettings:V,proprietaryConstraints:te,appData:le}){if(this._loaded){if(typeof O!="string")throw new TypeError("missing id");if(typeof U!="object")throw new TypeError("missing iceParameters");if(Array.isArray(H)){if(typeof N!="object")throw new TypeError("missing dtlsParameters");if(Y&&typeof Y!="object")throw new TypeError("wrong sctpParameters");if(le&&typeof le!="object")throw new TypeError("if given, appData must be an object")}else throw new TypeError("missing iceCandidates")}else throw new s.InvalidStateError("not loaded");const q=new _.Transport({direction:C,id:O,iceParameters:U,iceCandidates:H,dtlsParameters:N,sctpParameters:Y,iceServers:Z,iceTransportPolicy:j,additionalSettings:V,proprietaryConstraints:te,appData:le,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",q),q}};ra.Device=S;function b(M){var C,O,U,H;if(typeof navigator=="object"&&navigator.product==="ReactNative"){if(u.debug("detectDeviceImpl() | React-Native detected"),typeof RTCPeerConnection>"u"){u.warn("detectDeviceImpl() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return typeof RTCRtpTransceiver<"u"?(u.debug("detectDeviceImpl() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(u.debug("detectDeviceImpl() | ReactNative PlanB handler chosen"),"ReactNative")}else{u.debug("detectDeviceImpl() | browser detected [userAgent:%s, parsed:%o]",M.ua,M);const N=M.browser,Y=(C=N.name)==null?void 0:C.toLowerCase(),Z=parseInt(N.major??"0"),V=(O=M.engine.name)==null?void 0:O.toLowerCase(),te=M.os,le=(U=te.name)==null?void 0:U.toLowerCase(),q=parseFloat(te.version??"0"),ae=(H=M.device.model)==null?void 0:H.toLowerCase(),ne=le==="ios"||ae==="ipad",se=Y&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(Y),Se=Y&&["firefox","mobile firefox","mobile focus"].includes(Y),me=Y&&["safari","mobile safari"].includes(Y),it=Y&&["edge"].includes(Y);if((se||it)&&!ne&&Z>=111)return"Chrome111";if(se&&!ne&&Z>=74||it&&!ne&&Z>=88)return"Chrome74";if(se&&!ne&&Z>=70)return"Chrome70";if(se&&!ne&&Z>=67)return"Chrome67";if(se&&!ne&&Z>=55)return"Chrome55";if(Se&&!ne&&Z>=120)return"Firefox120";if(Se&&!ne&&Z>=60)return"Firefox60";if(Se&&ne&&q>=14.3)return"Safari12";if(me&&Z>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(me&&Z>=11)return"Safari11";if(it&&!ne&&Z>=11&&Z<=18)return"Edge11";if(V==="webkit"&&ne&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(V==="blink"){const ke=M.ua.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(ke){const Et=Number(ke[1]);return Et>=111?"Chrome111":Et>=74?"Chrome74":Et>=70?"Chrome70":Et>=67?"Chrome67":"Chrome55"}else return"Chrome111"}else{u.warn("detectDeviceImpl() | browser not supported [name:%s, version:%s]",Y,Z);return}}}return ra}var cu={},hg;function mb(){return hg||(hg=1,Object.defineProperty(cu,"__esModule",{value:!0})),cu}var ou={},mg;function gb(){return mg||(mg=1,Object.defineProperty(ou,"__esModule",{value:!0})),ou}var gg;function vb(){return gg||(gg=1,function(r){var c=aa&&aa.__createBinding||(Object.create?function(s,w,y,_){_===void 0&&(_=y);var T=Object.getOwnPropertyDescriptor(w,y);(!T||("get"in T?!w.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return w[y]}}),Object.defineProperty(s,_,T)}:function(s,w,y,_){_===void 0&&(_=y),s[_]=w[y]}),o=aa&&aa.__exportStar||function(s,w){for(var y in s)y!=="default"&&!Object.prototype.hasOwnProperty.call(w,y)&&c(w,s,y)};Object.defineProperty(r,"__esModule",{value:!0}),o(Cv(),r),o(uv(),r),o(cv(),r),o(ov(),r),o(lv(),r),o(dv(),r),o(mb(),r),o(gb(),r),o(Ut(),r),o(Tt(),r)}(aa)),aa}var qs={},Is={},lu={},oo={},vg;function _b(){return vg||(vg=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),oo}var lo={},_g;function yb(){return _g||(_g=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.default="00000000-0000-0000-0000-000000000000"),lo}var uo={},fo={},po={},yg;function bb(){return yg||(yg=1,Object.defineProperty(po,"__esModule",{value:!0}),po.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),po}var bg;function Uo(){if(bg)return fo;bg=1,Object.defineProperty(fo,"__esModule",{value:!0});const r=bb();function c(o){return typeof o=="string"&&r.default.test(o)}return fo.default=c,fo}var Sg;function Bo(){if(Sg)return uo;Sg=1,Object.defineProperty(uo,"__esModule",{value:!0});const r=Uo();function c(o){if(!(0,r.default)(o))throw TypeError("Invalid UUID");let s;return Uint8Array.of((s=parseInt(o.slice(0,8),16))>>>24,s>>>16&255,s>>>8&255,s&255,(s=parseInt(o.slice(9,13),16))>>>8,s&255,(s=parseInt(o.slice(14,18),16))>>>8,s&255,(s=parseInt(o.slice(19,23),16))>>>8,s&255,(s=parseInt(o.slice(24,36),16))/1099511627776&255,s/4294967296&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255)}return uo.default=c,uo}var tr={},wg;function xn(){if(wg)return tr;wg=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.unsafeStringify=void 0;const r=Uo(),c=[];for(let w=0;w<256;++w)c.push((w+256).toString(16).slice(1));function o(w,y=0){return(c[w[y+0]]+c[w[y+1]]+c[w[y+2]]+c[w[y+3]]+"-"+c[w[y+4]]+c[w[y+5]]+"-"+c[w[y+6]]+c[w[y+7]]+"-"+c[w[y+8]]+c[w[y+9]]+"-"+c[w[y+10]]+c[w[y+11]]+c[w[y+12]]+c[w[y+13]]+c[w[y+14]]+c[w[y+15]]).toLowerCase()}tr.unsafeStringify=o;function s(w,y=0){const _=o(w,y);if(!(0,r.default)(_))throw TypeError("Stringified UUID is invalid");return _}return tr.default=s,tr}var ir={},ho={},Rg;function Du(){if(Rg)return ho;Rg=1,Object.defineProperty(ho,"__esModule",{value:!0});let r;const c=new Uint8Array(16);function o(){if(!r){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(c)}return ho.default=o,ho}var Tg;function Ev(){if(Tg)return ir;Tg=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.updateV1State=void 0;const r=Du(),c=xn(),o={};function s(_,T,E){var v;let R;const D=(_==null?void 0:_._v6)??!1;if(_){const L=Object.keys(_);L.length===1&&L[0]==="_v6"&&(_=void 0)}if(_)R=y(_.random??((v=_.rng)==null?void 0:v.call(_))??(0,r.default)(),_.msecs,_.nsecs,_.clockseq,_.node,T,E);else{const L=Date.now(),k=(0,r.default)();w(o,L,k),R=y(k,o.msecs,o.nsecs,D?void 0:o.clockseq,D?void 0:o.node,T,E)}return T??(0,c.unsafeStringify)(R)}function w(_,T,E){return _.msecs??(_.msecs=-1/0),_.nsecs??(_.nsecs=0),T===_.msecs?(_.nsecs++,_.nsecs>=1e4&&(_.node=void 0,_.nsecs=0)):T>_.msecs?_.nsecs=0:T<_.msecs&&(_.node=void 0),_.node||(_.node=E.slice(10,16),_.node[0]|=1,_.clockseq=(E[8]<<8|E[9])&16383),_.msecs=T,_}ir.updateV1State=w;function y(_,T,E,R,D,v,L=0){if(_.length<16)throw new Error("Random bytes length must be >= 16");if(!v)v=new Uint8Array(16),L=0;else if(L<0||L+16>v.length)throw new RangeError(`UUID byte range ${L}:${L+15} is out of buffer bounds`);T??(T=Date.now()),E??(E=0),R??(R=(_[8]<<8|_[9])&16383),D??(D=_.slice(10,16)),T+=122192928e5;const k=((T&268435455)*1e4+E)%4294967296;v[L++]=k>>>24&255,v[L++]=k>>>16&255,v[L++]=k>>>8&255,v[L++]=k&255;const A=T/4294967296*1e4&268435455;v[L++]=A>>>8&255,v[L++]=A&255,v[L++]=A>>>24&15|16,v[L++]=A>>>16&255,v[L++]=R>>>8|128,v[L++]=R&255;for(let g=0;g<6;++g)v[L++]=D[g];return v}return ir.default=s,ir}var mo={},Cg;function Dv(){if(Cg)return mo;Cg=1,Object.defineProperty(mo,"__esModule",{value:!0});const r=Bo(),c=xn();function o(w){const y=typeof w=="string"?(0,r.default)(w):w,_=s(y);return typeof w=="string"?(0,c.unsafeStringify)(_):_}mo.default=o;function s(w){return Uint8Array.of((w[6]&15)<<4|w[7]>>4&15,(w[7]&15)<<4|(w[4]&240)>>4,(w[4]&15)<<4|(w[5]&240)>>4,(w[5]&15)<<4|(w[0]&240)>>4,(w[0]&15)<<4|(w[1]&240)>>4,(w[1]&15)<<4|(w[2]&240)>>4,96|w[2]&15,w[3],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])}return mo}var du={},go={},Eg;function Sb(){if(Eg)return go;Eg=1,Object.defineProperty(go,"__esModule",{value:!0});function r(L){const k=w(L),A=s(k,L.length*8);return c(A)}function c(L){const k=new Uint8Array(L.length*4);for(let A=0;A<L.length*4;A++)k[A]=L[A>>2]>>>A%4*8&255;return k}function o(L){return(L+64>>>9<<4)+14+1}function s(L,k){const A=new Uint32Array(o(k)).fill(0);A.set(L),A[k>>5]|=128<<k%32,A[A.length-1]=k,L=A;let g=1732584193,h=-271733879,l=-1732584194,f=271733878;for(let u=0;u<L.length;u+=16){const p=g,m=h,S=l,b=f;g=E(g,h,l,f,L[u],7,-680876936),f=E(f,g,h,l,L[u+1],12,-389564586),l=E(l,f,g,h,L[u+2],17,606105819),h=E(h,l,f,g,L[u+3],22,-1044525330),g=E(g,h,l,f,L[u+4],7,-176418897),f=E(f,g,h,l,L[u+5],12,1200080426),l=E(l,f,g,h,L[u+6],17,-1473231341),h=E(h,l,f,g,L[u+7],22,-45705983),g=E(g,h,l,f,L[u+8],7,1770035416),f=E(f,g,h,l,L[u+9],12,-1958414417),l=E(l,f,g,h,L[u+10],17,-42063),h=E(h,l,f,g,L[u+11],22,-1990404162),g=E(g,h,l,f,L[u+12],7,1804603682),f=E(f,g,h,l,L[u+13],12,-40341101),l=E(l,f,g,h,L[u+14],17,-1502002290),h=E(h,l,f,g,L[u+15],22,1236535329),g=R(g,h,l,f,L[u+1],5,-165796510),f=R(f,g,h,l,L[u+6],9,-1069501632),l=R(l,f,g,h,L[u+11],14,643717713),h=R(h,l,f,g,L[u],20,-373897302),g=R(g,h,l,f,L[u+5],5,-701558691),f=R(f,g,h,l,L[u+10],9,38016083),l=R(l,f,g,h,L[u+15],14,-660478335),h=R(h,l,f,g,L[u+4],20,-405537848),g=R(g,h,l,f,L[u+9],5,568446438),f=R(f,g,h,l,L[u+14],9,-1019803690),l=R(l,f,g,h,L[u+3],14,-187363961),h=R(h,l,f,g,L[u+8],20,1163531501),g=R(g,h,l,f,L[u+13],5,-1444681467),f=R(f,g,h,l,L[u+2],9,-51403784),l=R(l,f,g,h,L[u+7],14,1735328473),h=R(h,l,f,g,L[u+12],20,-1926607734),g=D(g,h,l,f,L[u+5],4,-378558),f=D(f,g,h,l,L[u+8],11,-2022574463),l=D(l,f,g,h,L[u+11],16,1839030562),h=D(h,l,f,g,L[u+14],23,-35309556),g=D(g,h,l,f,L[u+1],4,-1530992060),f=D(f,g,h,l,L[u+4],11,1272893353),l=D(l,f,g,h,L[u+7],16,-155497632),h=D(h,l,f,g,L[u+10],23,-1094730640),g=D(g,h,l,f,L[u+13],4,681279174),f=D(f,g,h,l,L[u],11,-358537222),l=D(l,f,g,h,L[u+3],16,-722521979),h=D(h,l,f,g,L[u+6],23,76029189),g=D(g,h,l,f,L[u+9],4,-640364487),f=D(f,g,h,l,L[u+12],11,-421815835),l=D(l,f,g,h,L[u+15],16,530742520),h=D(h,l,f,g,L[u+2],23,-995338651),g=v(g,h,l,f,L[u],6,-198630844),f=v(f,g,h,l,L[u+7],10,1126891415),l=v(l,f,g,h,L[u+14],15,-1416354905),h=v(h,l,f,g,L[u+5],21,-57434055),g=v(g,h,l,f,L[u+12],6,1700485571),f=v(f,g,h,l,L[u+3],10,-1894986606),l=v(l,f,g,h,L[u+10],15,-1051523),h=v(h,l,f,g,L[u+1],21,-2054922799),g=v(g,h,l,f,L[u+8],6,1873313359),f=v(f,g,h,l,L[u+15],10,-30611744),l=v(l,f,g,h,L[u+6],15,-1560198380),h=v(h,l,f,g,L[u+13],21,1309151649),g=v(g,h,l,f,L[u+4],6,-145523070),f=v(f,g,h,l,L[u+11],10,-1120210379),l=v(l,f,g,h,L[u+2],15,718787259),h=v(h,l,f,g,L[u+9],21,-343485551),g=y(g,p),h=y(h,m),l=y(l,S),f=y(f,b)}return Uint32Array.of(g,h,l,f)}function w(L){if(L.length===0)return new Uint32Array;const k=new Uint32Array(o(L.length*8)).fill(0);for(let A=0;A<L.length;A++)k[A>>2]|=(L[A]&255)<<A%4*8;return k}function y(L,k){const A=(L&65535)+(k&65535);return(L>>16)+(k>>16)+(A>>16)<<16|A&65535}function _(L,k){return L<<k|L>>>32-k}function T(L,k,A,g,h,l){return y(_(y(y(k,L),y(g,l)),h),A)}function E(L,k,A,g,h,l,f){return T(k&A|~k&g,L,k,h,l,f)}function R(L,k,A,g,h,l,f){return T(k&g|A&~g,L,k,h,l,f)}function D(L,k,A,g,h,l,f){return T(k^A^g,L,k,h,l,f)}function v(L,k,A,g,h,l,f){return T(A^(k|~g),L,k,h,l,f)}return go.default=r,go}var Ti={},Dg;function Mo(){if(Dg)return Ti;Dg=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.URL=Ti.DNS=Ti.stringToBytes=void 0;const r=Bo(),c=xn();function o(w){w=unescape(encodeURIComponent(w));const y=new Uint8Array(w.length);for(let _=0;_<w.length;++_)y[_]=w.charCodeAt(_);return y}Ti.stringToBytes=o,Ti.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ti.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function s(w,y,_,T,E,R){const D=typeof _=="string"?o(_):_,v=typeof T=="string"?(0,r.default)(T):T;if(typeof T=="string"&&(T=(0,r.default)(T)),(T==null?void 0:T.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let L=new Uint8Array(16+D.length);if(L.set(v),L.set(D,v.length),L=y(L),L[6]=L[6]&15|w,L[8]=L[8]&63|128,E){R=R||0;for(let k=0;k<16;++k)E[R+k]=L[k];return E}return(0,c.unsafeStringify)(L)}return Ti.default=s,Ti}var xg;function wb(){return xg||(xg=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0;const c=Sb(),o=Mo();var s=Mo();Object.defineProperty(r,"DNS",{enumerable:!0,get:function(){return s.DNS}}),Object.defineProperty(r,"URL",{enumerable:!0,get:function(){return s.URL}});function w(y,_,T,E){return(0,o.default)(48,c.default,y,_,T,E)}w.DNS=o.DNS,w.URL=o.URL,r.default=w}(du)),du}var vo={},_o={},Mg;function Rb(){if(Mg)return _o;Mg=1,Object.defineProperty(_o,"__esModule",{value:!0});const r=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return _o.default={randomUUID:r},_o}var Lg;function Tb(){if(Lg)return vo;Lg=1,Object.defineProperty(vo,"__esModule",{value:!0});const r=Rb(),c=Du(),o=xn();function s(w,y,_){var E;if(r.default.randomUUID&&!y&&!w)return r.default.randomUUID();w=w||{};const T=w.random??((E=w.rng)==null?void 0:E.call(w))??(0,c.default)();if(T.length<16)throw new Error("Random bytes length must be >= 16");if(T[6]=T[6]&15|64,T[8]=T[8]&63|128,y){if(_=_||0,_<0||_+16>y.length)throw new RangeError(`UUID byte range ${_}:${_+15} is out of buffer bounds`);for(let R=0;R<16;++R)y[_+R]=T[R];return y}return(0,o.unsafeStringify)(T)}return vo.default=s,vo}var uu={},yo={},Og;function Cb(){if(Og)return yo;Og=1,Object.defineProperty(yo,"__esModule",{value:!0});function r(s,w,y,_){switch(s){case 0:return w&y^~w&_;case 1:return w^y^_;case 2:return w&y^w&_^y&_;case 3:return w^y^_}}function c(s,w){return s<<w|s>>>32-w}function o(s){const w=[1518500249,1859775393,2400959708,3395469782],y=[1732584193,4023233417,2562383102,271733878,3285377520],_=new Uint8Array(s.length+1);_.set(s),_[s.length]=128,s=_;const T=s.length/4+2,E=Math.ceil(T/16),R=new Array(E);for(let D=0;D<E;++D){const v=new Uint32Array(16);for(let L=0;L<16;++L)v[L]=s[D*64+L*4]<<24|s[D*64+L*4+1]<<16|s[D*64+L*4+2]<<8|s[D*64+L*4+3];R[D]=v}R[E-1][14]=(s.length-1)*8/Math.pow(2,32),R[E-1][14]=Math.floor(R[E-1][14]),R[E-1][15]=(s.length-1)*8&4294967295;for(let D=0;D<E;++D){const v=new Uint32Array(80);for(let l=0;l<16;++l)v[l]=R[D][l];for(let l=16;l<80;++l)v[l]=c(v[l-3]^v[l-8]^v[l-14]^v[l-16],1);let L=y[0],k=y[1],A=y[2],g=y[3],h=y[4];for(let l=0;l<80;++l){const f=Math.floor(l/20),u=c(L,5)+r(f,k,A,g)+h+w[f]+v[l]>>>0;h=g,g=A,A=c(k,30)>>>0,k=L,L=u}y[0]=y[0]+L>>>0,y[1]=y[1]+k>>>0,y[2]=y[2]+A>>>0,y[3]=y[3]+g>>>0,y[4]=y[4]+h>>>0}return Uint8Array.of(y[0]>>24,y[0]>>16,y[0]>>8,y[0],y[1]>>24,y[1]>>16,y[1]>>8,y[1],y[2]>>24,y[2]>>16,y[2]>>8,y[2],y[3]>>24,y[3]>>16,y[3]>>8,y[3],y[4]>>24,y[4]>>16,y[4]>>8,y[4])}return yo.default=o,yo}var kg;function Eb(){return kg||(kg=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0;const c=Cb(),o=Mo();var s=Mo();Object.defineProperty(r,"DNS",{enumerable:!0,get:function(){return s.DNS}}),Object.defineProperty(r,"URL",{enumerable:!0,get:function(){return s.URL}});function w(y,_,T,E){return(0,o.default)(80,c.default,y,_,T,E)}w.DNS=o.DNS,w.URL=o.URL,r.default=w}(uu)),uu}var bo={},Ag;function Db(){if(Ag)return bo;Ag=1,Object.defineProperty(bo,"__esModule",{value:!0});const r=xn(),c=Ev(),o=Dv();function s(w,y,_){w??(w={}),_??(_=0);let T=(0,c.default)({...w,_v6:!0},new Uint8Array(16));if(T=(0,o.default)(T),y){for(let E=0;E<16;E++)y[_+E]=T[E];return y}return(0,r.unsafeStringify)(T)}return bo.default=s,bo}var So={},Pg;function xb(){if(Pg)return So;Pg=1,Object.defineProperty(So,"__esModule",{value:!0});const r=Bo(),c=xn();function o(w){const y=typeof w=="string"?(0,r.default)(w):w,_=s(y);return typeof w=="string"?(0,c.unsafeStringify)(_):_}So.default=o;function s(w){return Uint8Array.of((w[3]&15)<<4|w[4]>>4&15,(w[4]&15)<<4|(w[5]&240)>>4,(w[5]&15)<<4|w[6]&15,w[7],(w[1]&15)<<4|(w[2]&240)>>4,(w[2]&15)<<4|(w[3]&240)>>4,16|(w[0]&240)>>4,(w[0]&15)<<4|(w[1]&240)>>4,w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])}return So}var nr={},Ng;function Mb(){if(Ng)return nr;Ng=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.updateV7State=void 0;const r=Du(),c=xn(),o={};function s(_,T,E){var D;let R;if(_)R=y(_.random??((D=_.rng)==null?void 0:D.call(_))??(0,r.default)(),_.msecs,_.seq,T,E);else{const v=Date.now(),L=(0,r.default)();w(o,v,L),R=y(L,o.msecs,o.seq,T,E)}return T??(0,c.unsafeStringify)(R)}function w(_,T,E){return _.msecs??(_.msecs=-1/0),_.seq??(_.seq=0),T>_.msecs?(_.seq=E[6]<<23|E[7]<<16|E[8]<<8|E[9],_.msecs=T):(_.seq=_.seq+1|0,_.seq===0&&_.msecs++),_}nr.updateV7State=w;function y(_,T,E,R,D=0){if(_.length<16)throw new Error("Random bytes length must be >= 16");if(!R)R=new Uint8Array(16),D=0;else if(D<0||D+16>R.length)throw new RangeError(`UUID byte range ${D}:${D+15} is out of buffer bounds`);return T??(T=Date.now()),E??(E=_[6]*127<<24|_[7]<<16|_[8]<<8|_[9]),R[D++]=T/1099511627776&255,R[D++]=T/4294967296&255,R[D++]=T/16777216&255,R[D++]=T/65536&255,R[D++]=T/256&255,R[D++]=T&255,R[D++]=112|E>>>28&15,R[D++]=E>>>20&255,R[D++]=128|E>>>14&63,R[D++]=E>>>6&255,R[D++]=E<<2&255|_[10]&3,R[D++]=_[11],R[D++]=_[12],R[D++]=_[13],R[D++]=_[14],R[D++]=_[15],R}return nr.default=s,nr}var wo={},jg;function Lb(){if(jg)return wo;jg=1,Object.defineProperty(wo,"__esModule",{value:!0});const r=Uo();function c(o){if(!(0,r.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}return wo.default=c,wo}var zg;function Ob(){return zg||(zg=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.version=r.validate=r.v7=r.v6ToV1=r.v6=r.v5=r.v4=r.v3=r.v1ToV6=r.v1=r.stringify=r.parse=r.NIL=r.MAX=void 0;var c=_b();Object.defineProperty(r,"MAX",{enumerable:!0,get:function(){return c.default}});var o=yb();Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return o.default}});var s=Bo();Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return s.default}});var w=xn();Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return w.default}});var y=Ev();Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return y.default}});var _=Dv();Object.defineProperty(r,"v1ToV6",{enumerable:!0,get:function(){return _.default}});var T=wb();Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return T.default}});var E=Tb();Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return E.default}});var R=Eb();Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return R.default}});var D=Db();Object.defineProperty(r,"v6",{enumerable:!0,get:function(){return D.default}});var v=xb();Object.defineProperty(r,"v6ToV1",{enumerable:!0,get:function(){return v.default}});var L=Mb();Object.defineProperty(r,"v7",{enumerable:!0,get:function(){return L.default}});var k=Uo();Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return k.default}});var A=Lb();Object.defineProperty(r,"version",{enumerable:!0,get:function(){return A.default}})}(lu)),lu}var Hs={},Ug;function kb(){if(Ug)return Hs;Ug=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.FakeEventTarget=void 0;let r=class{constructor(){z(this,"listeners",{})}addEventListener(o,s,w={}){var y;s&&((y=this.listeners)[o]??(y[o]=[]),this.listeners[o].push({callback:s,once:w.once===!0}))}removeEventListener(o,s){this.listeners[o]&&(this.listeners[o]=this.listeners[o].filter(w=>w.callback!==s))}dispatchEvent(o){if(!o||typeof o.type!="string")throw new Error("invalid event object");const s=this.listeners[o.type];if(!s)return!0;for(const w of[...s]){try{w.callback.call(this,o)}catch(y){setTimeout(()=>{throw y},0)}w.once&&this.removeEventListener(o.type,w.callback)}return!o.defaultPrevented}};return Hs.FakeEventTarget=r,Hs}var Ro={},Bg;function Ab(){if(Bg)return Ro;Bg=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.clone=r;function r(c){if(c!==void 0)return Number.isNaN(c)?NaN:typeof structuredClone=="function"?structuredClone(c):JSON.parse(JSON.stringify(c))}return Ro}var qg;function Pb(){var w,y,_,T,E,R,D,v,L,k,A,g,h,l,f,u;if(qg)return Is;qg=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.FakeMediaStreamTrack=void 0;const r=Ob(),c=kb(),o=Ab(),p=class p extends c.FakeEventTarget{constructor({kind:b,id:M,label:C,contentHint:O,enabled:U,muted:H,readyState:N,capabilities:Y,constraints:Z,settings:j,data:V}){super();_t(this,w);_t(this,y);_t(this,_);_t(this,T);_t(this,E);_t(this,R);_t(this,D);_t(this,v);_t(this,L);_t(this,k);_t(this,A);_t(this,g,null);_t(this,h,null);_t(this,l,null);_t(this,f,null);_t(this,u,null);He(this,w,M??(0,r.v4)()),He(this,y,b),He(this,_,C??""),He(this,D,O??""),He(this,E,U??!0),He(this,R,H??!1),He(this,T,N??"live"),He(this,v,Y??{}),He(this,L,Z??{}),He(this,k,j??{}),He(this,A,V??{})}get id(){return _e(this,w)}get kind(){return _e(this,y)}get label(){return _e(this,_)}get contentHint(){return _e(this,D)}set contentHint(b){He(this,D,b)}get enabled(){return _e(this,E)}set enabled(b){const M=_e(this,E)!==b;He(this,E,b),M&&this.dispatchEvent(new Event("enabledchange"))}get muted(){return _e(this,R)}get readyState(){return _e(this,T)}get data(){return _e(this,A)}set data(b){He(this,A,b)}get onmute(){return _e(this,g)}set onmute(b){_e(this,g)&&this.removeEventListener("mute",_e(this,g)),He(this,g,b),b&&this.addEventListener("mute",b)}get onunmute(){return _e(this,h)}set onunmute(b){_e(this,h)&&this.removeEventListener("unmute",_e(this,h)),He(this,h,b),b&&this.addEventListener("unmute",b)}get onended(){return _e(this,l)}set onended(b){_e(this,l)&&this.removeEventListener("ended",_e(this,l)),He(this,l,b),b&&this.addEventListener("ended",b)}get onenabledchange(){return _e(this,f)}set onenabledchange(b){_e(this,f)&&this.removeEventListener("enabledchange",_e(this,f)),He(this,f,b),b&&this.addEventListener("enabledchange",b)}get onstopped(){return _e(this,u)}set onstopped(b){_e(this,u)&&this.removeEventListener("stopped",_e(this,u)),He(this,u,b),b&&this.addEventListener("stopped",b)}addEventListener(b,M,C){super.addEventListener(b,M,C)}removeEventListener(b,M){super.removeEventListener(b,M)}stop(){_e(this,T)!=="ended"&&(He(this,T,"ended"),this.dispatchEvent(new Event("stopped")))}clone({id:b,data:M}={}){return new p({id:b??(0,r.v4)(),kind:_e(this,y),label:_e(this,_),contentHint:_e(this,D),enabled:_e(this,E),muted:_e(this,R),readyState:_e(this,T),capabilities:(0,o.clone)(_e(this,v)),constraints:(0,o.clone)(_e(this,L)),settings:(0,o.clone)(_e(this,k)),data:M??(0,o.clone)(_e(this,A))})}getCapabilities(){return _e(this,v)}getConstraints(){return _e(this,L)}async applyConstraints(b={}){return He(this,L,b),Promise.resolve()}getSettings(){return _e(this,k)}remoteStop(){_e(this,T)!=="ended"&&(He(this,T,"ended"),this.dispatchEvent(new Event("stopped")),this.dispatchEvent(new Event("ended")))}remoteMute(){_e(this,R)||(He(this,R,!0),this.dispatchEvent(new Event("mute")))}remoteUnmute(){_e(this,R)&&(He(this,R,!1),this.dispatchEvent(new Event("unmute")))}};w=new WeakMap,y=new WeakMap,_=new WeakMap,T=new WeakMap,E=new WeakMap,R=new WeakMap,D=new WeakMap,v=new WeakMap,L=new WeakMap,k=new WeakMap,A=new WeakMap,g=new WeakMap,h=new WeakMap,l=new WeakMap,f=new WeakMap,u=new WeakMap;let s=p;return Is.FakeMediaStreamTrack=s,Is}var Ig;function Nb(){if(Ig)return qs;Ig=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.FakeHandler=void 0;const r=Pb(),c=En(),o=Je(),s=rt(),w=Ct(),y=Tt(),_=Ut(),T=new o.Logger("FakeHandler"),E="FakeHandler";class R extends c.EnhancedEventEmitter{constructor({id:k,ordered:A,maxPacketLifeTime:g,maxRetransmits:h,label:l,protocol:f}){super();z(this,"id");z(this,"ordered");z(this,"maxPacketLifeTime");z(this,"maxRetransmits");z(this,"label");z(this,"protocol");this.id=k,this.ordered=A,this.maxPacketLifeTime=g,this.maxRetransmits=h,this.label=l,this.protocol=f}close(){this.safeEmit("close"),this.emit("@close")}send(k){this.safeEmit("message",k)}addEventListener(k,A){this.on(k,A)}}let D=class xv extends _.HandlerInterface{constructor(k){super();z(this,"_closed",!1);z(this,"fakeParameters");z(this,"_rtpParametersByKind");z(this,"_cname",`CNAME-${s.generateRandomNumber()}`);z(this,"_transportReady",!1);z(this,"_nextLocalId",1);z(this,"_tracks",new Map);z(this,"_nextSctpStreamId",0);this.fakeParameters=k}static createFactory(k){return()=>new xv(k)}get name(){return E}close(){T.debug("close()"),!this._closed&&(this._closed=!0)}setIceGatheringState(k){this.emit("@icegatheringstatechange",k)}setConnectionState(k){this.emit("@connectionstatechange",k)}async getNativeRtpCapabilities(){return T.debug("getNativeRtpCapabilities()"),this.fakeParameters.generateNativeRtpCapabilities()}async getNativeSctpCapabilities(){return T.debug("getNativeSctpCapabilities()"),this.fakeParameters.generateNativeSctpCapabilities()}run({direction:k,iceParameters:A,iceCandidates:g,dtlsParameters:h,sctpParameters:l,iceServers:f,iceTransportPolicy:u,proprietaryConstraints:p,extendedRtpCapabilities:m}){this.assertNotClosed(),T.debug("run()"),this._rtpParametersByKind={audio:w.getSendingRtpParameters("audio",m),video:w.getSendingRtpParameters("video",m)}}async updateIceServers(k){this.assertNotClosed(),T.debug("updateIceServers()")}async restartIce(k){this.assertNotClosed(),T.debug("restartIce()")}async getTransportStats(){return this.assertNotClosed(),new Map}async send({track:k,encodings:A,codecOptions:g,codec:h}){this.assertNotClosed(),T.debug("send() [kind:%s, track.id:%s]",k.kind,k.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"});const l=s.clone(this._rtpParametersByKind[k.kind]),f=l.codecs.some(p=>/.+\/rtx$/i.test(p.mimeType));l.mid=`mid-${s.generateRandomNumber()}`,A||(A=[{}]);for(const p of A)p.ssrc=s.generateRandomNumber(),f&&(p.rtx={ssrc:s.generateRandomNumber()});l.encodings=A,l.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const u=this._nextLocalId++;return this._tracks.set(u,k),{localId:String(u),rtpParameters:l}}async stopSending(k){if(T.debug("stopSending() [localId:%s]",k),!this._closed){if(!this._tracks.has(Number(k)))throw new Error("local track not found");this._tracks.delete(Number(k))}}async pauseSending(k){this.assertNotClosed()}async resumeSending(k){this.assertNotClosed()}async replaceTrack(k,A){this.assertNotClosed(),A?T.debug("replaceTrack() [localId:%s, track.id:%s]",k,A.id):T.debug("replaceTrack() [localId:%s, no track]",k),this._tracks.delete(Number(k)),this._tracks.set(Number(k),A)}async setMaxSpatialLayer(k,A){this.assertNotClosed(),T.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",k,A)}async setRtpEncodingParameters(k,A){this.assertNotClosed(),T.debug("setRtpEncodingParameters() [localId:%s, params:%o]",k,A)}async getSenderStats(k){return this.assertNotClosed(),new Map}async sendDataChannel({ordered:k,maxPacketLifeTime:A,maxRetransmits:g,label:h,protocol:l}){this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),T.debug("sendDataChannel()");const f=new R({id:this._nextSctpStreamId++,ordered:k,maxPacketLifeTime:A,maxRetransmits:g,label:h,protocol:l}),u={streamId:this._nextSctpStreamId,ordered:k,maxPacketLifeTime:A,maxRetransmits:g};return{dataChannel:f,sctpStreamParameters:u}}async receive(k){this.assertNotClosed();const A=[];for(const g of k){const{trackId:h,kind:l}=g;this._transportReady||await this.setupTransport({localDtlsRole:"client"}),T.debug("receive() [trackId:%s, kind:%s]",h,l);const f=this._nextLocalId++,u=new r.FakeMediaStreamTrack({kind:l});this._tracks.set(f,u),A.push({localId:String(f),track:u})}return A}async stopReceiving(k){if(!this._closed)for(const A of k)T.debug("stopReceiving() [localId:%s]",A),this._tracks.delete(Number(A))}async pauseReceiving(k){this.assertNotClosed()}async resumeReceiving(k){this.assertNotClosed()}async getReceiverStats(k){return this.assertNotClosed(),new Map}async receiveDataChannel({sctpStreamParameters:k,label:A,protocol:g}){return this.assertNotClosed(),this._transportReady||await this.setupTransport({localDtlsRole:"client"}),T.debug("receiveDataChannel()"),{dataChannel:new R({id:k.streamId,ordered:k.ordered,maxPacketLifeTime:k.maxPacketLifeTime,maxRetransmits:k.maxRetransmits,label:A,protocol:g})}}async setupTransport({localDtlsRole:k,localSdpObject:A}){const g=s.clone(this.fakeParameters.generateLocalDtlsParameters());k&&(g.role=k),this.emit("@connectionstatechange","connecting"),await new Promise((h,l)=>this.emit("@connect",{dtlsParameters:g},h,l)),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new y.InvalidStateError("method called in a closed handler")}};return qs.FakeHandler=D,qs}var ii={},Hg;function jb(){if(Hg)return ii;Hg=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.generateRouterRtpCapabilities=o,ii.generateNativeRtpCapabilities=s,ii.generateNativeSctpCapabilities=w,ii.generateLocalDtlsParameters=y,ii.generateTransportRemoteParameters=_,ii.generateProducerRemoteParameters=T,ii.generateConsumerRemoteParameters=E,ii.generateDataProducerRemoteParameters=R,ii.generateDataConsumerRemoteParameters=D;const r=rt();function c(){return String(r.generateRandomNumber())}function o(){return r.deepFreeze({codecs:[{mimeType:"audio/opus",kind:"audio",preferredPayloadType:100,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{useinbandfec:1,foo:"bar"}},{mimeType:"video/VP8",kind:"video",preferredPayloadType:101,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"x-google-start-bitrate":1500}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:102,clockRate:9e4,rtcpFeedback:[],parameters:{apt:101}},{mimeType:"video/H264",kind:"video",preferredPayloadType:103,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:104,clockRate:9e4,rtcpFeedback:[],parameters:{apt:103}},{mimeType:"video/VP9",kind:"video",preferredPayloadType:105,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"profile-id":0,"x-google-start-bitrate":1500}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:106,clockRate:9e4,rtcpFeedback:[],parameters:{apt:105}}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id",preferredId:2,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id",preferredId:3,preferredEncrypt:!1,direction:"recvonly"},{kind:"audio",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:4,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"recvonly"},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"http://tools.ietf.org/html/draft-ietf-avtext-framemarking-07",preferredId:6,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:framemarking",preferredId:7,preferredEncrypt:!1,direction:"sendrecv"},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:3gpp:video-orientation",preferredId:11,preferredEncrypt:!1,direction:"sendrecv"},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:12,preferredEncrypt:!1,direction:"sendrecv"}]})}function s(){return r.deepFreeze({codecs:[{mimeType:"audio/opus",kind:"audio",preferredPayloadType:111,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{minptime:10,useinbandfec:1}},{mimeType:"audio/ISAC",kind:"audio",preferredPayloadType:103,clockRate:16e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}},{mimeType:"audio/CN",kind:"audio",preferredPayloadType:106,clockRate:32e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}},{mimeType:"video/VP8",kind:"video",preferredPayloadType:96,clockRate:9e4,rtcpFeedback:[{type:"goog-remb"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{baz:"1234abcd"}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:97,clockRate:9e4,rtcpFeedback:[],parameters:{apt:96}},{mimeType:"video/VP9",kind:"video",preferredPayloadType:98,clockRate:9e4,rtcpFeedback:[{type:"goog-remb"},{type:"transport-cc"},{type:"ccm",parameter:"fir"},{type:"nack"},{type:"nack",parameter:"pli"}],parameters:{"profile-id":0}},{mimeType:"video/rtx",kind:"video",preferredPayloadType:99,clockRate:9e4,rtcpFeedback:[],parameters:{apt:98}}],headerExtensions:[{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:sdes:mid",preferredId:1},{kind:"video",uri:"urn:ietf:params:rtp-hdrext:toffset",preferredId:2},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",preferredId:3},{kind:"video",uri:"urn:3gpp:video-orientation",preferredId:4},{kind:"video",uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",preferredId:5},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay",preferredId:6},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type",preferredId:7},{kind:"video",uri:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing",preferredId:8},{kind:"audio",uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",preferredId:10}]})}function w(){return r.deepFreeze({numStreams:{OS:2048,MIS:2048}})}function y(){return r.deepFreeze({fingerprints:[{algorithm:"sha-256",value:"82:5A:68:3D:36:C3:0A:DE:AF:E7:32:43:D2:88:83:57:AC:2D:65:E5:80:C4:B6:FB:AF:1A:A0:21:9F:6D:0C:AD"}],role:"auto"})}function _(){return{id:c(),iceParameters:r.deepFreeze({iceLite:!0,password:"yku5ej8nvfaor28lvtrabcx0wkrpkztz",usernameFragment:"h3hk1iz6qqlnqlne"}),iceCandidates:r.deepFreeze([{foundation:"udpcandidate",address:"9.9.9.9",ip:"9.9.9.9",port:40533,priority:1078862079,protocol:"udp",type:"host",tcpType:"passive"},{foundation:"udpcandidate",address:"9.9.9.9",ip:"9:9:9:9:9:9",port:41333,priority:1078862089,protocol:"udp",type:"host",tcpType:"passive"}]),dtlsParameters:r.deepFreeze({fingerprints:[{algorithm:"sha-256",value:"A9:F4:E0:D2:74:D3:0F:D9:CA:A5:2F:9F:7F:47:FA:F0:C4:72:DD:73:49:D0:3B:14:90:20:51:30:1B:90:8E:71"},{algorithm:"sha-384",value:"03:D9:0B:87:13:98:F6:6D:BC:FC:92:2E:39:D4:E1:97:32:61:30:56:84:70:81:6E:D1:82:97:EA:D9:C1:21:0F:6B:C5:E7:7F:E1:97:0C:17:97:6E:CF:B3:EF:2E:74:B0"},{algorithm:"sha-512",value:"84:27:A4:28:A4:73:AF:43:02:2A:44:68:FF:2F:29:5C:3B:11:9A:60:F4:A8:F0:F5:AC:A0:E3:49:3E:B1:34:53:A9:85:CE:51:9B:ED:87:5E:B8:F4:8E:3D:FA:20:51:B8:96:EE:DA:56:DC:2F:5C:62:79:15:23:E0:21:82:2B:2C"}],role:"auto"}),sctpParameters:r.deepFreeze({port:5e3,OS:2048,MIS:2048,maxMessageSize:2e6})}}function T(){return r.deepFreeze({id:c()})}function E({id:v,codecMimeType:L}={}){switch(L){case"audio/opus":return{id:v??c(),producerId:c(),kind:"audio",rtpParameters:r.deepFreeze({codecs:[{mimeType:"audio/opus",payloadType:100,clockRate:48e3,channels:2,rtcpFeedback:[{type:"transport-cc"}],parameters:{useinbandfec:1,foo:"bar"}}],encodings:[{ssrc:46687003}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:ietf:params:rtp-hdrext:ssrc-audio-level",id:10}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"audio/ISAC":return{id:v??c(),producerId:c(),kind:"audio",rtpParameters:r.deepFreeze({codecs:[{mimeType:"audio/ISAC",payloadType:111,clockRate:16e3,channels:1,rtcpFeedback:[{type:"transport-cc"}],parameters:{}}],encodings:[{ssrc:46687004}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"video/VP8":return{id:v??c(),producerId:c(),kind:"video",rtpParameters:r.deepFreeze({codecs:[{mimeType:"video/VP8",payloadType:101,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"x-google-start-bitrate":1500}},{mimeType:"video/rtx",payloadType:102,clockRate:9e4,rtcpFeedback:[],parameters:{apt:101}}],encodings:[{ssrc:99991111,rtx:{ssrc:99991112}}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",id:4},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:3gpp:video-orientation",id:11},{uri:"urn:ietf:params:rtp-hdrext:toffset",id:12}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};case"video/H264":return{id:v??c(),producerId:c(),kind:"video",rtpParameters:r.deepFreeze({codecs:[{mimeType:"video/H264",payloadType:103,clockRate:9e4,rtcpFeedback:[{type:"nack"},{type:"nack",parameter:"pli"},{type:"ccm",parameter:"fir"},{type:"goog-remb"},{type:"transport-cc"}],parameters:{"level-asymmetry-allowed":1,"packetization-mode":1,"profile-level-id":"42e01f"}},{mimeType:"video/rtx",payloadType:104,clockRate:9e4,rtcpFeedback:[],parameters:{apt:103}}],encodings:[{ssrc:99991113,rtx:{ssrc:99991114}}],headerExtensions:[{uri:"urn:ietf:params:rtp-hdrext:sdes:mid",id:1},{uri:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time",id:4},{uri:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01",id:5},{uri:"urn:3gpp:video-orientation",id:11},{uri:"urn:ietf:params:rtp-hdrext:toffset",id:12}],rtcp:{cname:"wB4Ql4lrsxYLjzuN",reducedSize:!0,mux:!0}})};default:throw new TypeError(`unknown codecMimeType '${L}'`)}}function R(){return r.deepFreeze({id:c()})}function D({id:v}={}){return{id:v??c(),dataProducerId:c(),sctpStreamParameters:r.deepFreeze({streamId:666,maxPacketLifeTime:5e3,maxRetransmits:void 0})}}return ii}var Vg;function zb(){return Vg||(Vg=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.debug=r.testFakeParameters=r.FakeHandler=r.ortc=r.parseScalabilityMode=r.detectDeviceAsync=r.detectDevice=r.Device=r.version=r.types=void 0;const c=No();r.debug=c.default,r.types=vb(),r.version="3.11.0";var o=Cv();Object.defineProperty(r,"Device",{enumerable:!0,get:function(){return o.Device}}),Object.defineProperty(r,"detectDevice",{enumerable:!0,get:function(){return o.detectDevice}}),Object.defineProperty(r,"detectDeviceAsync",{enumerable:!0,get:function(){return o.detectDeviceAsync}});var s=Dn();Object.defineProperty(r,"parseScalabilityMode",{enumerable:!0,get:function(){return s.parse}}),r.ortc=Ct();var w=Nb();Object.defineProperty(r,"FakeHandler",{enumerable:!0,get:function(){return w.FakeHandler}}),r.testFakeParameters=jb()}(eu)),eu}var ZS=zb(),Mv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Gg=ua.createContext&&ua.createContext(Mv),Ub=["attr","size","title"];function Bb(r,c){if(r==null)return{};var o=qb(r,c),s,w;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);for(w=0;w<y.length;w++)s=y[w],!(c.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(o[s]=r[s])}return o}function qb(r,c){if(r==null)return{};var o={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(c.indexOf(s)>=0)continue;o[s]=r[s]}return o}function Lo(){return Lo=Object.assign?Object.assign.bind():function(r){for(var c=1;c<arguments.length;c++){var o=arguments[c];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])}return r},Lo.apply(this,arguments)}function Yg(r,c){var o=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);c&&(s=s.filter(function(w){return Object.getOwnPropertyDescriptor(r,w).enumerable})),o.push.apply(o,s)}return o}function Oo(r){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?Yg(Object(o),!0).forEach(function(s){Ib(r,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Yg(Object(o)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(o,s))})}return r}function Ib(r,c,o){return c=Hb(c),c in r?Object.defineProperty(r,c,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[c]=o,r}function Hb(r){var c=Vb(r,"string");return typeof c=="symbol"?c:c+""}function Vb(r,c){if(typeof r!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var s=o.call(r,c);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(r)}function Lv(r){return r&&r.map((c,o)=>ua.createElement(c.tag,Oo({key:o},c.attr),Lv(c.child)))}function Xe(r){return c=>ua.createElement(Gb,Lo({attr:Oo({},r.attr)},c),Lv(r.child))}function Gb(r){var c=o=>{var{attr:s,size:w,title:y}=r,_=Bb(r,Ub),T=w||o.size||"1em",E;return o.className&&(E=o.className),r.className&&(E=(E?E+" ":"")+r.className),ua.createElement("svg",Lo({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,s,_,{className:E,style:Oo(Oo({color:r.color||o.color},o.style),r.style),height:T,width:T,xmlns:"http://www.w3.org/2000/svg"}),y&&ua.createElement("title",null,y),r.children)};return Gg!==void 0?ua.createElement(Gg.Consumer,null,o=>c(o)):c(Mv)}function $S(r){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9l0 176c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"},child:[]}]})(r)}function JS(r){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z"},child:[]}]})(r)}function WS(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]},{tag:"path",attr:{d:"M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"},child:[]}]})(r)}function ew(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(r)}function tw(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(r)}function iw(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(r)}function nw(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"},child:[]},{tag:"path",attr:{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"},child:[]},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"},child:[]}]})(r)}function aw(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"},child:[]},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"},child:[]},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"},child:[]}]})(r)}function rw(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"},child:[]}]})(r)}function sw(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(r)}function cw(r){return Xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"},child:[]},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},child:[]}]})(r)}function ow(r){return Xe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},child:[]}]})(r)}function lw(r){return Xe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 4h16v12H5.17L4 17.17V4m0-2c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H4zm2 10h8v2H6v-2zm0-3h12v2H6V9zm0-3h12v2H6V6z"},child:[]}]})(r)}function dw(r){return Xe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm2.59-11.41L16 10l-4 4-4-4 1.41-1.41L11 10.17V6h2v4.17l1.59-1.58zM17 17H7v-2h10v2z"},child:[]}]})(r)}function uw(r){return Xe({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M208,116v36a80,80,0,0,1-160,0V76a20,20,0,0,1,40,0V44a20,20,0,0,1,40,0V60a20,20,0,0,1,40,0v56a20,20,0,0,1,40,0Z",opacity:"0.2"},child:[]},{tag:"path",attr:{d:"M188,88a27.75,27.75,0,0,0-12,2.71V60a28,28,0,0,0-41.36-24.6A28,28,0,0,0,80,44v6.71A27.75,27.75,0,0,0,68,48,28,28,0,0,0,40,76v76a88,88,0,0,0,176,0V116A28,28,0,0,0,188,88Zm12,64a72,72,0,0,1-144,0V76a12,12,0,0,1,24,0v44a8,8,0,0,0,16,0V44a12,12,0,0,1,24,0v68a8,8,0,0,0,16,0V60a12,12,0,0,1,24,0v68.67A48.08,48.08,0,0,0,120,176a8,8,0,0,0,16,0,32,32,0,0,1,32-32,8,8,0,0,0,8-8V116a12,12,0,0,1,24,0Z"},child:[]}]})(r)}function fw(r){return Xe({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M52.44,36A6,6,0,0,0,43.56,44L56.25,58H48A22,22,0,0,0,26,80V192a22,22,0,0,0,22,22H198.07l5.49,6a6,6,0,0,0,8.88-8.08Zm53.06,76.2,40.11,44.13A29.67,29.67,0,0,1,128,162a30,30,0,0,1-22.5-49.84ZM48,202a10,10,0,0,1-10-10V80A10,10,0,0,1,48,70H67.16l30.23,33.25a42,42,0,0,0,56.33,62L187.16,202ZM230,80V186a6,6,0,0,1-12,0V80a10,10,0,0,0-10-10H176a6,6,0,0,1-5-2.67L156.78,46H99.21l-.23.34a6,6,0,0,1-10-6.65l2-3A6,6,0,0,1,96,34h64a6,6,0,0,1,5,2.67L179.21,58H208A22,22,0,0,1,230,80Z"},child:[]}]})(r)}let Yb={data:""},Qb=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||Yb,Fb=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Kb=/\/\*[^]*?\*\/|  +/g,Qg=/\n+/g,Tn=(r,c)=>{let o="",s="",w="";for(let y in r){let _=r[y];y[0]=="@"?y[1]=="i"?o=y+" "+_+";":s+=y[1]=="f"?Tn(_,y):y+"{"+Tn(_,y[1]=="k"?"":c)+"}":typeof _=="object"?s+=Tn(_,c?c.replace(/([^,])+/g,T=>y.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,E=>/&/.test(E)?E.replace(/&/g,T):T?T+" "+E:E)):y):_!=null&&(y=/^--/.test(y)?y:y.replace(/[A-Z]/g,"-$&").toLowerCase(),w+=Tn.p?Tn.p(y,_):y+":"+_+";")}return o+(c&&w?c+"{"+w+"}":w)+s},Yi={},Ov=r=>{if(typeof r=="object"){let c="";for(let o in r)c+=o+Ov(r[o]);return c}return r},Xb=(r,c,o,s,w)=>{let y=Ov(r),_=Yi[y]||(Yi[y]=(E=>{let R=0,D=11;for(;R<E.length;)D=101*D+E.charCodeAt(R++)>>>0;return"go"+D})(y));if(!Yi[_]){let E=y!==r?r:(R=>{let D,v,L=[{}];for(;D=Fb.exec(R.replace(Kb,""));)D[4]?L.shift():D[3]?(v=D[3].replace(Qg," ").trim(),L.unshift(L[0][v]=L[0][v]||{})):L[0][D[1]]=D[2].replace(Qg," ").trim();return L[0]})(r);Yi[_]=Tn(w?{["@keyframes "+_]:E}:E,o?"":"."+_)}let T=o&&Yi.g?Yi.g:null;return o&&(Yi.g=Yi[_]),((E,R,D,v)=>{v?R.data=R.data.replace(v,E):R.data.indexOf(E)===-1&&(R.data=D?E+R.data:R.data+E)})(Yi[_],c,s,T),_},Zb=(r,c,o)=>r.reduce((s,w,y)=>{let _=c[y];if(_&&_.call){let T=_(o),E=T&&T.props&&T.props.className||/^go/.test(T)&&T;_=E?"."+E:T&&typeof T=="object"?T.props?"":Tn(T,""):T===!1?"":T}return s+w+(_??"")},"");function qo(r){let c=this||{},o=r.call?r(c.p):r;return Xb(o.unshift?o.raw?Zb(o,[].slice.call(arguments,1),c.p):o.reduce((s,w)=>Object.assign(s,w&&w.call?w(c.p):w),{}):o,Qb(c.target),c.g,c.o,c.k)}let kv,_u,yu;qo.bind({g:1});let Qi=qo.bind({k:1});function $b(r,c,o,s){Tn.p=c,kv=r,_u=o,yu=s}function Mn(r,c){let o=this||{};return function(){let s=arguments;function w(y,_){let T=Object.assign({},y),E=T.className||w.className;o.p=Object.assign({theme:_u&&_u()},T),o.o=/ *go\d+/.test(E),T.className=qo.apply(o,s)+(E?" "+E:"");let R=r;return r[0]&&(R=T.as||r,delete T.as),yu&&R[0]&&yu(T),kv(R,T)}return w}}var Jb=r=>typeof r=="function",ko=(r,c)=>Jb(r)?r(c):r,Wb=(()=>{let r=0;return()=>(++r).toString()})(),Av=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let c=matchMedia("(prefers-reduced-motion: reduce)");r=!c||c.matches}return r}})(),eS=20,Pv=(r,c)=>{switch(c.type){case 0:return{...r,toasts:[c.toast,...r.toasts].slice(0,eS)};case 1:return{...r,toasts:r.toasts.map(y=>y.id===c.toast.id?{...y,...c.toast}:y)};case 2:let{toast:o}=c;return Pv(r,{type:r.toasts.find(y=>y.id===o.id)?1:0,toast:o});case 3:let{toastId:s}=c;return{...r,toasts:r.toasts.map(y=>y.id===s||s===void 0?{...y,dismissed:!0,visible:!1}:y)};case 4:return c.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(y=>y.id!==c.toastId)};case 5:return{...r,pausedAt:c.time};case 6:let w=c.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(y=>({...y,pauseDuration:y.pauseDuration+w}))}}},xo=[],da={toasts:[],pausedAt:void 0},pa=r=>{da=Pv(da,r),xo.forEach(c=>{c(da)})},tS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},iS=(r={})=>{let[c,o]=qe.useState(da),s=qe.useRef(da);qe.useEffect(()=>(s.current!==da&&o(da),xo.push(o),()=>{let y=xo.indexOf(o);y>-1&&xo.splice(y,1)}),[]);let w=c.toasts.map(y=>{var _,T,E;return{...r,...r[y.type],...y,removeDelay:y.removeDelay||((_=r[y.type])==null?void 0:_.removeDelay)||(r==null?void 0:r.removeDelay),duration:y.duration||((T=r[y.type])==null?void 0:T.duration)||(r==null?void 0:r.duration)||tS[y.type],style:{...r.style,...(E=r[y.type])==null?void 0:E.style,...y.style}}});return{...c,toasts:w}},nS=(r,c="blank",o)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:c,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...o,id:(o==null?void 0:o.id)||Wb()}),Qs=r=>(c,o)=>{let s=nS(c,r,o);return pa({type:2,toast:s}),s.id},Lt=(r,c)=>Qs("blank")(r,c);Lt.error=Qs("error");Lt.success=Qs("success");Lt.loading=Qs("loading");Lt.custom=Qs("custom");Lt.dismiss=r=>{pa({type:3,toastId:r})};Lt.remove=r=>pa({type:4,toastId:r});Lt.promise=(r,c,o)=>{let s=Lt.loading(c.loading,{...o,...o==null?void 0:o.loading});return typeof r=="function"&&(r=r()),r.then(w=>{let y=c.success?ko(c.success,w):void 0;return y?Lt.success(y,{id:s,...o,...o==null?void 0:o.success}):Lt.dismiss(s),w}).catch(w=>{let y=c.error?ko(c.error,w):void 0;y?Lt.error(y,{id:s,...o,...o==null?void 0:o.error}):Lt.dismiss(s)}),r};var aS=(r,c)=>{pa({type:1,toast:{id:r,height:c}})},rS=()=>{pa({type:5,time:Date.now()})},Ys=new Map,sS=1e3,cS=(r,c=sS)=>{if(Ys.has(r))return;let o=setTimeout(()=>{Ys.delete(r),pa({type:4,toastId:r})},c);Ys.set(r,o)},oS=r=>{let{toasts:c,pausedAt:o}=iS(r);qe.useEffect(()=>{if(o)return;let y=Date.now(),_=c.map(T=>{if(T.duration===1/0)return;let E=(T.duration||0)+T.pauseDuration-(y-T.createdAt);if(E<0){T.visible&&Lt.dismiss(T.id);return}return setTimeout(()=>Lt.dismiss(T.id),E)});return()=>{_.forEach(T=>T&&clearTimeout(T))}},[c,o]);let s=qe.useCallback(()=>{o&&pa({type:6,time:Date.now()})},[o]),w=qe.useCallback((y,_)=>{let{reverseOrder:T=!1,gutter:E=8,defaultPosition:R}=_||{},D=c.filter(k=>(k.position||R)===(y.position||R)&&k.height),v=D.findIndex(k=>k.id===y.id),L=D.filter((k,A)=>A<v&&k.visible).length;return D.filter(k=>k.visible).slice(...T?[L+1]:[0,L]).reduce((k,A)=>k+(A.height||0)+E,0)},[c]);return qe.useEffect(()=>{c.forEach(y=>{if(y.dismissed)cS(y.id,y.removeDelay);else{let _=Ys.get(y.id);_&&(clearTimeout(_),Ys.delete(y.id))}})},[c]),{toasts:c,handlers:{updateHeight:aS,startPause:rS,endPause:s,calculateOffset:w}}},lS=Qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,dS=Qi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,uS=Qi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fS=Mn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${dS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${uS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,pS=Qi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,hS=Mn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${pS} 1s linear infinite;
`,mS=Qi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gS=Qi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,vS=Mn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_S=Mn("div")`
  position: absolute;
`,yS=Mn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bS=Qi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,SS=Mn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,wS=({toast:r})=>{let{icon:c,type:o,iconTheme:s}=r;return c!==void 0?typeof c=="string"?qe.createElement(SS,null,c):c:o==="blank"?null:qe.createElement(yS,null,qe.createElement(hS,{...s}),o!=="loading"&&qe.createElement(_S,null,o==="error"?qe.createElement(fS,{...s}):qe.createElement(vS,{...s})))},RS=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,TS=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,CS="0%{opacity:0;} 100%{opacity:1;}",ES="0%{opacity:1;} 100%{opacity:0;}",DS=Mn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xS=Mn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,MS=(r,c)=>{let o=r.includes("top")?1:-1,[s,w]=Av()?[CS,ES]:[RS(o),TS(o)];return{animation:c?`${Qi(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Qi(w)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},LS=qe.memo(({toast:r,position:c,style:o,children:s})=>{let w=r.height?MS(r.position||c||"top-center",r.visible):{opacity:0},y=qe.createElement(wS,{toast:r}),_=qe.createElement(xS,{...r.ariaProps},ko(r.message,r));return qe.createElement(DS,{className:r.className,style:{...w,...o,...r.style}},typeof s=="function"?s({icon:y,message:_}):qe.createElement(qe.Fragment,null,y,_))});$b(qe.createElement);var OS=({id:r,className:c,style:o,onHeightUpdate:s,children:w})=>{let y=qe.useCallback(_=>{if(_){let T=()=>{let E=_.getBoundingClientRect().height;s(r,E)};T(),new MutationObserver(T).observe(_,{subtree:!0,childList:!0,characterData:!0})}},[r,s]);return qe.createElement("div",{ref:y,className:c,style:o},w)},kS=(r,c)=>{let o=r.includes("top"),s=o?{top:0}:{bottom:0},w=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Av()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${c*(o?1:-1)}px)`,...s,...w}},AS=qo`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,To=16,pw=({reverseOrder:r,position:c="top-center",toastOptions:o,gutter:s,children:w,containerStyle:y,containerClassName:_})=>{let{toasts:T,handlers:E}=oS(o);return qe.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:To,left:To,right:To,bottom:To,pointerEvents:"none",...y},className:_,onMouseEnter:E.startPause,onMouseLeave:E.endPause},T.map(R=>{let D=R.position||c,v=E.calculateOffset(R,{reverseOrder:r,gutter:s,defaultPosition:c}),L=kS(D,v);return qe.createElement(OS,{id:R.id,key:R.id,onHeightUpdate:E.updateHeight,className:R.visible?AS:"",style:L},R.type==="custom"?ko(R.message,R):w?w(R):qe.createElement(LS,{toast:R,position:D}))}))},hw=Lt;function mw(r){return Xe({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Microphone_Off"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M16.5,7.046v4.72a.5.5,0,0,1-1,0V9.946H14a.5.5,0,0,1,0-1h1.5v-2H13.57a.5.5,0,0,1,0-1h1.87a3.23,3.23,0,0,0-.2-.72,3.533,3.533,0,0,0-6.16-.59c-.36.53-1.23.03-.87-.5a4.509,4.509,0,0,1,7.71.21A5.255,5.255,0,0,1,16.5,7.046Z"},child:[]},{tag:"path",attr:{d:"M20.14,19.436q-2.625-2.64-5.27-5.28Q10.685,9.986,6.51,5.8c-.65-.64-1.3-1.29-1.94-1.94a.5.5,0,0,0-.71.71Q5.69,6.381,7.5,8.206v3.92a4.591,4.591,0,0,0,3.59,4.61,4.629,4.629,0,0,0,3.9-1.04c.24.24.48.47.71.71a5.252,5.252,0,0,1-6.62.67,5.2,5.2,0,0,1-2.05-2.76,7.608,7.608,0,0,1-.24-2.33v-2.2a.5.5,0,0,0-1,0,15.463,15.463,0,0,0,.34,4.99,6.276,6.276,0,0,0,5.37,4.17v1.99H8a.5.5,0,0,0,0,1h8a.5.5,0,0,0,0-1H12.5v-2a6.118,6.118,0,0,0,3.91-1.82l1.08,1.08c.65.65,1.3,1.3,1.95,1.94A.5.5,0,0,0,20.14,19.436Zm-11.2-5.42a3.991,3.991,0,0,1-.44-2.03V9.206l5.77,5.77A3.521,3.521,0,0,1,8.94,14.016Z"},child:[]}]}]}]})(r)}function gw(r){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"336",height:"336",x:"128",y:"128",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"57",ry:"57"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24"},child:[]}]})(r)}function vw(r){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M432 400 96 64"},child:[]},{tag:"path",attr:{d:"M400 240v-31.55c0-8.61-6.62-16-15.23-16.43A16 16 0 0 0 368 208v32a111.58 111.58 0 0 1-2.45 23.31 4.05 4.05 0 0 0 1.07 3.69l21.82 21.81a2 2 0 0 0 3.29-.72A143.27 143.27 0 0 0 400 240zM256 352a112.36 112.36 0 0 1-112-112v-31.55c0-8.61-6.62-16-15.23-16.43A16 16 0 0 0 112 208v32c0 74 56.1 135.12 128 143.11V432h-47.55c-8.61 0-16 6.62-16.43 15.23A16 16 0 0 0 192 464h127.55c8.61 0 16-6.62 16.43-15.23A16 16 0 0 0 320 432h-48v-48.89a143.08 143.08 0 0 0 52-16.22 4 4 0 0 0 .91-6.35L307 342.63a4 4 0 0 0-4.51-.78A110.78 110.78 0 0 1 256 352zm0-272a47.18 47.18 0 0 1 48 48v74.72a4 4 0 0 0 1.17 2.82L332.59 233a2 2 0 0 0 3.41-1.42V128.91C336 85 301 48.6 257.14 48a79.66 79.66 0 0 0-68.47 36.57 4 4 0 0 0 .54 5l19.54 19.54a2 2 0 0 0 3.25-.63A47.44 47.44 0 0 1 256 80z"},child:[]},{tag:"path",attr:{d:"M207.27 242.9 179.41 215a2 2 0 0 0-3.41 1.42V239a80.89 80.89 0 0 0 23.45 56.9 78.55 78.55 0 0 0 77.8 21.19 2 2 0 0 0 .86-3.35l-24.91-24.91a4.08 4.08 0 0 0-2.42-1.15c-21.65-2.52-39.48-20.44-42.37-42.43a4 4 0 0 0-1.14-2.35z"},child:[]}]})(r)}function _w(r){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M192 448h128m64-240v32c0 70.4-57.6 128-128 128h0c-70.4 0-128-57.6-128-128v-32m128 160v80"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 64a63.68 63.68 0 0 0-64 64v111c0 35.2 29 65 64 65s64-29 64-65V128c0-36-28-64-64-64z"},child:[]}]})(r)}function yw(r){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"},child:[]}]})(r)}function bw(r){return Xe({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},child:[]}]})(r)}export{mw as C,nw as F,bw as H,gw as I,dw as M,pw as O,uw as P,ua as R,hw as V,aw as a,sw as b,cw as c,rw as d,JS as e,iw as f,tw as g,yw as h,$S as i,NS as j,fw as k,Wd as l,lw as m,ow as n,ew as o,WS as p,_w as q,qe as r,vw as s,ZS as t,jS as u};
